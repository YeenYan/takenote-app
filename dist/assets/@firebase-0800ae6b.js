import{_ as H,a as Ll,b as bl,c as Iu,d as C,e as k,f as Tt}from"./tslib-392a33a7.js";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jy=function(t){for(var e=[],r=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},qS=function(t){for(var e=[],r=0,i=0;r<t.length;){var s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){var u=t[r++];e[i++]=String.fromCharCode((s&31)<<6|u&63)}else if(s>239&&s<365){var u=t[r++],c=t[r++],l=t[r++],f=((s&7)<<18|(u&63)<<12|(c&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{var u=t[r++],c=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(u&63)<<6|c&63)}}return e.join("")},BS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],s=0;s<t.length;s+=3){var u=t[s],c=s+1<t.length,l=c?t[s+1]:0,f=s+2<t.length,v=f?t[s+2]:0,m=u>>2,y=(u&3)<<4|l>>4,w=(l&15)<<2|v>>6,I=v&63;f||(I=64,c||(w=64)),i.push(r[m],r[y],r[w],r[I])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jy(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],s=0;s<t.length;){var u=r[t.charAt(s++)],c=s<t.length,l=c?r[t.charAt(s)]:0;++s;var f=s<t.length,v=f?r[t.charAt(s)]:64;++s;var m=s<t.length,y=m?r[t.charAt(s)]:64;if(++s,u==null||l==null||v==null||y==null)throw Error();var w=u<<2|l>>4;if(i.push(w),v!==64){var I=l<<4&240|v>>2;if(i.push(I),y!==64){var E=v<<6&192|y;i.push(E)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},KS=function(t){var e=jy(t);return BS.encodeByteArray(e,!0)},vm=function(t){return KS(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){return Mo(void 0,t)}function Mo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:var r=e;return new Date(r.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(var i in e)!e.hasOwnProperty(i)||!HS(i)||(t[i]=Mo(t[i],e[i]));return t}function HS(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zS=function(){function t(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(r,i){e.resolve=r,e.reject=i})}return t.prototype.wrapCallback=function(e){var r=this;return function(i,s){i?r.reject(i):r.resolve(s),typeof e=="function"&&(r.promise.catch(function(){}),e.length===1?e(i):e(i,s))}},t}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,u=t.sub||t.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var c=Ll({iss:"https://securetoken.google.com/"+i,aud:i,iat:s,exp:s+3600,auth_time:s,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[vm(JSON.stringify(r)),vm(JSON.stringify(c)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function qy(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QS(){return typeof self=="object"&&self.self===self}function XS(){var t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JS(){return br().indexOf("Electron/")>=0}function ZS(){var t=br();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function t1(){return br().indexOf("MSAppHost/")>=0}function e1(){return!qy()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n1="FirebaseError",r1=function(t){H(e,t);function e(r,i,s){var u=t.call(this,i)||this;return u.code=r,u.customData=s,u.name=n1,Object.setPrototypeOf(u,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(u,lf.prototype.create),u}return e}(Error),lf=function(){function t(e,r,i){this.service=e,this.serviceName=r,this.errors=i}return t.prototype.create=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=r[0]||{},u=this.service+"/"+e,c=this.errors[e],l=c?i1(c,s):"Error",f=this.serviceName+": "+l+" ("+u+").",v=new r1(u,f,s);return v},t}();function i1(t,e){return t.replace(o1,function(r,i){var s=e[i];return s!=null?String(s):"<"+i+"?>"})}var o1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s1(t,e){var r=new u1(t,e);return r.subscribe.bind(r)}var u1=function(){function t(e,r){var i=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(function(){e(i)}).catch(function(s){i.error(s)})}return t.prototype.next=function(e){this.forEachObserver(function(r){r.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(r){r.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},t.prototype.subscribe=function(e,r,i){var s=this,u;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");a1(e,["next","error","complete"])?u=e:u={next:e,error:r,complete:i},u.next===void 0&&(u.next=Il),u.error===void 0&&(u.error=Il),u.complete===void 0&&(u.complete=Il);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{s.finalError?u.error(s.finalError):u.complete()}catch{}}),this.observers.push(u),c},t.prototype.unsubscribeOne=function(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},t.prototype.forEachObserver=function(e){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,e)},t.prototype.sendOne=function(e,r){var i=this;this.task.then(function(){if(i.observers!==void 0&&i.observers[e]!==void 0)try{r(i.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})},t.prototype.close=function(e){var r=this;this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},t}();function a1(t,e){if(typeof t!="object"||t===null)return!1;for(var r=0,i=e;r<i.length;r++){var s=i[r];if(s in t&&typeof t[s]=="function")return!0}return!1}function Il(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}var ha=function(){function t(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},t.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},t.prototype.setServiceProps=function(e){return this.serviceProps=e,this},t.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},t}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c1=function(){function t(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(e){var r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){var i=new zS;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{var s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise},t.prototype.getImmediate=function(e){var r,i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(s)return null;throw u}else{if(s)return null;throw Error("Service "+this.name+" is not available")}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var r,i;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,!!this.shouldAutoInitialize()){if(l1(e))try{this.getOrInitializeService({instanceIdentifier:lr})}catch{}try{for(var s=bl(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=Iu(u.value,2),l=c[0],f=c[1],v=this.normalizeInstanceIdentifier(l);try{var m=this.getOrInitializeService({instanceIdentifier:v});f.resolve(m)}catch{}}}catch(y){r={error:y}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}},t.prototype.clearInstance=function(e){e===void 0&&(e=lr),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return C(this,void 0,void 0,function(){var e;return k(this,function(r){switch(r.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Tt(Tt([],Iu(e.filter(function(i){return"INTERNAL"in i}).map(function(i){return i.INTERNAL.delete()}))),Iu(e.filter(function(i){return"_delete"in i}).map(function(i){return i._delete()}))))];case 1:return r.sent(),[2]}})})},t.prototype.isComponentSet=function(){return this.component!=null},t.prototype.isInitialized=function(e){return e===void 0&&(e=lr),this.instances.has(e)},t.prototype.getOptions=function(e){return e===void 0&&(e=lr),this.instancesOptions.get(e)||{}},t.prototype.initialize=function(e){var r,i;e===void 0&&(e={});var s=e.options,u=s===void 0?{}:s,c=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:u});try{for(var f=bl(this.instancesDeferred.entries()),v=f.next();!v.done;v=f.next()){var m=Iu(v.value,2),y=m[0],w=m[1],I=this.normalizeInstanceIdentifier(y);c===I&&w.resolve(l)}}catch(E){r={error:E}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return l},t.prototype.onInit=function(e,r){var i,s=this.normalizeInstanceIdentifier(r),u=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(s,u);var c=this.instances.get(s);return c&&e(c,s),function(){u.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,r){var i,s,u=this.onInitCallbacks.get(r);if(u)try{for(var c=bl(u),l=c.next();!l.done;l=c.next()){var f=l.value;try{f(e,r)}catch{}}}catch(v){i={error:v}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}},t.prototype.getOrInitializeService=function(e){var r=e.instanceIdentifier,i=e.options,s=i===void 0?{}:i,u=this.instances.get(r);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:h1(r),options:s}),this.instances.set(r,u),this.instancesOptions.set(r,s),this.invokeOnInitCallbacks(u,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,u)}catch{}return u||null},t.prototype.normalizeInstanceIdentifier=function(e){return e===void 0&&(e=lr),this.component?this.component.multipleInstances?e:lr:e},t.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},t}();function h1(t){return t===lr?void 0:t}function l1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f1=function(){function t(e){this.name=e,this.providers=new Map}return t.prototype.addComponent=function(e){var r=this.getProvider(e.name);if(r.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);r.setComponent(e)},t.prototype.addOrOverwriteComponent=function(e){var r=this.getProvider(e.name);r.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},t.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var r=new c1(e,this);return this.providers.set(e,r),r},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ve(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var u=arguments[e],c=0,l=u.length;c<l;c++,s++)i[s]=u[c];return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,ff=[],st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));var By={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},p1=st.INFO,d1=(hr={},hr[st.DEBUG]="log",hr[st.VERBOSE]="log",hr[st.INFO]="info",hr[st.WARN]="warn",hr[st.ERROR]="error",hr),v1=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(e<t.logLevel)){var s=new Date().toISOString(),u=d1[e];if(u)console[u].apply(console,Ve(["["+s+"]  "+t.name+":"],r));else throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}},Ky=function(){function t(e){this.name=e,this._logLevel=p1,this._logHandler=v1,this._userLogHandler=null,ff.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in st))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){this._logLevel=typeof e=="string"?By[e]:e},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,st.DEBUG],e)),this._logHandler.apply(this,Ve([this,st.DEBUG],e))},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,st.VERBOSE],e)),this._logHandler.apply(this,Ve([this,st.VERBOSE],e))},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,st.INFO],e)),this._logHandler.apply(this,Ve([this,st.INFO],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,st.WARN],e)),this._logHandler.apply(this,Ve([this,st.WARN],e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,Ve([this,st.ERROR],e)),this._logHandler.apply(this,Ve([this,st.ERROR],e))},t}();function g1(t){ff.forEach(function(e){e.setLogLevel(t)})}function m1(t,e){for(var r=function(c){var l=null;e&&e.level&&(l=By[e.level]),t===null?c.userLogHandler=null:c.userLogHandler=function(f,v){for(var m=[],y=2;y<arguments.length;y++)m[y-2]=arguments[y];var w=m.map(function(I){if(I==null)return null;if(typeof I=="string")return I;if(typeof I=="number"||typeof I=="boolean")return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch{return null}}).filter(function(I){return I}).join(" ");v>=(l??f.logLevel)&&t({level:st[v].toLowerCase(),message:w,args:m,type:f.name})}},i=0,s=ff;i<s.length;i++){var u=s[i];r(u)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An,y1=(An={},An["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",An["bad-app-name"]="Illegal App name: '{$appName}",An["duplicate-app"]="Firebase App named '{$appName}' already exists",An["app-deleted"]="Firebase App named '{$appName}' already deleted",An["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",An["invalid-log-argument"]="First argument to `onLog` must be null or a function.",An),ai=new lf("app","Firebase",y1),Gy="@firebase/app",w1="0.6.30",b1="@firebase/analytics",I1="@firebase/app-check",E1="@firebase/auth",T1="@firebase/database",S1="@firebase/functions",_1="@firebase/installations",A1="@firebase/messaging",N1="@firebase/performance",k1="@firebase/remote-config",D1="@firebase/storage",C1="@firebase/firestore",R1="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Fu="[DEFAULT]",O1=(zt={},zt[Gy]="fire-core",zt[b1]="fire-analytics",zt[I1]="fire-app-check",zt[E1]="fire-auth",zt[T1]="fire-rtdb",zt[S1]="fire-fn",zt[_1]="fire-iid",zt[A1]="fire-fcm",zt[N1]="fire-perf",zt[k1]="fire-rc",zt[D1]="fire-gcs",zt[C1]="fire-fst",zt["fire-js"]="fire-js",zt[R1]="fire-js-all",zt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=new Ky("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cu=function(){function t(e,r,i){var s=this;this.firebase_=i,this.isDeleted_=!1,this.name_=r.name,this.automaticDataCollectionEnabled_=r.automaticDataCollectionEnabled||!1,this.options_=GS(e),this.container=new f1(r.name),this._addComponent(new ha("app",function(){return s},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(u){return s._addComponent(u)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var e=this;return new Promise(function(r){e.checkDestroyed_(),r()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(r){return r.delete()}))}).then(function(){e.isDeleted_=!0})},t.prototype._getService=function(e,r){var i;r===void 0&&(r=Fu),this.checkDestroyed_();var s=this.container.getProvider(e);return!s.isInitialized()&&((i=s.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:r})},t.prototype._removeServiceInstance=function(e,r){r===void 0&&(r=Fu),this.container.getProvider(e).clearInstance(r)},t.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(r){di.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,r)}},t.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ai.create("app-deleted",{appName:this.name_})},t}();Cu.prototype.name&&Cu.prototype.options||Cu.prototype.delete||console.log("dc");var x1="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){var e={},r=new Map,i={__esModule:!0,initializeApp:c,app:u,registerVersion:v,setLogLevel:g1,onLog:m,apps:null,SDK_VERSION:x1,INTERNAL:{registerComponent:f,removeApp:s,components:r,useAsService:y}};i.default=i,Object.defineProperty(i,"apps",{get:l});function s(w){delete e[w]}function u(w){if(w=w||Fu,!gm(e,w))throw ai.create("no-app",{appName:w});return e[w]}u.App=t;function c(w,I){if(I===void 0&&(I={}),typeof I!="object"||I===null){var E=I;I={name:E}}var S=I;S.name===void 0&&(S.name=Fu);var N=S.name;if(typeof N!="string"||!N)throw ai.create("bad-app-name",{appName:String(N)});if(gm(e,N))throw ai.create("duplicate-app",{appName:N});var x=new t(w,S,i);return e[N]=x,x}function l(){return Object.keys(e).map(function(w){return e[w]})}function f(w){var I=w.name;if(r.has(I))return di.debug("There were multiple attempts to register component "+I+"."),w.type==="PUBLIC"?i[I]:null;if(r.set(I,w),w.type==="PUBLIC"){var E=function(F){if(F===void 0&&(F=u()),typeof F[I]!="function")throw ai.create("invalid-app-argument",{appName:I});return F[I]()};w.serviceProps!==void 0&&Mo(E,w.serviceProps),i[I]=E,t.prototype[I]=function(){for(var F=[],U=0;U<arguments.length;U++)F[U]=arguments[U];var X=this._getService.bind(this,I);return X.apply(this,w.multipleInstances?F:[])}}for(var S=0,N=Object.keys(e);S<N.length;S++){var x=N[S];e[x]._addComponent(w)}return w.type==="PUBLIC"?i[I]:null}function v(w,I,E){var S,N=(S=O1[w])!==null&&S!==void 0?S:w;E&&(N+="-"+E);var x=N.match(/\s|\//),F=I.match(/\s|\//);if(x||F){var U=['Unable to register library "'+N+'" with version "'+I+'":'];x&&U.push('library name "'+N+'" contains illegal characters (whitespace or "/")'),x&&F&&U.push("and"),F&&U.push('version name "'+I+'" contains illegal characters (whitespace or "/")'),di.warn(U.join(" "));return}f(new ha(N+"-version",function(){return{library:N,version:I}},"VERSION"))}function m(w,I){if(w!==null&&typeof w!="function")throw ai.create("invalid-log-argument");m1(w,I)}function y(w,I){if(I==="serverAuth")return null;var E=I;return E}return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){var t=P1(Cu);t.INTERNAL=Ll(Ll({},t.INTERNAL),{createFirebaseNamespace:Hy,extendNamespace:e,createSubscribe:s1,ErrorFactory:lf,deepExtend:Mo});function e(r){Mo(t,r)}return t}var pf=Hy();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L1=function(){function t(e){this.container=e}return t.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map(function(r){if(M1(r)){var i=r.getImmediate();return i.library+"/"+i.version}else return null}).filter(function(r){return r}).join(" ")},t}();function M1(t){var e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e){t.INTERNAL.registerComponent(new ha("platform-logger",function(r){return new L1(r)},"PRIVATE")),t.registerVersion(Gy,w1,e),t.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(QS()&&self.firebase!==void 0){di.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var mm=self.firebase.SDK_VERSION;mm&&mm.indexOf("LITE")>=0&&di.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var V1=pf.initializeApp;pf.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return qy()&&di.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),V1.apply(void 0,t)};var Y=pf;F1(Y);(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(n,o,a){n!=Array.prototype&&n!=Object.prototype&&(n[o]=a.value)};function r(n){n=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,n];for(var o=0;o<n.length;++o){var a=n[o];if(a&&a.Math==Math)return a}return globalThis}var i=r(this);function s(n,o){if(o){var a=i;n=n.split(".");for(var h=0;h<n.length-1;h++){var p=n[h];p in a||(a[p]={}),a=a[p]}n=n[n.length-1],h=a[n],o=o(h),o!=h&&o!=null&&e(a,n,{configurable:!0,writable:!0,value:o})}}function u(n){var o=0;return function(){return o<n.length?{done:!1,value:n[o++]}:{done:!0}}}function c(n){var o=typeof Symbol<"u"&&Symbol.iterator&&n[Symbol.iterator];return o?o.call(n):{next:u(n)}}s("Promise",function(n){function o(g){this.b=0,this.c=void 0,this.a=[];var b=this.f();try{g(b.resolve,b.reject)}catch(A){b.reject(A)}}function a(){this.a=null}function h(g){return g instanceof o?g:new o(function(b){b(g)})}if(n)return n;a.prototype.b=function(g){if(this.a==null){this.a=[];var b=this;this.c(function(){b.g()})}this.a.push(g)};var p=i.setTimeout;a.prototype.c=function(g){p(g,0)},a.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var b=0;b<g.length;++b){var A=g[b];g[b]=null;try{A()}catch(D){this.f(D)}}}this.a=null},a.prototype.f=function(g){this.c(function(){throw g})},o.prototype.f=function(){function g(D){return function(W){A||(A=!0,D.call(b,W))}}var b=this,A=!1;return{resolve:g(this.m),reject:g(this.g)}},o.prototype.m=function(g){if(g===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof o)this.s(g);else{t:switch(typeof g){case"object":var b=g!=null;break t;case"function":b=!0;break t;default:b=!1}b?this.v(g):this.h(g)}},o.prototype.v=function(g){var b=void 0;try{b=g.then}catch(A){this.g(A);return}typeof b=="function"?this.u(b,g):this.h(g)},o.prototype.g=function(g){this.i(2,g)},o.prototype.h=function(g){this.i(1,g)},o.prototype.i=function(g,b){if(this.b!=0)throw Error("Cannot settle("+g+", "+b+"): Promise already settled in state"+this.b);this.b=g,this.c=b,this.l()},o.prototype.l=function(){if(this.a!=null){for(var g=0;g<this.a.length;++g)d.b(this.a[g]);this.a=null}};var d=new a;return o.prototype.s=function(g){var b=this.f();g.Ra(b.resolve,b.reject)},o.prototype.u=function(g,b){var A=this.f();try{g.call(b,A.resolve,A.reject)}catch(D){A.reject(D)}},o.prototype.then=function(g,b){function A(ot,Ft){return typeof ot=="function"?function(cn){try{D(ot(cn))}catch(wl){W(wl)}}:Ft}var D,W,ct=new o(function(ot,Ft){D=ot,W=Ft});return this.Ra(A(g,D),A(b,W)),ct},o.prototype.catch=function(g){return this.then(void 0,g)},o.prototype.Ra=function(g,b){function A(){switch(D.b){case 1:g(D.c);break;case 2:b(D.c);break;default:throw Error("Unexpected state: "+D.b)}}var D=this;this.a==null?d.b(A):this.a.push(A)},o.resolve=h,o.reject=function(g){return new o(function(b,A){A(g)})},o.race=function(g){return new o(function(b,A){for(var D=c(g),W=D.next();!W.done;W=D.next())h(W.value).Ra(b,A)})},o.all=function(g){var b=c(g),A=b.next();return A.done?h([]):new o(function(D,W){function ct(cn){return function(wl){ot[cn]=wl,Ft--,Ft==0&&D(ot)}}var ot=[],Ft=0;do ot.push(void 0),Ft++,h(A.value).Ra(ct(ot.length-1),W),A=b.next();while(!A.done)})},o});var l=l||{},f=this||self,v=/^[\w+/_-]+[=]{0,2}$/,m=null;function y(n){return(n=n.querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&v.test(n)?n:""}function w(){}function I(n){var o=typeof n;return o!="object"?o:n?Array.isArray(n)?"array":o:"null"}function E(n){var o=I(n);return o=="array"||o=="object"&&typeof n.length=="number"}function S(n){return I(n)=="function"}function N(n){var o=typeof n;return o=="object"&&n!=null||o=="function"}function x(n){return Object.prototype.hasOwnProperty.call(n,F)&&n[F]||(n[F]=++U)}var F="closure_uid_"+(1e9*Math.random()>>>0),U=0;function X(n,o,a){return n.call.apply(n.bind,arguments)}function et(n,o,a){if(!n)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var p=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(p,h),n.apply(o,p)}}return function(){return n.apply(o,arguments)}}function L(n,o,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?L=X:L=et,L.apply(null,arguments)}function dt(n,o){var a=Array.prototype.slice.call(arguments,1);return function(){var h=a.slice();return h.push.apply(h,arguments),n.apply(this,h)}}function $(n,o){function a(){}a.prototype=o.prototype,n.bb=o.prototype,n.prototype=new a,n.prototype.constructor=n}function nn(n){return n}function T(n,o,a){this.code=qi+n,this.message=o||Mb[n]||"",this.a=a||null}$(T,Error),T.prototype.w=function(){var n={code:this.code,message:this.message};return this.a&&(n.serverResponse=this.a),n},T.prototype.toJSON=function(){return this.w()};function ji(n){var o=n&&n.code;return o?new T(o.substring(qi.length),n.message,n.serverResponse):null}var qi="auth/",Mb={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ja={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function Bi(n){for(var o in ja)if(ja[o].id===n)return n=ja[o],{firebaseEndpoint:n.Ua,secureTokenEndpoint:n.$a,identityPlatformEndpoint:n.Xa};return null}var Ki;Ki=Bi("__EID__")?"__EID__":void 0;function Sp(n){if(!n)return!1;try{return!!n.$goog_Thenable}catch{return!1}}function ge(n){if(Error.captureStackTrace)Error.captureStackTrace(this,ge);else{var o=Error().stack;o&&(this.stack=o)}n&&(this.message=String(n))}$(ge,Error),ge.prototype.name="CustomError";function qa(n,o){n=n.split("%s");for(var a="",h=n.length-1,p=0;p<h;p++)a+=n[p]+(p<o.length?o[p]:"%s");ge.call(this,a+n[h])}$(qa,ge),qa.prototype.name="AssertionError";function Lr(n,o){throw new qa("Failure"+(n?": "+n:""),Array.prototype.slice.call(arguments,1))}function Ba(n,o){this.c=n,this.f=o,this.b=0,this.a=null}Ba.prototype.get=function(){if(0<this.b){this.b--;var n=this.a;this.a=n.next,n.next=null}else n=this.c();return n};function _p(n,o){n.f(o),100>n.b&&(n.b++,o.next=n.a,n.a=o)}function Ap(){this.b=this.a=null}var Np=new Ba(function(){return new Ka},function(n){n.reset()});Ap.prototype.add=function(n,o){var a=Np.get();a.set(n,o),this.b?this.b.next=a:this.a=a,this.b=a};function Fb(){var n=td,o=null;return n.a&&(o=n.a,n.a=n.a.next,n.a||(n.b=null),o.next=null),o}function Ka(){this.next=this.b=this.a=null}Ka.prototype.set=function(n,o){this.a=n,this.b=o,this.next=null},Ka.prototype.reset=function(){this.next=this.b=this.a=null};var kp=Array.prototype.indexOf?function(n,o){return Array.prototype.indexOf.call(n,o,void 0)}:function(n,o){if(typeof n=="string")return typeof o!="string"||o.length!=1?-1:n.indexOf(o,0);for(var a=0;a<n.length;a++)if(a in n&&n[a]===o)return a;return-1},yt=Array.prototype.forEach?function(n,o,a){Array.prototype.forEach.call(n,o,a)}:function(n,o,a){for(var h=n.length,p=typeof n=="string"?n.split(""):n,d=0;d<h;d++)d in p&&o.call(a,p[d],d,n)};function Vb(n,o){for(var a=typeof n=="string"?n.split(""):n,h=n.length-1;0<=h;--h)h in a&&o.call(void 0,a[h],h,n)}var Ub=Array.prototype.filter?function(n,o){return Array.prototype.filter.call(n,o,void 0)}:function(n,o){for(var a=n.length,h=[],p=0,d=typeof n=="string"?n.split(""):n,g=0;g<a;g++)if(g in d){var b=d[g];o.call(void 0,b,g,n)&&(h[p++]=b)}return h},ys=Array.prototype.map?function(n,o){return Array.prototype.map.call(n,o,void 0)}:function(n,o){for(var a=n.length,h=Array(a),p=typeof n=="string"?n.split(""):n,d=0;d<a;d++)d in p&&(h[d]=o.call(void 0,p[d],d,n));return h},jb=Array.prototype.some?function(n,o){return Array.prototype.some.call(n,o,void 0)}:function(n,o){for(var a=n.length,h=typeof n=="string"?n.split(""):n,p=0;p<a;p++)if(p in h&&o.call(void 0,h[p],p,n))return!0;return!1};function qb(n){t:{for(var o=bE,a=n.length,h=typeof n=="string"?n.split(""):n,p=0;p<a;p++)if(p in h&&o.call(void 0,h[p],p,n)){o=p;break t}o=-1}return 0>o?null:typeof n=="string"?n.charAt(o):n[o]}function rn(n,o){return 0<=kp(n,o)}function ws(n,o){o=kp(n,o);var a;return(a=0<=o)&&Array.prototype.splice.call(n,o,1),a}function Re(n,o){var a=0;Vb(n,function(h,p){o.call(void 0,h,p,n)&&Array.prototype.splice.call(n,p,1).length==1&&a++})}function Ga(n){return Array.prototype.concat.apply([],arguments)}function Kn(n){var o=n.length;if(0<o){for(var a=Array(o),h=0;h<o;h++)a[h]=n[h];return a}return[]}var Dp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]},Bb=/&/g,Kb=/</g,Gb=/>/g,Hb=/"/g,zb=/'/g,Wb=/\x00/g,$b=/[\x00&<>"']/;function lt(n,o){return n.indexOf(o)!=-1}function Ha(n,o){return n<o?-1:n>o?1:0}var Mr;t:{var Cp=f.navigator;if(Cp){var Rp=Cp.userAgent;if(Rp){Mr=Rp;break t}}Mr=""}function xt(n){return lt(Mr,n)}function Op(n,o){for(var a in n)o.call(void 0,n[a],a,n)}function Gn(n){for(var o in n)return!1;return!0}function mn(n){var o={},a;for(a in n)o[a]=n[a];return o}var xp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(n,o){for(var a,h,p=1;p<arguments.length;p++){h=arguments[p];for(a in h)n[a]=h[a];for(var d=0;d<xp.length;d++)a=xp[d],Object.prototype.hasOwnProperty.call(h,a)&&(n[a]=h[a])}}function Pp(n,o){t:{try{var a=n&&n.ownerDocument,h=a&&(a.defaultView||a.parentWindow);if(h=h||f,h.Element&&h.Location){var p=h;break t}}catch{}p=null}if(p&&typeof p[o]<"u"&&(!n||!(n instanceof p[o])&&(n instanceof p.Location||n instanceof p.Element))){if(N(n))try{var d=n.constructor.displayName||n.constructor.name||Object.prototype.toString.call(n)}catch{d="<object could not be stringified>"}else d=n===void 0?"undefined":n===null?"null":typeof n;Lr("Argument is not a %s (or a non-Element, non-Location mock); got: %s",o,d)}}function Ke(n,o){this.a=n===bs&&o||"",this.b=Lp}Ke.prototype.ta=!0,Ke.prototype.sa=function(){return this.a},Ke.prototype.toString=function(){return"Const{"+this.a+"}"};function za(n){return n instanceof Ke&&n.constructor===Ke&&n.b===Lp?n.a:(Lr("expected object of type Const, got '"+n+"'"),"type_error:Const")}var Lp={},bs={},Is;function Mp(){if(Is===void 0){var n=null,o=f.trustedTypes;if(o&&o.createPolicy){try{n=o.createPolicy("goog#html",{createHTML:nn,createScript:nn,createScriptURL:nn})}catch(a){f.console&&f.console.error(a.message)}Is=n}else Is=n}return Is}function Fr(n,o){this.a=o===Vp?n:""}Fr.prototype.ta=!0,Fr.prototype.sa=function(){return this.a.toString()},Fr.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function Fp(n){return n instanceof Fr&&n.constructor===Fr?n.a:(Lr("expected object of type TrustedResourceUrl, got '"+n+"' of type "+I(n)),"type_error:TrustedResourceUrl")}function Wa(n,o){var a=za(n);if(!Xb.test(a))throw Error("Invalid TrustedResourceUrl format: "+a);return n=a.replace(Qb,function(h,p){if(!Object.prototype.hasOwnProperty.call(o,p))throw Error('Found marker, "'+p+'", in format string, "'+a+'", but no valid label mapping found in args: '+JSON.stringify(o));return h=o[p],h instanceof Ke?za(h):encodeURIComponent(String(h))}),Yb(n)}var Qb=/%{(\w+)}/g,Xb=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Vp={};function Yb(n){var o=Mp();return n=o?o.createScriptURL(n):n,new Fr(n,Vp)}function ue(n,o){this.a=o===Gi?n:""}ue.prototype.ta=!0,ue.prototype.sa=function(){return this.a.toString()},ue.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function Es(n){return n instanceof ue&&n.constructor===ue?n.a:(Lr("expected object of type SafeUrl, got '"+n+"' of type "+I(n)),"type_error:SafeUrl")}var Jb=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Zb=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Up=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function jp(n){if(n instanceof ue)return n;if(n=typeof n=="object"&&n.ta?n.sa():String(n),Up.test(n))n=new ue(n,Gi);else{n=String(n),n=n.replace(/(%0A|%0D)/g,"");var o=n.match(Zb);n=o&&Jb.test(o[1])?new ue(n,Gi):null}return n}function qp(n){return n instanceof ue?n:(n=typeof n=="object"&&n.ta?n.sa():String(n),Up.test(n)||(n="about:invalid#zClosurez"),new ue(n,Gi))}var Gi={},Bp=new ue("about:invalid#zClosurez",Gi);function Vr(n,o,a){this.a=a===Kp?n:""}Vr.prototype.ta=!0,Vr.prototype.sa=function(){return this.a.toString()},Vr.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function tI(n){return n instanceof Vr&&n.constructor===Vr?n.a:(Lr("expected object of type SafeHtml, got '"+n+"' of type "+I(n)),"type_error:SafeHtml")}var Kp={};function eI(n,o){Pp(n,"HTMLScriptElement"),n.src=Fp(o),(o=n.ownerDocument&&n.ownerDocument.defaultView)&&o!=f?o=y(o.document):(m===null&&(m=y(f.document)),o=m),o&&n.setAttribute("nonce",o)}function Gp(n,o,a,h){return n=n instanceof ue?n:qp(n),o=o||f,a=a instanceof Ke?za(a):a||"",o.open(Es(n),a,h,void 0)}function Hp(n,o){for(var a=n.split("%s"),h="",p=Array.prototype.slice.call(arguments,1);p.length&&1<a.length;)h+=a.shift()+p.shift();return h+a.join("%s")}function $a(n){return $b.test(n)&&(n.indexOf("&")!=-1&&(n=n.replace(Bb,"&amp;")),n.indexOf("<")!=-1&&(n=n.replace(Kb,"&lt;")),n.indexOf(">")!=-1&&(n=n.replace(Gb,"&gt;")),n.indexOf('"')!=-1&&(n=n.replace(Hb,"&quot;")),n.indexOf("'")!=-1&&(n=n.replace(zb,"&#39;")),n.indexOf("\0")!=-1&&(n=n.replace(Wb,"&#0;"))),n}function Qa(n){return Qa[" "](n),n}Qa[" "]=w;function nI(n,o){var a=sI;return Object.prototype.hasOwnProperty.call(a,n)?a[n]:a[n]=o(n)}var rI=xt("Opera"),Oe=xt("Trident")||xt("MSIE"),zp=xt("Edge"),iI=zp||Oe,Wp=xt("Gecko")&&!(lt(Mr.toLowerCase(),"webkit")&&!xt("Edge"))&&!(xt("Trident")||xt("MSIE"))&&!xt("Edge"),oI=lt(Mr.toLowerCase(),"webkit")&&!xt("Edge");function $p(){var n=f.document;return n?n.documentMode:void 0}var Ts;t:{var Xa="",Ya=function(){var n=Mr;if(Wp)return/rv:([^\);]+)(\)|;)/.exec(n);if(zp)return/Edge\/([\d\.]+)/.exec(n);if(Oe)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(oI)return/WebKit\/(\S+)/.exec(n);if(rI)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(Ya&&(Xa=Ya?Ya[1]:""),Oe){var Ja=$p();if(Ja!=null&&Ja>parseFloat(Xa)){Ts=String(Ja);break t}}Ts=Xa}var sI={};function Qp(n){return nI(n,function(){for(var o=0,a=Dp(String(Ts)).split("."),h=Dp(String(n)).split("."),p=Math.max(a.length,h.length),d=0;o==0&&d<p;d++){var g=a[d]||"",b=h[d]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],b=/(\d*)(\D*)(.*)/.exec(b)||["","","",""],g[0].length==0&&b[0].length==0)break;o=Ha(g[1].length==0?0:parseInt(g[1],10),b[1].length==0?0:parseInt(b[1],10))||Ha(g[2].length==0,b[2].length==0)||Ha(g[2],b[2]),g=g[3],b=b[3]}while(o==0)}return 0<=o})}var Za;if(f.document&&Oe){var Xp=$p();Za=Xp||parseInt(Ts,10)||void 0}else Za=void 0;var yn=Za;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var uI=!Oe||9<=Number(yn);function Hi(n){var o=document;return typeof n=="string"?o.getElementById(n):n}function Yp(n,o){Op(o,function(a,h){a&&typeof a=="object"&&a.ta&&(a=a.sa()),h=="style"?n.style.cssText=a:h=="class"?n.className=a:h=="for"?n.htmlFor=a:Jp.hasOwnProperty(h)?n.setAttribute(Jp[h],a):h.lastIndexOf("aria-",0)==0||h.lastIndexOf("data-",0)==0?n.setAttribute(h,a):n[h]=a})}var Jp={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function aI(n,o,a){var h=arguments,p=document,d=String(h[0]),g=h[1];if(!uI&&g&&(g.name||g.type)){if(d=["<",d],g.name&&d.push(' name="',$a(g.name),'"'),g.type){d.push(' type="',$a(g.type),'"');var b={};se(b,g),delete b.type,g=b}d.push(">"),d=d.join("")}return d=Ss(p,d),g&&(typeof g=="string"?d.className=g:Array.isArray(g)?d.className=g.join(" "):Yp(d,g)),2<h.length&&cI(p,d,h),d}function cI(n,o,a){function h(b){b&&o.appendChild(typeof b=="string"?n.createTextNode(b):b)}for(var p=2;p<a.length;p++){var d=a[p];if(!E(d)||N(d)&&0<d.nodeType)h(d);else{t:{if(d&&typeof d.length=="number"){if(N(d)){var g=typeof d.item=="function"||typeof d.item=="string";break t}if(S(d)){g=typeof d.item=="function";break t}}g=!1}yt(g?Kn(d):d,h)}}}function Ss(n,o){return o=String(o),n.contentType==="application/xhtml+xml"&&(o=o.toLowerCase()),n.createElement(o)}function Zp(n){f.setTimeout(function(){throw n},0)}var tc;function hI(){var n=f.MessageChannel;if(typeof n>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!xt("Presto")&&(n=function(){var p=Ss(document,"IFRAME");p.style.display="none",document.documentElement.appendChild(p);var d=p.contentWindow;p=d.document,p.open(),p.close();var g="callImmediate"+Math.random(),b=d.location.protocol=="file:"?"*":d.location.protocol+"//"+d.location.host;p=L(function(A){(b=="*"||A.origin==b)&&A.data==g&&this.port1.onmessage()},this),d.addEventListener("message",p,!1),this.port1={},this.port2={postMessage:function(){d.postMessage(g,b)}}}),typeof n<"u"&&!xt("Trident")&&!xt("MSIE")){var o=new n,a={},h=a;return o.port1.onmessage=function(){if(a.next!==void 0){a=a.next;var p=a.Hb;a.Hb=null,p()}},function(p){h.next={Hb:p},h=h.next,o.port2.postMessage(0)}}return function(p){f.setTimeout(p,0)}}function _s(n,o){As||lI(),ec||(As(),ec=!0),td.add(n,o)}var As;function lI(){if(f.Promise&&f.Promise.resolve){var n=f.Promise.resolve(void 0);As=function(){n.then(ed)}}else As=function(){var o=ed;!S(f.setImmediate)||f.Window&&f.Window.prototype&&!xt("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(tc||(tc=hI()),tc(o)):f.setImmediate(o)}}var ec=!1,td=new Ap;function ed(){for(var n;n=Fb();){try{n.a.call(n.b)}catch(o){Zp(o)}_p(Np,n)}ec=!1}function tt(n,o){if(this.a=Hn,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,n!=w)try{var a=this;n.call(o,function(h){zn(a,zi,h)},function(h){if(!(h instanceof Ur))try{throw h instanceof Error?h:Error("Promise rejected.")}catch{}zn(a,on,h)})}catch(h){zn(this,on,h)}}var Hn=0,zi=2,on=3;function nd(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}nd.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var rd=new Ba(function(){return new nd},function(n){n.reset()});function nc(n,o,a){var h=rd.get();return h.g=n,h.b=o,h.f=a,h}function G(n){if(n instanceof tt)return n;var o=new tt(w);return zn(o,zi,n),o}function vt(n){return new tt(function(o,a){a(n)})}function id(n,o,a){ad(n,o,a,null)||_s(dt(o,n))}function fI(n){return new tt(function(o,a){var h=n.length,p=[];if(h)for(var d=function(D,W){h--,p[D]=W,h==0&&o(p)},g=function(D){a(D)},b=0,A;b<n.length;b++)A=n[b],id(A,dt(d,b),g);else o(p)})}function od(n){return new tt(function(o){var a=n.length,h=[];if(a)for(var p=function(b,A,D){a--,h[b]=A?{Qb:!0,value:D}:{Qb:!1,reason:D},a==0&&o(h)},d=0,g;d<n.length;d++)g=n[d],id(g,dt(p,d,!0),dt(p,d,!1));else o(h)})}tt.prototype.then=function(n,o,a){return ud(this,S(n)?n:null,S(o)?o:null,a)},tt.prototype.$goog_Thenable=!0,t=tt.prototype,t.oa=function(n,o){return n=nc(n,n,o),n.c=!0,rc(this,n),this},t.o=function(n,o){return ud(this,null,n,o)},t.cancel=function(n){if(this.a==Hn){var o=new Ur(n);_s(function(){sd(this,o)},this)}};function sd(n,o){if(n.a==Hn)if(n.c){var a=n.c;if(a.b){for(var h=0,p=null,d=null,g=a.b;g&&(g.c||(h++,g.a==n&&(p=g),!(p&&1<h)));g=g.next)p||(d=g);p&&(a.a==Hn&&h==1?sd(a,o):(d?(h=d,h.next==a.f&&(a.f=h),h.next=h.next.next):hd(a),ld(a,p,on,o)))}n.c=null}else zn(n,on,o)}function rc(n,o){n.b||n.a!=zi&&n.a!=on||cd(n),n.f?n.f.next=o:n.b=o,n.f=o}function ud(n,o,a,h){var p=nc(null,null,null);return p.a=new tt(function(d,g){p.g=o?function(b){try{var A=o.call(h,b);d(A)}catch(D){g(D)}}:d,p.b=a?function(b){try{var A=a.call(h,b);A===void 0&&b instanceof Ur?g(b):d(A)}catch(D){g(D)}}:g}),p.a.c=n,rc(n,p),p.a}t.$c=function(n){this.a=Hn,zn(this,zi,n)},t.ad=function(n){this.a=Hn,zn(this,on,n)};function zn(n,o,a){n.a==Hn&&(n===a&&(o=on,a=new TypeError("Promise cannot resolve to itself")),n.a=1,ad(a,n.$c,n.ad,n)||(n.i=a,n.a=o,n.c=null,cd(n),o!=on||a instanceof Ur||dI(n,a)))}function ad(n,o,a,h){if(n instanceof tt)return rc(n,nc(o||w,a||null,h)),!0;if(Sp(n))return n.then(o,a,h),!0;if(N(n))try{var p=n.then;if(S(p))return pI(n,p,o,a,h),!0}catch(d){return a.call(h,d),!0}return!1}function pI(n,o,a,h,p){function d(A){b||(b=!0,h.call(p,A))}function g(A){b||(b=!0,a.call(p,A))}var b=!1;try{o.call(n,g,d)}catch(A){d(A)}}function cd(n){n.h||(n.h=!0,_s(n.gc,n))}function hd(n){var o=null;return n.b&&(o=n.b,n.b=o.next,o.next=null),n.b||(n.f=null),o}t.gc=function(){for(var n;n=hd(this);)ld(this,n,this.a,this.i);this.h=!1};function ld(n,o,a,h){if(a==on&&o.b&&!o.c)for(;n&&n.g;n=n.c)n.g=!1;if(o.a)o.a.c=null,fd(o,a,h);else try{o.c?o.g.call(o.f):fd(o,a,h)}catch(p){pd.call(null,p)}_p(rd,o)}function fd(n,o,a){o==zi?n.g.call(n.f,a):n.b&&n.b.call(n.f,a)}function dI(n,o){n.g=!0,_s(function(){n.g&&pd.call(null,o)})}var pd=Zp;function Ur(n){ge.call(this,n)}$(Ur,ge),Ur.prototype.name="cancel";function Ns(){this.ya=this.ya,this.pa=this.pa}var vI=0;Ns.prototype.ya=!1;function dd(n){!n.ya&&(n.ya=!0,n.Da(),vI!=0)&&x(n)}Ns.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var gI=Object.freeze||function(n){return n},vd=!Oe||9<=Number(yn),mI=Oe&&!Qp("9"),yI=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var n=!1,o=Object.defineProperty({},"passive",{get:function(){n=!0}});try{f.addEventListener("test",w,o),f.removeEventListener("test",w,o)}catch{}return n}();function ae(n,o){this.type=n,this.b=this.target=o,this.defaultPrevented=!1}ae.prototype.preventDefault=function(){this.defaultPrevented=!0};function Wn(n,o){if(ae.call(this,n?n.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,n){var a=this.type=n.type,h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.b=o,o=n.relatedTarget){if(Wp){t:{try{Qa(o.nodeName);var p=!0;break t}catch{}p=!1}p||(o=null)}}else a=="mouseover"?o=n.fromElement:a=="mouseout"&&(o=n.toElement);this.relatedTarget=o,h?(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:wI[n.pointerType]||"",this.a=n,n.defaultPrevented&&this.preventDefault()}}$(Wn,ae);var wI=gI({2:"touch",3:"pen",4:"mouse"});Wn.prototype.preventDefault=function(){Wn.bb.preventDefault.call(this);var n=this.a;if(n.preventDefault)n.preventDefault();else if(n.returnValue=!1,mI)try{(n.ctrlKey||112<=n.keyCode&&123>=n.keyCode)&&(n.keyCode=-1)}catch{}},Wn.prototype.g=function(){return this.a};var Wi="closure_listenable_"+(1e6*Math.random()|0),bI=0;function II(n,o,a,h,p){this.listener=n,this.proxy=null,this.src=o,this.type=a,this.capture=!!h,this.Wa=p,this.key=++bI,this.wa=this.Qa=!1}function ks(n){n.wa=!0,n.listener=null,n.proxy=null,n.src=null,n.Wa=null}function Ds(n){this.src=n,this.a={},this.b=0}Ds.prototype.add=function(n,o,a,h,p){var d=n.toString();n=this.a[d],n||(n=this.a[d]=[],this.b++);var g=oc(n,o,h,p);return-1<g?(o=n[g],a||(o.Qa=!1)):(o=new II(o,this.src,d,!!h,p),o.Qa=a,n.push(o)),o};function ic(n,o){var a=o.type;a in n.a&&ws(n.a[a],o)&&(ks(o),n.a[a].length==0&&(delete n.a[a],n.b--))}function oc(n,o,a,h){for(var p=0;p<n.length;++p){var d=n[p];if(!d.wa&&d.listener==o&&d.capture==!!a&&d.Wa==h)return p}return-1}var sc="closure_lm_"+(1e6*Math.random()|0),uc={};function Ne(n,o,a,h,p){if(h&&h.once)ac(n,o,a,h,p);else if(Array.isArray(o))for(var d=0;d<o.length;d++)Ne(n,o[d],a,h,p);else a=hc(a),n&&n[Wi]?Id(n,o,a,N(h)?!!h.capture:!!h,p):gd(n,o,a,!1,h,p)}function gd(n,o,a,h,p,d){if(!o)throw Error("Invalid event type");var g=N(p)?!!p.capture:!!p,b=Cs(n);if(b||(n[sc]=b=new Ds(n)),a=b.add(o,a,h,g,d),!a.proxy)if(h=EI(),a.proxy=h,h.src=n,h.listener=a,n.addEventListener)yI||(p=g),p===void 0&&(p=!1),n.addEventListener(o.toString(),h,p);else if(n.attachEvent)n.attachEvent(yd(o.toString()),h);else if(n.addListener&&n.removeListener)n.addListener(h);else throw Error("addEventListener and attachEvent are unavailable.")}function EI(){var n=TI,o=vd?function(a){return n.call(o.src,o.listener,a)}:function(a){if(a=n.call(o.src,o.listener,a),!a)return a};return o}function ac(n,o,a,h,p){if(Array.isArray(o))for(var d=0;d<o.length;d++)ac(n,o[d],a,h,p);else a=hc(a),n&&n[Wi]?lc(n,o,a,N(h)?!!h.capture:!!h,p):gd(n,o,a,!0,h,p)}function me(n,o,a,h,p){if(Array.isArray(o))for(var d=0;d<o.length;d++)me(n,o[d],a,h,p);else h=N(h)?!!h.capture:!!h,a=hc(a),n&&n[Wi]?(n=n.v,o=String(o).toString(),o in n.a&&(d=n.a[o],a=oc(d,a,h,p),-1<a&&(ks(d[a]),Array.prototype.splice.call(d,a,1),d.length==0&&(delete n.a[o],n.b--)))):n&&(n=Cs(n))&&(o=n.a[o.toString()],n=-1,o&&(n=oc(o,a,h,p)),(a=-1<n?o[n]:null)&&md(a))}function md(n){if(typeof n!="number"&&n&&!n.wa){var o=n.src;if(o&&o[Wi])ic(o.v,n);else{var a=n.type,h=n.proxy;o.removeEventListener?o.removeEventListener(a,h,n.capture):o.detachEvent?o.detachEvent(yd(a),h):o.addListener&&o.removeListener&&o.removeListener(h),(a=Cs(o))?(ic(a,n),a.b==0&&(a.src=null,o[sc]=null)):ks(n)}}}function yd(n){return n in uc?uc[n]:uc[n]="on"+n}function wd(n,o,a,h){var p=!0;if((n=Cs(n))&&(o=n.a[o.toString()]))for(o=o.concat(),n=0;n<o.length;n++){var d=o[n];d&&d.capture==a&&!d.wa&&(d=bd(d,h),p=p&&d!==!1)}return p}function bd(n,o){var a=n.listener,h=n.Wa||n.src;return n.Qa&&md(n),a.call(h,o)}function TI(n,o){if(n.wa)return!0;if(!vd){if(!o)t:{o=["window","event"];for(var a=f,h=0;h<o.length;h++)if(a=a[o[h]],a==null){o=null;break t}o=a}if(h=o,o=new Wn(h,this),a=!0,!(0>h.keyCode||h.returnValue!=null)){t:{var p=!1;if(h.keyCode==0)try{h.keyCode=-1;break t}catch{p=!0}(p||h.returnValue==null)&&(h.returnValue=!0)}for(h=[],p=o.b;p;p=p.parentNode)h.push(p);for(n=n.type,p=h.length-1;0<=p;p--){o.b=h[p];var d=wd(h[p],n,!0,o);a=a&&d}for(p=0;p<h.length;p++)o.b=h[p],d=wd(h[p],n,!1,o),a=a&&d}return a}return bd(n,new Wn(o,this))}function Cs(n){return n=n[sc],n instanceof Ds?n:null}var cc="__closure_events_fn_"+(1e9*Math.random()>>>0);function hc(n){return S(n)?n:(n[cc]||(n[cc]=function(o){return n.handleEvent(o)}),n[cc])}function Zt(){Ns.call(this),this.v=new Ds(this),this.bc=this,this.hb=null}$(Zt,Ns),Zt.prototype[Wi]=!0,Zt.prototype.addEventListener=function(n,o,a,h){Ne(this,n,o,a,h)},Zt.prototype.removeEventListener=function(n,o,a,h){me(this,n,o,a,h)},Zt.prototype.dispatchEvent=function(n){var o,a=this.hb;if(a)for(o=[];a;a=a.hb)o.push(a);a=this.bc;var h=n.type||n;if(typeof n=="string")n=new ae(n,a);else if(n instanceof ae)n.target=n.target||a;else{var p=n;n=new ae(h,a),se(n,p)}if(p=!0,o)for(var d=o.length-1;0<=d;d--){var g=n.b=o[d];p=Rs(g,h,!0,n)&&p}if(g=n.b=a,p=Rs(g,h,!0,n)&&p,p=Rs(g,h,!1,n)&&p,o)for(d=0;d<o.length;d++)g=n.b=o[d],p=Rs(g,h,!1,n)&&p;return p},Zt.prototype.Da=function(){if(Zt.bb.Da.call(this),this.v){var n=this.v,o;for(o in n.a){for(var a=n.a[o],h=0;h<a.length;h++)ks(a[h]);delete n.a[o],n.b--}}this.hb=null};function Id(n,o,a,h,p){n.v.add(String(o),a,!1,h,p)}function lc(n,o,a,h,p){n.v.add(String(o),a,!0,h,p)}function Rs(n,o,a,h){if(o=n.v.a[String(o)],!o)return!0;o=o.concat();for(var p=!0,d=0;d<o.length;++d){var g=o[d];if(g&&!g.wa&&g.capture==a){var b=g.listener,A=g.Wa||g.src;g.Qa&&ic(n.v,g),p=b.call(A,h)!==!1&&p}}return p&&!h.defaultPrevented}function fc(n,o,a){if(S(n))a&&(n=L(n,a));else if(n&&typeof n.handleEvent=="function")n=L(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(o)?-1:f.setTimeout(n,o||0)}function jr(n){var o=null;return new tt(function(a,h){o=fc(function(){a(void 0)},n),o==-1&&h(Error("Failed to schedule timer."))}).o(function(a){throw f.clearTimeout(o),a})}function Ed(n){if(n.X&&typeof n.X=="function")return n.X();if(typeof n=="string")return n.split("");if(E(n)){for(var o=[],a=n.length,h=0;h<a;h++)o.push(n[h]);return o}o=[],a=0;for(h in n)o[a++]=n[h];return o}function Td(n){if(n.Y&&typeof n.Y=="function")return n.Y();if(!n.X||typeof n.X!="function"){if(E(n)||typeof n=="string"){var o=[];n=n.length;for(var a=0;a<n;a++)o.push(a);return o}o=[],a=0;for(var h in n)o[a++]=h;return o}}function SI(n,o){if(n.forEach&&typeof n.forEach=="function")n.forEach(o,void 0);else if(E(n)||typeof n=="string")yt(n,o,void 0);else for(var a=Td(n),h=Ed(n),p=h.length,d=0;d<p;d++)o.call(void 0,h[d],a&&a[d],n)}function qr(n,o){this.b={},this.a=[],this.c=0;var a=arguments.length;if(1<a){if(a%2)throw Error("Uneven number of arguments");for(var h=0;h<a;h+=2)this.set(arguments[h],arguments[h+1])}else if(n)if(n instanceof qr)for(a=n.Y(),h=0;h<a.length;h++)this.set(a[h],n.get(a[h]));else for(h in n)this.set(h,n[h])}t=qr.prototype,t.X=function(){pc(this);for(var n=[],o=0;o<this.a.length;o++)n.push(this.b[this.a[o]]);return n},t.Y=function(){return pc(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0};function pc(n){if(n.c!=n.a.length){for(var o=0,a=0;o<n.a.length;){var h=n.a[o];$n(n.b,h)&&(n.a[a++]=h),o++}n.a.length=a}if(n.c!=n.a.length){var p={};for(a=o=0;o<n.a.length;)h=n.a[o],$n(p,h)||(n.a[a++]=h,p[h]=1),o++;n.a.length=a}}t.get=function(n,o){return $n(this.b,n)?this.b[n]:o},t.set=function(n,o){$n(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=o},t.forEach=function(n,o){for(var a=this.Y(),h=0;h<a.length;h++){var p=a[h],d=this.get(p);n.call(o,d,p,this)}};function $n(n,o){return Object.prototype.hasOwnProperty.call(n,o)}var Sd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _I(n,o){if(n){n=n.split("&");for(var a=0;a<n.length;a++){var h=n[a].indexOf("="),p=null;if(0<=h){var d=n[a].substring(0,h);p=n[a].substring(h+1)}else d=n[a];o(d,p?decodeURIComponent(p.replace(/\+/g," ")):"")}}}function wn(n,o){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var a;n instanceof wn?(this.i=o!==void 0?o:n.i,$i(this,n.c),this.l=n.l,this.a=n.a,Qi(this,n.g),this.f=n.f,dc(this,kd(n.b)),this.h=n.h):n&&(a=String(n).match(Sd))?(this.i=!!o,$i(this,a[1]||"",!0),this.l=Xi(a[2]||""),this.a=Xi(a[3]||"",!0),Qi(this,a[4]),this.f=Xi(a[5]||"",!0),dc(this,a[6]||"",!0),this.h=Xi(a[7]||"")):(this.i=!!o,this.b=new Qn(null,this.i))}wn.prototype.toString=function(){var n=[],o=this.c;o&&n.push(Yi(o,_d,!0),":");var a=this.a;return(a||o=="file")&&(n.push("//"),(o=this.l)&&n.push(Yi(o,_d,!0),"@"),n.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.g,a!=null&&n.push(":",String(a))),(a=this.f)&&(this.a&&a.charAt(0)!="/"&&n.push("/"),n.push(Yi(a,a.charAt(0)=="/"?kI:NI,!0))),(a=this.b.toString())&&n.push("?",a),(a=this.h)&&n.push("#",Yi(a,CI)),n.join("")},wn.prototype.resolve=function(n){var o=new wn(this),a=!!n.c;a?$i(o,n.c):a=!!n.l,a?o.l=n.l:a=!!n.a,a?o.a=n.a:a=n.g!=null;var h=n.f;if(a)Qi(o,n.g);else if(a=!!n.f){if(h.charAt(0)!="/")if(this.a&&!this.f)h="/"+h;else{var p=o.f.lastIndexOf("/");p!=-1&&(h=o.f.substr(0,p+1)+h)}if(p=h,p==".."||p==".")h="";else if(lt(p,"./")||lt(p,"/.")){h=p.lastIndexOf("/",0)==0,p=p.split("/");for(var d=[],g=0;g<p.length;){var b=p[g++];b=="."?h&&g==p.length&&d.push(""):b==".."?((1<d.length||d.length==1&&d[0]!="")&&d.pop(),h&&g==p.length&&d.push("")):(d.push(b),h=!0)}h=d.join("/")}else h=p}return a?o.f=h:a=n.b.toString()!=="",a?dc(o,kd(n.b)):a=!!n.h,a&&(o.h=n.h),o};function $i(n,o,a){n.c=a?Xi(o,!0):o,n.c&&(n.c=n.c.replace(/:$/,""))}function Qi(n,o){if(o){if(o=Number(o),isNaN(o)||0>o)throw Error("Bad port number "+o);n.g=o}else n.g=null}function dc(n,o,a){o instanceof Qn?(n.b=o,RI(n.b,n.i)):(a||(o=Yi(o,DI)),n.b=new Qn(o,n.i))}function St(n,o,a){n.b.set(o,a)}function ke(n,o){return n.b.get(o)}function ce(n){return n instanceof wn?new wn(n):new wn(n,void 0)}function Os(n,o,a,h){var p=new wn(null,void 0);return n&&$i(p,n),o&&(p.a=o),a&&Qi(p,a),h&&(p.f=h),p}function Xi(n,o){return n?o?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yi(n,o,a){return typeof n=="string"?(n=encodeURI(n).replace(o,AI),a&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function AI(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var _d=/[#\/\?@]/g,NI=/[#\?:]/g,kI=/[#\?]/g,DI=/[#\?@]/g,CI=/#/g;function Qn(n,o){this.b=this.a=null,this.c=n||null,this.f=!!o}function bn(n){n.a||(n.a=new qr,n.b=0,n.c&&_I(n.c,function(o,a){n.add(decodeURIComponent(o.replace(/\+/g," ")),a)}))}function Ad(n){var o=Td(n);if(typeof o>"u")throw Error("Keys are undefined");var a=new Qn(null,void 0);n=Ed(n);for(var h=0;h<o.length;h++){var p=o[h],d=n[h];Array.isArray(d)?Nd(a,p,d):a.add(p,d)}return a}t=Qn.prototype,t.add=function(n,o){bn(this),this.c=null,n=Br(this,n);var a=this.a.get(n);return a||this.a.set(n,a=[]),a.push(o),this.b+=1,this};function Ge(n,o){bn(n),o=Br(n,o),$n(n.a.b,o)&&(n.c=null,n.b-=n.a.get(o).length,n=n.a,$n(n.b,o)&&(delete n.b[o],n.c--,n.a.length>2*n.c&&pc(n)))}t.clear=function(){this.a=this.c=null,this.b=0};function vc(n,o){return bn(n),o=Br(n,o),$n(n.a.b,o)}t.forEach=function(n,o){bn(this),this.a.forEach(function(a,h){yt(a,function(p){n.call(o,p,h,this)},this)},this)},t.Y=function(){bn(this);for(var n=this.a.X(),o=this.a.Y(),a=[],h=0;h<o.length;h++)for(var p=n[h],d=0;d<p.length;d++)a.push(o[h]);return a},t.X=function(n){bn(this);var o=[];if(typeof n=="string")vc(this,n)&&(o=Ga(o,this.a.get(Br(this,n))));else{n=this.a.X();for(var a=0;a<n.length;a++)o=Ga(o,n[a])}return o},t.set=function(n,o){return bn(this),this.c=null,n=Br(this,n),vc(this,n)&&(this.b-=this.a.get(n).length),this.a.set(n,[o]),this.b+=1,this},t.get=function(n,o){return n?(n=this.X(n),0<n.length?String(n[0]):o):o};function Nd(n,o,a){Ge(n,o),0<a.length&&(n.c=null,n.a.set(Br(n,o),Kn(a)),n.b+=a.length)}t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var n=[],o=this.a.Y(),a=0;a<o.length;a++){var h=o[a],p=encodeURIComponent(String(h));h=this.X(h);for(var d=0;d<h.length;d++){var g=p;h[d]!==""&&(g+="="+encodeURIComponent(String(h[d]))),n.push(g)}}return this.c=n.join("&")};function kd(n){var o=new Qn;return o.c=n.c,n.a&&(o.a=new qr(n.a),o.b=n.b),o}function Br(n,o){return o=String(o),n.f&&(o=o.toLowerCase()),o}function RI(n,o){o&&!n.f&&(bn(n),n.c=null,n.a.forEach(function(a,h){var p=h.toLowerCase();h!=p&&(Ge(this,h),Nd(this,p,a))},n)),n.f=o}function Dd(n){var o=[];return gc(new OI,n,o),o.join("")}function OI(){}function gc(n,o,a){if(o==null)a.push("null");else{if(typeof o=="object"){if(Array.isArray(o)){var h=o;o=h.length,a.push("[");for(var p="",d=0;d<o;d++)a.push(p),gc(n,h[d],a),p=",";a.push("]");return}if(o instanceof String||o instanceof Number||o instanceof Boolean)o=o.valueOf();else{a.push("{"),p="";for(h in o)Object.prototype.hasOwnProperty.call(o,h)&&(d=o[h],typeof d!="function"&&(a.push(p),Rd(h,a),a.push(":"),gc(n,d,a),p=","));a.push("}");return}}switch(typeof o){case"string":Rd(o,a);break;case"number":a.push(isFinite(o)&&!isNaN(o)?String(o):"null");break;case"boolean":a.push(String(o));break;case"function":a.push("null");break;default:throw Error("Unknown type: "+typeof o)}}}var Cd={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},xI=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Rd(n,o){o.push('"',n.replace(xI,function(a){var h=Cd[a];return h||(h="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Cd[a]=h),h}),'"')}function mc(){var n=jt();return Oe&&!!yn&&yn==11||/Edge\/\d+/.test(n)}function Ji(){return f.window&&f.window.location.href||self&&self.location&&self.location.href||""}function Od(n,o){o=o||f.window;var a="about:blank";n&&(a=Es(jp(n)||Bp)),o.location.href=a}function xd(n,o){var a=[],h;for(h in n)h in o?typeof n[h]!=typeof o[h]?a.push(h):typeof n[h]=="object"&&n[h]!=null&&o[h]!=null?0<xd(n[h],o[h]).length&&a.push(h):n[h]!==o[h]&&a.push(h):a.push(h);for(h in o)h in n||a.push(h);return a}function PI(){var n=jt();return n=Kr(n)!=Fd?null:(n=n.match(/\sChrome\/(\d+)/i))&&n.length==2?parseInt(n[1],10):null,n&&30>n?!1:!Oe||!yn||9<yn}function Pd(n){return n=(n||jt()).toLowerCase(),!!(n.match(/android/)||n.match(/webos/)||n.match(/iphone|ipad|ipod/)||n.match(/blackberry/)||n.match(/windows phone/)||n.match(/iemobile/))}function Xn(n){n=n||f.window;try{n.close()}catch{}}function Ld(n,o,a){var h=Math.floor(1e9*Math.random()).toString();o=o||500,a=a||600;var p=(window.screen.availHeight-a)/2,d=(window.screen.availWidth-o)/2;o={width:o,height:a,top:0<p?p:0,left:0<d?d:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},a=jt().toLowerCase(),h&&(o.target=h,lt(a,"crios/")&&(o.target="_blank")),Kr(jt())==bc&&(n=n||"http://localhost",o.scrollbars=!0),a=n||"",(n=o)||(n={}),h=window,o=a instanceof ue?a:jp(typeof a.href<"u"?a.href:String(a))||Bp,a=n.target||a.target,p=[];for(g in n)switch(g){case"width":case"height":case"top":case"left":p.push(g+"="+n[g]);break;case"target":case"noopener":case"noreferrer":break;default:p.push(g+"="+(n[g]?1:0))}var g=p.join(",");if((xt("iPhone")&&!xt("iPod")&&!xt("iPad")||xt("iPad")||xt("iPod"))&&h.navigator&&h.navigator.standalone&&a&&a!="_self"?(g=Ss(document,"A"),Pp(g,"HTMLAnchorElement"),o=o instanceof ue?o:qp(o),g.href=Es(o),g.setAttribute("target",a),n.noreferrer&&g.setAttribute("rel","noreferrer"),n=document.createEvent("MouseEvent"),n.initMouseEvent("click",!0,!0,h,1),g.dispatchEvent(n),g={}):n.noreferrer?(g=Gp("",h,a,g),n=Es(o),g&&(iI&&lt(n,";")&&(n="'"+n.replace(/'/g,"%27")+"'"),g.opener=null,n='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+$a(n)+'">',n=(h=Mp())?h.createHTML(n):n,n=new Vr(n,null,Kp),h=g.document)&&(h.write(tI(n)),h.close())):(g=Gp(o,h,a,g))&&n.noopener&&(g.opener=null),g)try{g.focus()}catch{}return g}function LI(n){return new tt(function(o){function a(){jr(2e3).then(function(){if(!n||n.closed)o();else return a()})}return a()})}var MI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FI=/^[^@]+@[^@]+$/;function xs(){var n=null;return new tt(function(o){f.document.readyState=="complete"?o():(n=function(){o()},ac(window,"load",n))}).o(function(o){throw me(window,"load",n),o})}function VI(){return yc(void 0)?xs().then(function(){return new tt(function(n,o){var a=f.document,h=setTimeout(function(){o(Error("Cordova framework is not ready."))},1e3);a.addEventListener("deviceready",function(){clearTimeout(h),n()},!1)})}):vt(Error("Cordova must run in an Android or iOS file scheme."))}function yc(n){return n=n||jt(),!(Hr()!=="file:"&&Hr()!=="ionic:"||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function wc(){var n=f.window;try{return!(!n||n==n.top)}catch{return!1}}function xe(){return typeof f.WorkerGlobalScope<"u"&&typeof f.importScripts=="function"}function He(){return Y.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Y.INTERNAL.hasOwnProperty("node")?"Node":xe()?"Worker":"Browser"}function Md(){var n=He();return n==="ReactNative"||n==="Node"}function UI(){for(var n=50,o=[];0<n;)o.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return o.join("")}var bc="Firefox",Fd="Chrome";function Kr(n){var o=n.toLowerCase();if(lt(o,"opera/")||lt(o,"opr/")||lt(o,"opios/"))return"Opera";if(lt(o,"iemobile"))return"IEMobile";if(lt(o,"msie")||lt(o,"trident/"))return"IE";if(lt(o,"edge/"))return"Edge";if(lt(o,"firefox/"))return bc;if(lt(o,"silk/"))return"Silk";if(lt(o,"blackberry"))return"Blackberry";if(lt(o,"webos"))return"Webos";if(!lt(o,"safari/")||lt(o,"chrome/")||lt(o,"crios/")||lt(o,"android"))if(!lt(o,"chrome/")&&!lt(o,"crios/")||lt(o,"edge/")){if(lt(o,"android"))return"Android";if((n=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&n.length==2)return n[1]}else return Fd;else return"Safari";return"Other"}var Vd={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Gr(n,o){o=o||[];var a=[],h={},p;for(p in Vd)h[Vd[p]]=!0;for(p=0;p<o.length;p++)typeof h[o[p]]<"u"&&(delete h[o[p]],a.push(o[p]));return a.sort(),o=a,o.length||(o=["FirebaseCore-web"]),a=He(),a==="Browser"?(h=jt(),a=Kr(h)):a==="Worker"&&(h=jt(),a=Kr(h)+"-"+a),a+"/JsCore/"+n+"/"+o.join(",")}function jt(){return f.navigator&&f.navigator.userAgent||""}function gt(n,o){n=n.split("."),o=o||f;for(var a=0;a<n.length&&typeof o=="object"&&o!=null;a++)o=o[n[a]];return a!=n.length&&(o=void 0),o}function Ic(){try{var n=f.localStorage,o=Jn();if(n)return n.setItem(o,"1"),n.removeItem(o),mc()?!!f.indexedDB:!0}catch{return xe()&&!!f.indexedDB}return!1}function Yn(){return(Ps()||Hr()==="chrome-extension:"||yc())&&!Md()&&Ic()&&!xe()}function Ps(){return Hr()==="http:"||Hr()==="https:"}function Hr(){return f.location&&f.location.protocol||null}function Zi(n){return n=n||jt(),!(Pd(n)||Kr(n)==bc)}function to(n){return typeof n>"u"?null:Dd(n)}function Ud(n){var o={},a;for(a in n)n.hasOwnProperty(a)&&n[a]!==null&&n[a]!==void 0&&(o[a]=n[a]);return o}function zr(n){if(n!==null)return JSON.parse(n)}function Jn(n){return n||Math.floor(1e9*Math.random()).toString()}function jd(n){return n=n||jt(),!(Kr(n)=="Safari"||n.toLowerCase().match(/iphone|ipad|ipod/))}function qd(){var n=f.___jsl;if(n&&n.H){for(var o in n.H)if(n.H[o].r=n.H[o].r||[],n.H[o].L=n.H[o].L||[],n.H[o].r=n.H[o].L.concat(),n.CP)for(var a=0;a<n.CP.length;a++)n.CP[a]=null}}function In(n,o){if(n>o)throw Error("Short delay should be less than long delay!");this.a=n,this.c=o,n=jt(),o=He(),this.b=Pd(n)||o==="ReactNative"}In.prototype.get=function(){var n=f.navigator;return!(n&&typeof n.onLine=="boolean"&&(Ps()||Hr()==="chrome-extension:"||typeof n.connection<"u"))||n.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function Ec(){var n=f.document;return n&&typeof n.visibilityState<"u"?n.visibilityState=="visible":!0}function jI(){var n=f.document,o=null;return Ec()||!n?G():new tt(function(a){o=function(){Ec()&&(n.removeEventListener("visibilitychange",o,!1),a())},n.addEventListener("visibilitychange",o,!1)}).o(function(a){throw n.removeEventListener("visibilitychange",o,!1),a})}function eo(n){try{var o=new Date(parseInt(n,10));if(!isNaN(o.getTime())&&!/[^0-9]/.test(n))return o.toUTCString()}catch{}return null}function Bd(){return!(!gt("fireauth.oauthhelper",f)&&!gt("fireauth.iframe",f))}function qI(){var n=f.navigator;return n&&n.serviceWorker&&n.serviceWorker.controller||null}function BI(){var n=f.navigator;return n&&n.serviceWorker?G().then(function(){return n.serviceWorker.ready}).then(function(o){return o.active||null}).o(function(){return null}):G(null)}var Kd={};function Tc(n){Kd[n]||(Kd[n]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(n))}var Sc;try{var _c={};Object.defineProperty(_c,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(_c,"abcd",{configurable:!0,enumerable:!0,value:2}),Sc=_c.abcd==2}catch{Sc=!1}function q(n,o,a){Sc?Object.defineProperty(n,o,{configurable:!0,enumerable:!0,value:a}):n[o]=a}function te(n,o){if(o)for(var a in o)o.hasOwnProperty(a)&&q(n,a,o[a])}function ze(n){var o={};return te(o,n),o}function KI(n){var o={},a;for(a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}function GI(n,o){if(!o||!o.length)return!0;if(!n)return!1;for(var a=0;a<o.length;a++){var h=n[o[a]];if(h==null||h==="")return!1}return!0}function Ac(n){var o=n;if(typeof n=="object"&&n!=null){o="length"in n?[]:{};for(var a in n)q(o,a,Ac(n[a]))}return o}function Nc(n){var o=n&&(n[Rc]?"phone":null);if(o&&n&&n[Cc]){q(this,"uid",n[Cc]),q(this,"displayName",n[Gd]||null);var a=null;n[Dc]&&(a=new Date(n[Dc]).toUTCString()),q(this,"enrollmentTime",a),q(this,"factorId",o)}else throw new T("internal-error","Internal assert: invalid MultiFactorInfo object")}Nc.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function kc(n){try{var o=new no(n)}catch{o=null}return o}var Gd="displayName",Dc="enrolledAt",Cc="mfaEnrollmentId",Rc="phoneInfo";function no(n){Nc.call(this,n),q(this,"phoneNumber",n[Rc])}$(no,Nc),no.prototype.w=function(){var n=no.bb.w.call(this);return n.phoneNumber=this.phoneNumber,n};function HI(n){var o={},a=n[zI],h=n[$I],p=n[QI];if(n=kc(n[WI]),!p||p!=Ls&&p!=ro&&!a||p==ro&&!h||p==Oc&&!n)throw Error("Invalid checkActionCode response!");p==ro?(o[zd]=a||null,o[Wd]=a||null,o[Hd]=h):(o[zd]=h||null,o[Wd]=h||null,o[Hd]=a||null),o[XI]=n||null,q(this,JI,p),q(this,YI,Ac(o))}var Oc="REVERT_SECOND_FACTOR_ADDITION",Ls="EMAIL_SIGNIN",ro="VERIFY_AND_CHANGE_EMAIL",zI="email",WI="mfaInfo",$I="newEmail",QI="requestType",Hd="email",zd="fromEmail",XI="multiFactorInfo",Wd="previousEmail",YI="data",JI="operation";function xc(n){n=ce(n);var o=ke(n,$d)||null,a=ke(n,Qd)||null,h=ke(n,Xd)||null;if(h=h&&nE[h]||null,!o||!a||!h)throw new T("argument-error",$d+", "+Qd+"and "+Xd+" are required in a valid action code URL.");te(this,{apiKey:o,operation:h,code:a,continueUrl:ke(n,ZI)||null,languageCode:ke(n,tE)||null,tenantId:ke(n,eE)||null})}var $d="apiKey",Qd="oobCode",ZI="continueUrl",tE="languageCode",Xd="mode",eE="tenantId",nE={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Oc,signIn:Ls,verifyAndChangeEmail:ro,verifyEmail:"VERIFY_EMAIL"};function Yd(n){try{return new xc(n)}catch{return null}}function Ms(n){var o=n[rE];if(typeof o>"u")throw new T("missing-continue-uri");if(typeof o!="string"||typeof o=="string"&&!o.length)throw new T("invalid-continue-uri");this.h=o,this.b=this.a=null,this.g=!1;var a=n[Jd];if(a&&typeof a=="object"){o=a[rv];var h=a[ev];if(a=a[nv],typeof o=="string"&&o.length){if(this.a=o,typeof h<"u"&&typeof h!="boolean")throw new T("argument-error",ev+" property must be a boolean when specified.");if(this.g=!!h,typeof a<"u"&&(typeof a!="string"||typeof a=="string"&&!a.length))throw new T("argument-error",nv+" property must be a non empty string when specified.");this.b=a||null}else{if(typeof o<"u")throw new T("argument-error",rv+" property must be a non empty string when specified.");if(typeof h<"u"||typeof a<"u")throw new T("missing-android-pkg-name")}}else if(typeof a<"u")throw new T("argument-error",Jd+" property must be a non null object when specified.");if(this.f=null,(o=n[tv])&&typeof o=="object"){if(o=o[iv],typeof o=="string"&&o.length)this.f=o;else if(typeof o<"u")throw new T("argument-error",iv+" property must be a non empty string when specified.")}else if(typeof o<"u")throw new T("argument-error",tv+" property must be a non null object when specified.");if(o=n[Pc],typeof o<"u"&&typeof o!="boolean")throw new T("argument-error",Pc+" property must be a boolean when specified.");if(this.c=!!o,n=n[Zd],typeof n<"u"&&(typeof n!="string"||typeof n=="string"&&!n.length))throw new T("argument-error",Zd+" property must be a non empty string when specified.");this.i=n||null}var Jd="android",Zd="dynamicLinkDomain",Pc="handleCodeInApp",tv="iOS",rE="url",ev="installApp",nv="minimumVersion",rv="packageName",iv="bundleId";function Fs(n){var o={};o.continueUrl=n.h,o.canHandleCodeInApp=n.c,(o.androidPackageName=n.a)&&(o.androidMinimumVersion=n.b,o.androidInstallApp=n.g),o.iOSBundleId=n.f,o.dynamicLinkDomain=n.i;for(var a in o)o[a]===null&&delete o[a];return o}function iE(n){return ys(n,function(o){return o=o.toString(16),1<o.length?o:"0"+o}).join("")}var io=null;function oE(n){var o=[];return sE(n,function(a){o.push(a)}),o}function sE(n,o){function a(A){for(;h<n.length;){var D=n.charAt(h++),W=io[D];if(W!=null)return W;if(!/^[\s\xa0]*$/.test(D))throw Error("Unknown base64 encoding at char: "+D)}return A}uE();for(var h=0;;){var p=a(-1),d=a(0),g=a(64),b=a(64);if(b===64&&p===-1)break;o(p<<2|d>>4),g!=64&&(o(d<<4&240|g>>2),b!=64&&o(g<<6&192|b))}}function uE(){if(!io){io={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),o=["+/=","+/","-_=","-_.","-_"],a=0;5>a;a++)for(var h=n.concat(o[a].split("")),p=0;p<h.length;p++){var d=h[p];io[d]===void 0&&(io[d]=p)}}}function Vs(n){var o=ov(n);if(!(o&&o.sub&&o.iss&&o.aud&&o.exp))throw Error("Invalid JWT");this.h=n,this.a=o.exp,this.i=o.sub,n=Date.now()/1e3,this.g=o.iat||(n>this.a?this.a:n),this.b=o.provider_id||o.firebase&&o.firebase.sign_in_provider||null,this.f=o.firebase&&o.firebase.tenant||null,this.c=!!o.is_anonymous||this.b=="anonymous"}Vs.prototype.T=function(){return this.f},Vs.prototype.l=function(){return this.c},Vs.prototype.toString=function(){return this.h};function Us(n){try{return new Vs(n)}catch{return null}}function ov(n){if(!n||(n=n.split("."),n.length!=3))return null;n=n[1];for(var o=(4-n.length%4)%4,a=0;a<o;a++)n+=".";try{var h=oE(n);for(n=[],a=o=0;o<h.length;){var p=h[o++];if(128>p)n[a++]=String.fromCharCode(p);else if(191<p&&224>p){var d=h[o++];n[a++]=String.fromCharCode((p&31)<<6|d&63)}else if(239<p&&365>p){d=h[o++];var g=h[o++],b=h[o++],A=((p&7)<<18|(d&63)<<12|(g&63)<<6|b&63)-65536;n[a++]=String.fromCharCode(55296+(A>>10)),n[a++]=String.fromCharCode(56320+(A&1023))}else d=h[o++],g=h[o++],n[a++]=String.fromCharCode((p&15)<<12|(d&63)<<6|g&63)}return JSON.parse(n.join(""))}catch{}return null}var sv="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),js=["client_id","response_type","scope","redirect_uri","state"],Lc={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:js},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:js},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:js},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:sv},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Mc(n){for(var o in Lc)if(Lc[o].fa==n)return Lc[o];return null}function uv(n){var o={};o["facebook.com"]=cv,o["google.com"]=lv,o["github.com"]=hv,o["twitter.com"]=fv;var a=n&&n[av];try{if(a)return o[a]?new o[a](n):new We(n);if(typeof n[Fc]<"u")return new Vc(n)}catch{}return null}var Fc="idToken",av="providerId";function Vc(n){var o=n[av];if(!o&&n[Fc]){var a=Us(n[Fc]);a&&a.b&&(o=a.b)}if(!o)throw Error("Invalid additional user info!");(o=="anonymous"||o=="custom")&&(o=null),a=!1,typeof n.isNewUser<"u"?a=!!n.isNewUser:n.kind==="identitytoolkit#SignupNewUserResponse"&&(a=!0),q(this,"providerId",o),q(this,"isNewUser",a)}function We(n){Vc.call(this,n),n=zr(n.rawUserInfo||"{}"),q(this,"profile",Ac(n||{}))}$(We,Vc);function cv(n){if(We.call(this,n),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}$(cv,We);function hv(n){if(We.call(this,n),this.providerId!="github.com")throw Error("Invalid provider ID!");q(this,"username",this.profile&&this.profile.login||null)}$(hv,We);function lv(n){if(We.call(this,n),this.providerId!="google.com")throw Error("Invalid provider ID!")}$(lv,We);function fv(n){if(We.call(this,n),this.providerId!="twitter.com")throw Error("Invalid provider ID!");q(this,"username",n.screenName||null)}$(fv,We);function pv(n){var o=ce(n),a=ke(o,"link"),h=ke(ce(a),"link");return o=ke(o,"deep_link_id"),ke(ce(o),"link")||o||h||a||n}function qs(n,o){if(!n&&!o)throw new T("internal-error","Internal assert: no raw session string available");if(n&&o)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=n||null,this.b=o||null,this.type=this.a?oo:Bs}var oo="enroll",Bs="signin";qs.prototype.Ha=function(){return this.a?G(this.a):G(this.b)},qs.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function Wr(){}Wr.prototype.ka=function(){},Wr.prototype.b=function(){},Wr.prototype.c=function(){},Wr.prototype.w=function(){};function $r(n,o){return n.then(function(a){if(a[Me]){var h=Us(a[Me]);if(!h||o!=h.i)throw new T("user-mismatch");return a}throw new T("user-mismatch")}).o(function(a){throw a&&a.code&&a.code==qi+"user-not-found"?new T("user-mismatch"):a})}function Zn(n,o){if(o)this.a=o;else throw new T("internal-error","failed to construct a credential");q(this,"providerId",n),q(this,"signInMethod",n)}Zn.prototype.ka=function(n){return ah(n,Uc(this))},Zn.prototype.b=function(n,o){var a=Uc(this);return a.idToken=o,ch(n,a)},Zn.prototype.c=function(n,o){return $r(hh(n,Uc(this)),o)};function Uc(n){return{pendingToken:n.a,requestUri:"http://localhost"}}Zn.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function aE(n){if(n&&n.providerId&&n.signInMethod&&n.providerId.indexOf("saml.")==0&&n.pendingToken)try{return new Zn(n.providerId,n.pendingToken)}catch{}return null}function sn(n,o,a){if(this.a=null,o.idToken||o.accessToken)o.idToken&&q(this,"idToken",o.idToken),o.accessToken&&q(this,"accessToken",o.accessToken),o.nonce&&!o.pendingToken&&q(this,"nonce",o.nonce),o.pendingToken&&(this.a=o.pendingToken);else if(o.oauthToken&&o.oauthTokenSecret)q(this,"accessToken",o.oauthToken),q(this,"secret",o.oauthTokenSecret);else throw new T("internal-error","failed to construct a credential");q(this,"providerId",n),q(this,"signInMethod",a)}sn.prototype.ka=function(n){return ah(n,jc(this))},sn.prototype.b=function(n,o){var a=jc(this);return a.idToken=o,ch(n,a)},sn.prototype.c=function(n,o){var a=jc(this);return $r(hh(n,a),o)};function jc(n){var o={};return n.idToken&&(o.id_token=n.idToken),n.accessToken&&(o.access_token=n.accessToken),n.secret&&(o.oauth_token_secret=n.secret),o.providerId=n.providerId,n.nonce&&!n.a&&(o.nonce=n.nonce),o={postBody:Ad(o).toString(),requestUri:"http://localhost"},n.a&&(delete o.postBody,o.pendingToken=n.a),o}sn.prototype.w=function(){var n={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(n.oauthIdToken=this.idToken),this.accessToken&&(n.oauthAccessToken=this.accessToken),this.secret&&(n.oauthTokenSecret=this.secret),this.nonce&&(n.nonce=this.nonce),this.a&&(n.pendingToken=this.a),n};function cE(n){if(n&&n.providerId&&n.signInMethod){var o={idToken:n.oauthIdToken,accessToken:n.oauthTokenSecret?null:n.oauthAccessToken,oauthTokenSecret:n.oauthTokenSecret,oauthToken:n.oauthTokenSecret&&n.oauthAccessToken,nonce:n.nonce,pendingToken:n.pendingToken};try{return new sn(n.providerId,o,n.signInMethod)}catch{}}return null}function tr(n,o){this.Qc=o||[],te(this,{providerId:n,isOAuthProvider:!0}),this.Jb={},this.qb=(Mc(n)||{}).Ja||null,this.pb=null}tr.prototype.Ka=function(n){return this.Jb=mn(n),this};function dv(n){if(typeof n!="string"||n.indexOf("saml.")!=0)throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');tr.call(this,n,[])}$(dv,tr);function ye(n){tr.call(this,n,js),this.a=[]}$(ye,tr),ye.prototype.Ca=function(n){return rn(this.a,n)||this.a.push(n),this},ye.prototype.Rb=function(){return Kn(this.a)},ye.prototype.credential=function(n,o){var a;if(N(n)?a={idToken:n.idToken||null,accessToken:n.accessToken||null,nonce:n.rawNonce||null}:a={idToken:n||null,accessToken:o||null},!a.idToken&&!a.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new sn(this.providerId,a,this.providerId)};function er(){ye.call(this,"facebook.com")}$(er,ye),q(er,"PROVIDER_ID","facebook.com"),q(er,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function vv(n){if(!n)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var o=n;return N(n)&&(o=n.accessToken),new er().credential({accessToken:o})}function nr(){ye.call(this,"github.com")}$(nr,ye),q(nr,"PROVIDER_ID","github.com"),q(nr,"GITHUB_SIGN_IN_METHOD","github.com");function gv(n){if(!n)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var o=n;return N(n)&&(o=n.accessToken),new nr().credential({accessToken:o})}function rr(){ye.call(this,"google.com"),this.Ca("profile")}$(rr,ye),q(rr,"PROVIDER_ID","google.com"),q(rr,"GOOGLE_SIGN_IN_METHOD","google.com");function mv(n,o){var a=n;return N(n)&&(a=n.idToken,o=n.accessToken),new rr().credential({idToken:a,accessToken:o})}function Qr(){tr.call(this,"twitter.com",sv)}$(Qr,tr),q(Qr,"PROVIDER_ID","twitter.com"),q(Qr,"TWITTER_SIGN_IN_METHOD","twitter.com");function yv(n,o){var a=n;if(N(a)||(a={oauthToken:n,oauthTokenSecret:o}),!a.oauthToken||!a.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new sn("twitter.com",a,"twitter.com")}function En(n,o,a){this.a=n,this.f=o,q(this,"providerId","password"),q(this,"signInMethod",a===De.EMAIL_LINK_SIGN_IN_METHOD?De.EMAIL_LINK_SIGN_IN_METHOD:De.EMAIL_PASSWORD_SIGN_IN_METHOD)}En.prototype.ka=function(n){return this.signInMethod==De.EMAIL_LINK_SIGN_IN_METHOD?nt(n,WE,{email:this.a,oobCode:this.f}):nt(n,zv,{email:this.a,password:this.f})},En.prototype.b=function(n,o){return this.signInMethod==De.EMAIL_LINK_SIGN_IN_METHOD?nt(n,$E,{idToken:o,email:this.a,oobCode:this.f}):nt(n,Hv,{idToken:o,email:this.a,password:this.f})},En.prototype.c=function(n,o){return $r(this.ka(n),o)},En.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function hE(n){return n&&n.email&&n.password?new En(n.email,n.password,n.signInMethod):null}function De(){te(this,{providerId:"password",isOAuthProvider:!1})}function wv(n,o){if(o=qc(o),!o)throw new T("argument-error","Invalid email link!");return new En(n,o.code,De.EMAIL_LINK_SIGN_IN_METHOD)}function qc(n){return n=pv(n),(n=Yd(n))&&n.operation===Ls?n:null}te(De,{PROVIDER_ID:"password"}),te(De,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),te(De,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Tn(n){if(!(n.fb&&n.eb||n.La&&n.ea))throw new T("internal-error");this.a=n,q(this,"providerId","phone"),this.fa="phone",q(this,"signInMethod","phone")}Tn.prototype.ka=function(n){return n.gb(so(this))},Tn.prototype.b=function(n,o){var a=so(this);return a.idToken=o,nt(n,dT,a)},Tn.prototype.c=function(n,o){var a=so(this);return a.operation="REAUTH",n=nt(n,vT,a),$r(n,o)},Tn.prototype.w=function(){var n={providerId:"phone"};return this.a.fb&&(n.verificationId=this.a.fb),this.a.eb&&(n.verificationCode=this.a.eb),this.a.La&&(n.temporaryProof=this.a.La),this.a.ea&&(n.phoneNumber=this.a.ea),n};function lE(n){if(n&&n.providerId==="phone"&&(n.verificationId&&n.verificationCode||n.temporaryProof&&n.phoneNumber)){var o={};return yt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(a){n[a]&&(o[a]=n[a])}),new Tn(o)}return null}function so(n){return n.a.La&&n.a.ea?{temporaryProof:n.a.La,phoneNumber:n.a.ea}:{sessionInfo:n.a.fb,code:n.a.eb}}function un(n){try{this.a=n||Y.auth()}catch{throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}te(this,{providerId:"phone",isOAuthProvider:!1})}un.prototype.gb=function(n,o){var a=this.a.a;return G(o.verify()).then(function(h){if(typeof h!="string")throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(o.type){case"recaptcha":var p=N(n)?n.session:null,d=N(n)?n.phoneNumber:n,g;return p&&p.type==oo?g=p.Ha().then(function(b){return VE(a,{idToken:b,phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h}})}):p&&p.type==Bs?g=p.Ha().then(function(b){return UE(a,{mfaPendingCredential:b,mfaEnrollmentId:n.multiFactorHint&&n.multiFactorHint.uid||n.multiFactorUid,phoneSignInInfo:{recaptchaToken:h}})}):g=FE(a,{phoneNumber:d,recaptchaToken:h}),g.then(function(b){return typeof o.reset=="function"&&o.reset(),b},function(b){throw typeof o.reset=="function"&&o.reset(),b});default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function bv(n,o){if(!n)throw new T("missing-verification-id");if(!o)throw new T("missing-verification-code");return new Tn({fb:n,eb:o})}te(un,{PROVIDER_ID:"phone"}),te(un,{PHONE_SIGN_IN_METHOD:"phone"});function Bc(n){if(n.temporaryProof&&n.phoneNumber)return new Tn({La:n.temporaryProof,ea:n.phoneNumber});var o=n&&n.providerId;if(!o||o==="password")return null;var a=n&&n.oauthAccessToken,h=n&&n.oauthTokenSecret,p=n&&n.nonce,d=n&&n.oauthIdToken,g=n&&n.pendingToken;try{switch(o){case"google.com":return mv(d,a);case"facebook.com":return vv(a);case"github.com":return gv(a);case"twitter.com":return yv(a,h);default:return a||h||d||g?g?o.indexOf("saml.")==0?new Zn(o,g):new sn(o,{pendingToken:g,idToken:n.oauthIdToken,accessToken:n.oauthAccessToken},o):new ye(o).credential({idToken:d,accessToken:a,rawNonce:p}):null}}catch{return null}}function Kc(n){if(!n.isOAuthProvider)throw new T("invalid-oauth-provider")}function Pe(n,o,a,h,p,d,g){if(this.c=n,this.b=o||null,this.g=a||null,this.f=h||null,this.i=d||null,this.h=g||null,this.a=p||null,this.g||this.a){if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}else throw new T("invalid-auth-event")}Pe.prototype.getUid=function(){var n=[];return n.push(this.c),this.b&&n.push(this.b),this.f&&n.push(this.f),this.h&&n.push(this.h),n.join("-")},Pe.prototype.T=function(){return this.h},Pe.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function Iv(n){return n=n||{},n.type?new Pe(n.type,n.eventId,n.urlResponse,n.sessionId,n.error&&ji(n.error),n.postBody,n.tenantId):null}function fE(){this.b=null,this.a=[]}var Gc=null;function pE(n){var o=Gc;o.a.push(n),o.b||(o.b=function(a){for(var h=0;h<o.a.length;h++)o.a[h](a)},n=gt("universalLinks.subscribe",f),typeof n=="function"&&n(null,o.b))}function Hc(n){var o="unauthorized-domain",a=void 0,h=ce(n);n=h.a,h=h.c,h=="chrome-extension"?a=Hp("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):h=="http"||h=="https"?a=Hp("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):o="operation-not-supported-in-this-environment",T.call(this,o,a)}$(Hc,T);function uo(n,o,a){T.call(this,n,a),n=o||{},n.Kb&&q(this,"email",n.Kb),n.ea&&q(this,"phoneNumber",n.ea),n.credential&&q(this,"credential",n.credential),n.$b&&q(this,"tenantId",n.$b)}$(uo,T),uo.prototype.w=function(){var n={code:this.code,message:this.message};this.email&&(n.email=this.email),this.phoneNumber&&(n.phoneNumber=this.phoneNumber),this.tenantId&&(n.tenantId=this.tenantId);var o=this.credential&&this.credential.w();return o&&se(n,o),n},uo.prototype.toJSON=function(){return this.w()};function Ks(n){if(n.code){var o=n.code||"";o.indexOf(qi)==0&&(o=o.substring(qi.length));var a={credential:Bc(n),$b:n.tenantId};if(n.email)a.Kb=n.email;else if(n.phoneNumber)a.ea=n.phoneNumber;else if(!a.credential)return new T(o,n.message||void 0);return new uo(o,a,n.message)}return null}function ao(){}ao.prototype.c=null;function Ev(n){return n.c||(n.c=n.b())}var zc;function Gs(){}$(Gs,ao),Gs.prototype.a=function(){var n=Tv(this);return n?new ActiveXObject(n):new XMLHttpRequest},Gs.prototype.b=function(){var n={};return Tv(this)&&(n[0]=!0,n[1]=!0),n};function Tv(n){if(!n.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var o=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],a=0;a<o.length;a++){var h=o[a];try{return new ActiveXObject(h),n.f=h}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return n.f}zc=new Gs;function Hs(){}$(Hs,ao),Hs.prototype.a=function(){var n=new XMLHttpRequest;if("withCredentials"in n)return n;if(typeof XDomainRequest<"u")return new Sv;throw Error("Unsupported browser")},Hs.prototype.b=function(){return{}};function Sv(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=L(this.qc,this),this.a.onerror=L(this.Tb,this),this.a.onprogress=L(this.rc,this),this.a.ontimeout=L(this.vc,this)}t=Sv.prototype,t.open=function(n,o,a){if(a!=null&&!a)throw Error("Only async requests are supported.");this.a.open(n,o)},t.send=function(n){if(n)if(typeof n=="string")this.a.send(n);else throw Error("Only string data is supported");else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(n){return n.toLowerCase()=="content-type"?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wc(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Wc(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Wc(this,1)};function Wc(n,o){n.readyState=o,n.onreadystatechange&&n.onreadystatechange()}t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function $c(n,o,a){this.reset(n,o,a,void 0,void 0)}$c.prototype.a=null,$c.prototype.reset=function(n,o,a,h,p){delete this.a};function Qc(n){this.f=n,this.b=this.c=this.a=null}function co(n,o){this.name=n,this.value=o}co.prototype.toString=function(){return this.name};var _v=new co("SEVERE",1e3),Xc=new co("WARNING",900),dE=new co("CONFIG",700),vE=new co("FINE",500);function Av(n){return n.c?n.c:n.a?Av(n.a):(Lr("Root logger has no level set."),null)}Qc.prototype.log=function(n,o,a){if(n.value>=Av(this).value)for(S(o)&&(o=o()),n=new $c(n,String(o),this.f),a&&(n.a=a),a=this;a;)a=a.a};var Yc={},zs=null;function Jc(n){zs||(zs=new Qc(""),Yc[""]=zs,zs.c=dE);var o;if(!(o=Yc[n])){o=new Qc(n);var a=n.lastIndexOf("."),h=n.substr(a+1);a=Jc(n.substr(0,a)),a.b||(a.b={}),a.b[h]=o,o.a=a,Yc[n]=o}return o}function Ce(n,o){n&&n.log(vE,o,void 0)}function Ws(n){this.f=n}$(Ws,ao),Ws.prototype.a=function(){return new $s(this.f)},Ws.prototype.b=function(n){return function(){return n}}({});function $s(n){Zt.call(this),this.u=n,this.h=void 0,this.readyState=Zc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Jc("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}$($s,Zt);var Zc=0;t=$s.prototype,t.open=function(n,o){if(this.readyState!=Zc)throw this.abort(),Error("Error reopening a connection");this.s=n,this.f=o,this.readyState=1,lo(this)},t.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var o={headers:this.l,method:this.s,credentials:this.h,cache:void 0};n&&(o.body=n),this.u.fetch(new Request(this.f,o)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,ho(this)),this.readyState=Zc},t.uc=function(n){this.a&&(this.g=n,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=n.headers,this.readyState=2,lo(this)),this.a&&(this.readyState=3,lo(this),this.a&&(this.responseType==="arraybuffer"?n.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):typeof f.ReadableStream<"u"&&"body"in n?(this.response=this.responseText="",this.c=n.body.getReader(),this.m=new TextDecoder,Nv(this)):n.text().then(this.tc.bind(this),this.Va.bind(this)))))};function Nv(n){n.c.read().then(n.pc.bind(n)).catch(n.Va.bind(n))}t.pc=function(n){if(this.a){var o=this.m.decode(n.value?n.value:new Uint8Array(0),{stream:!n.done});o&&(this.response=this.responseText+=o),n.done?ho(this):lo(this),this.readyState==3&&Nv(this)}},t.tc=function(n){this.a&&(this.response=this.responseText=n,ho(this))},t.sc=function(n){this.a&&(this.response=n,ho(this))},t.Va=function(n){var o=this.i;o&&o.log(Xc,"Failed to fetch url "+this.f,n instanceof Error?n:Error(n)),this.a&&ho(this)};function ho(n){n.readyState=4,n.g=null,n.c=null,n.m=null,lo(n)}t.setRequestHeader=function(n,o){this.l.append(n,o)},t.getResponseHeader=function(n){return this.b?this.b.get(n.toLowerCase())||"":((n=this.i)&&n.log(Xc,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var n=this.i;return n&&n.log(Xc,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}n=[];for(var o=this.b.entries(),a=o.next();!a.done;)a=a.value,n.push(a[0]+": "+a[1]),a=o.next();return n.join(`\r
`)};function lo(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(n){this.h=n?"include":"same-origin"}});function fo(n){Zt.call(this),this.headers=new qr,this.D=n||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=kv,this.u=this.S=!1}$(fo,Zt);var kv="";fo.prototype.b=Jc("goog.net.XhrIo");var gE=/^https?$/i,mE=["POST","PUT"];function yE(n,o,a,h,p){if(n.a)throw Error("[goog.net.XhrIo] Object is active with another request="+n.l+"; newUri="+o);a=a?a.toUpperCase():"GET",n.l=o,n.h="",n.P=a,n.J=!1,n.c=!0,n.a=n.D?n.D.a():zc.a(),n.C=n.D?Ev(n.D):Ev(zc),n.a.onreadystatechange=L(n.Wb,n);try{Ce(n.b,an(n,"Opening Xhr")),n.N=!0,n.a.open(a,String(o),!0),n.N=!1}catch(g){Ce(n.b,an(n,"Error opening Xhr: "+g.message)),Dv(n,g);return}o=h||"";var d=new qr(n.headers);p&&SI(p,function(g,b){d.set(b,g)}),p=qb(d.Y()),h=f.FormData&&o instanceof f.FormData,!rn(mE,a)||p||h||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(g,b){this.a.setRequestHeader(b,g)},n),n.m&&(n.a.responseType=n.m),"withCredentials"in n.a&&n.a.withCredentials!==n.S&&(n.a.withCredentials=n.S);try{Ov(n),0<n.g&&(n.u=wE(n.a),Ce(n.b,an(n,"Will abort after "+n.g+"ms if incomplete, xhr2 "+n.u)),n.u?(n.a.timeout=n.g,n.a.ontimeout=L(n.Ma,n)):n.s=fc(n.Ma,n.g,n)),Ce(n.b,an(n,"Sending request")),n.i=!0,n.a.send(o),n.i=!1}catch(g){Ce(n.b,an(n,"Send error: "+g.message)),Dv(n,g)}}function wE(n){return Oe&&Qp(9)&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function bE(n){return n.toLowerCase()=="content-type"}t=fo.prototype,t.Ma=function(){typeof l<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ce(this.b,an(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function Dv(n,o){n.c=!1,n.a&&(n.f=!0,n.a.abort(),n.f=!1),n.h=o,Cv(n),Qs(n)}function Cv(n){n.J||(n.J=!0,n.dispatchEvent("complete"),n.dispatchEvent("error"))}t.abort=function(){this.a&&this.c&&(Ce(this.b,an(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Qs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Qs(this,!0)),fo.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?Rv(this):this.Jc())},t.Jc=function(){Rv(this)};function Rv(n){if(n.c&&typeof l<"u"){if(n.C[1]&&po(n)==4&&Xs(n)==2)Ce(n.b,an(n,"Local request error detected and ignored"));else if(n.i&&po(n)==4)fc(n.Wb,0,n);else if(n.dispatchEvent("readystatechange"),po(n)==4){Ce(n.b,an(n,"Request complete")),n.c=!1;try{var o=Xs(n);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}var h;if(!(h=a)){var p;if(p=o===0){var d=String(n.l).match(Sd)[1]||null;if(!d&&f.self&&f.self.location){var g=f.self.location.protocol;d=g.substr(0,g.length-1)}p=!gE.test(d?d.toLowerCase():"")}h=p}if(h)n.dispatchEvent("complete"),n.dispatchEvent("success");else{try{var b=2<po(n)?n.a.statusText:""}catch(A){Ce(n.b,"Can not get status: "+A.message),b=""}n.h=b+" ["+Xs(n)+"]",Cv(n)}}finally{Qs(n)}}}}function Qs(n,o){if(n.a){Ov(n);var a=n.a,h=n.C[0]?w:null;n.a=null,n.C=null,o||n.dispatchEvent("ready");try{a.onreadystatechange=h}catch(p){(n=n.b)&&n.log(_v,"Problem encountered resetting onreadystatechange: "+p.message,void 0)}}}function Ov(n){n.a&&n.u&&(n.a.ontimeout=null),n.s&&(f.clearTimeout(n.s),n.s=null)}function po(n){return n.a?n.a.readyState:0}function Xs(n){try{return 2<po(n)?n.a.status:-1}catch{return-1}}function IE(n){try{return n.a?n.a.responseText:""}catch(o){return Ce(n.b,"Can not get responseText: "+o.message),""}}t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case kv:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var n=this.b;return n&&n.log(_v,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(o){return Ce(this.b,"Can not get response: "+o.message),null}};function an(n,o){return o+" ["+n.P+" "+n.l+" "+Xs(n)+"]"}function ir(n){var o=SE;this.g=[],this.u=o,this.s=n||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}ir.prototype.cancel=function(n){if(this.a)this.c instanceof ir&&this.c.cancel();else{if(this.b){var o=this.b;delete this.b,n?o.cancel(n):(o.l--,0>=o.l&&o.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(n=new go,Ys(this),vo(this,!1,n))}},ir.prototype.m=function(n,o){this.i=!1,vo(this,n,o)};function vo(n,o,a){n.a=!0,n.c=a,n.f=!o,Pv(n)}function Ys(n){if(n.a){if(!n.v)throw new Js;n.v=!1}}function EE(n,o){th(n,null,o,void 0)}function th(n,o,a,h){n.g.push([o,a,h]),n.a&&Pv(n)}ir.prototype.then=function(n,o,a){var h,p,d=new tt(function(g,b){h=g,p=b});return th(this,h,function(g){g instanceof go?d.cancel():p(g)}),d.then(n,o,a)},ir.prototype.$goog_Thenable=!0;function xv(n){return jb(n.g,function(o){return S(o[1])})}function Pv(n){if(n.h&&n.a&&xv(n)){var o=n.h,a=Zs[o];a&&(f.clearTimeout(a.a),delete Zs[o]),n.h=0}n.b&&(n.b.l--,delete n.b),o=n.c;for(var h=a=!1;n.g.length&&!n.i;){var p=n.g.shift(),d=p[0],g=p[1];if(p=p[2],d=n.f?g:d)try{var b=d.call(p||n.s,o);b!==void 0&&(n.f=n.f&&(b==o||b instanceof Error),n.c=o=b),(Sp(o)||typeof f.Promise=="function"&&o instanceof f.Promise)&&(h=!0,n.i=!0)}catch(A){o=A,n.f=!0,xv(n)||(a=!0)}}n.c=o,h&&(b=L(n.m,n,!0),h=L(n.m,n,!1),o instanceof ir?(th(o,b,h),o.C=!0):o.then(b,h)),a&&(o=new Lv(o),Zs[o.a]=o,n.h=o.a)}function Js(){ge.call(this)}$(Js,ge),Js.prototype.message="Deferred has already fired",Js.prototype.name="AlreadyCalledError";function go(){ge.call(this)}$(go,ge),go.prototype.message="Deferred was canceled",go.prototype.name="CanceledError";function Lv(n){this.a=f.setTimeout(L(this.c,this),0),this.b=n}Lv.prototype.c=function(){throw delete Zs[this.a],this.b};var Zs={};function eh(n){var o={},a=o.document||document,h=Fp(n).toString(),p=Ss(document,"SCRIPT"),d={Xb:p,Ma:void 0},g=new ir(d),b=null,A=o.timeout!=null?o.timeout:5e3;return 0<A&&(b=window.setTimeout(function(){tu(p,!0);var D=new nh(AE,"Timeout reached for loading script "+h);Ys(g),vo(g,!1,D)},A),d.Ma=b),p.onload=p.onreadystatechange=function(){p.readyState&&p.readyState!="loaded"&&p.readyState!="complete"||(tu(p,o.xd||!1,b),Ys(g),vo(g,!0,null))},p.onerror=function(){tu(p,!0,b);var D=new nh(_E,"Error while loading script "+h);Ys(g),vo(g,!1,D)},d=o.attributes||{},se(d,{type:"text/javascript",charset:"UTF-8"}),Yp(p,d),eI(p,n),TE(a).appendChild(p),g}function TE(n){var o;return(o=(n||document).getElementsByTagName("HEAD"))&&o.length!=0?o[0]:n.documentElement}function SE(){if(this&&this.Xb){var n=this.Xb;n&&n.tagName=="SCRIPT"&&tu(n,!0,this.Ma)}}function tu(n,o,a){a!=null&&f.clearTimeout(a),n.onload=w,n.onerror=w,n.onreadystatechange=w,o&&window.setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0)}var _E=0,AE=1;function nh(n,o){var a="Jsloader error (code #"+n+")";o&&(a+=": "+o),ge.call(this,a),this.code=n}$(nh,ge);function eu(n){this.f=n}$(eu,ao),eu.prototype.a=function(){return new this.f},eu.prototype.b=function(){return{}};function Le(n,o,a){if(this.c=n,n=o||{},this.l=n.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=n.secureTokenTimeout||NE,this.g=mn(n.secureTokenHeaders||kE),this.h=n.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=n.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=n.firebaseTimeout||DE,this.a=mn(n.firebaseHeaders||CE),a&&(this.a["X-Client-Version"]=a,this.g["X-Client-Version"]=a),a=He()=="Node",a=f.XMLHttpRequest||a&&Y.INTERNAL.node&&Y.INTERNAL.node.XMLHttpRequest,!a&&!xe())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,xe()?this.f=new Ws(self):Md()?this.f=new eu(a):this.f=new Hs,this.b=null}var rh,Me="idToken",NE=new In(3e4,6e4),kE={"Content-Type":"application/x-www-form-urlencoded"},DE=new In(3e4,6e4),CE={"Content-Type":"application/json"};function Mv(n,o){o?n.a["X-Firebase-Locale"]=o:delete n.a["X-Firebase-Locale"]}function nu(n,o){o&&(n.l=ih("https://securetoken.googleapis.com/v1/token",o),n.h=ih("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",o),n.i=ih("https://identitytoolkit.googleapis.com/v2/",o))}function ih(n,o){return n=ce(n),o=ce(o.url),n.f=n.a+n.f,$i(n,o.c),n.a=o.a,Qi(n,o.g),n.toString()}function Fv(n,o){o?(n.a["X-Client-Version"]=o,n.g["X-Client-Version"]=o):(delete n.a["X-Client-Version"],delete n.g["X-Client-Version"])}Le.prototype.T=function(){return this.b};function Vv(n,o,a,h,p,d,g){PI()||xe()?n=L(n.u,n):(rh||(rh=new tt(function(b,A){OE(b,A)})),n=L(n.s,n)),n(o,a,h,p,d,g)}Le.prototype.u=function(n,o,a,h,p,d){if(xe()&&(typeof f.fetch>"u"||typeof f.Headers>"u"||typeof f.Request>"u"))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var g=new fo(this.f);if(d){g.g=Math.max(0,d);var b=setTimeout(function(){g.dispatchEvent("timeout")},d)}Id(g,"complete",function(){b&&clearTimeout(b);var A=null;try{A=JSON.parse(IE(this))||null}catch{A=null}o&&o(A)}),lc(g,"ready",function(){b&&clearTimeout(b),dd(this)}),lc(g,"timeout",function(){b&&clearTimeout(b),dd(this),o&&o(null)}),yE(g,n,a,h,p)};var RE=new Ke(bs,"https://apis.google.com/js/client.js?onload=%{onload}"),Uv="__fcb"+Math.floor(1e6*Math.random()).toString();function OE(n,o){if(((window.gapi||{}).client||{}).request)n();else{f[Uv]=function(){((window.gapi||{}).client||{}).request?n():o(Error("CORS_UNSUPPORTED"))};var a=Wa(RE,{onload:Uv});EE(eh(a),function(){o(Error("CORS_UNSUPPORTED"))})}}Le.prototype.s=function(n,o,a,h,p){var d=this;rh.then(function(){window.gapi.client.setApiKey(d.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:n,method:a,body:h,headers:p,authType:"none",callback:function(b){window.gapi.auth.setToken(g),o&&o(b)}})}).o(function(g){o&&o({error:{message:g&&g.message||"CORS_UNSUPPORTED"}})})};function xE(n,o){return new tt(function(a,h){o.grant_type=="refresh_token"&&o.refresh_token||o.grant_type=="authorization_code"&&o.code?Vv(n,n.l+"?key="+encodeURIComponent(n.c),function(p){p?p.error?h(fh(p)):p.access_token&&p.refresh_token?a(p):h(new T("internal-error")):h(new T("network-request-failed"))},"POST",Ad(o).toString(),n.g,n.m.get()):h(new T("internal-error"))})}function jv(n,o,a,h,p,d,g){var b=ce(o+a);St(b,"key",n.c),g&&St(b,"cb",Date.now().toString());var A=h=="GET";if(A)for(var D in p)p.hasOwnProperty(D)&&St(b,D,p[D]);return new tt(function(W,ct){Vv(n,b.toString(),function(ot){ot?ot.error?ct(fh(ot,d||{})):W(ot):ct(new T("network-request-failed"))},h,A?void 0:Dd(Ud(p)),n.a,n.v.get())})}function or(n){if(n=n.email,typeof n!="string"||!FI.test(n))throw new T("invalid-email")}function qv(n){"email"in n&&or(n)}function PE(n,o){return nt(n,GE,{identifier:o,continueUri:Ps()?Ji():"http://localhost"}).then(function(a){return a.signinMethods||[]})}function LE(n){return nt(n,nT,{}).then(function(o){return o.authorizedDomains||[]})}function he(n){if(!n[Me])throw n.mfaPendingCredential?new T("multi-factor-auth-required",null,mn(n)):new T("internal-error")}function oh(n){if(n.phoneNumber||n.temporaryProof){if(!n.phoneNumber||!n.temporaryProof)throw new T("internal-error")}else{if(!n.sessionInfo)throw new T("missing-verification-id");if(!n.code)throw new T("missing-verification-code")}}Le.prototype.Ab=function(){return nt(this,sT,{})},Le.prototype.Cb=function(n,o){return nt(this,Gv,{idToken:n,email:o})},Le.prototype.Db=function(n,o){return nt(this,Hv,{idToken:n,password:o})};var ME={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};t=Le.prototype,t.Eb=function(n,o){var a={idToken:n},h=[];return Op(ME,function(p,d){var g=o[d];g===null?h.push(p):d in o&&(a[d]=g)}),h.length&&(a.deleteAttribute=h),nt(this,Gv,a)},t.wb=function(n,o){return n={requestType:"PASSWORD_RESET",email:n},se(n,o),nt(this,eT,n)},t.xb=function(n,o){return n={requestType:"EMAIL_SIGNIN",email:n},se(n,o),nt(this,JE,n)},t.vb=function(n,o){return n={requestType:"VERIFY_EMAIL",idToken:n},se(n,o),nt(this,ZE,n)},t.Fb=function(n,o,a){return n={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:n,newEmail:o},se(n,a),nt(this,tT,n)};function FE(n,o){return nt(n,oT,o)}t.gb=function(n){return nt(this,pT,n)};function VE(n,o){return nt(n,uT,o).then(function(a){return a.phoneSessionInfo.sessionInfo})}function Bv(n){if(!n.phoneVerificationInfo)throw new T("internal-error");if(!n.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!n.phoneVerificationInfo.code)throw new T("missing-verification-code")}function UE(n,o){return nt(n,aT,o).then(function(a){return a.phoneResponseInfo.sessionInfo})}function jE(n,o,a){return nt(n,zE,{idToken:o,deleteProvider:a})}function sh(n){if(!n.requestUri||!n.sessionId&&!n.postBody&&!n.pendingToken)throw new T("internal-error")}function uh(n,o){return o.oauthIdToken&&o.providerId&&o.providerId.indexOf("oidc.")==0&&!o.pendingToken&&(n.sessionId?o.nonce=n.sessionId:n.postBody&&(n=new Qn(n.postBody),vc(n,"nonce")&&(o.nonce=n.get("nonce")))),o}function Kv(n){var o=null;if(n.needConfirmation?(n.code="account-exists-with-different-credential",o=Ks(n)):n.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(n.code="credential-already-in-use",o=Ks(n)):n.errorMessage=="EMAIL_EXISTS"?(n.code="email-already-in-use",o=Ks(n)):n.errorMessage&&(o=Wv(n.errorMessage)),o)throw o;he(n)}function ah(n,o){return o.returnIdpCredential=!0,nt(n,cT,o)}function ch(n,o){return o.returnIdpCredential=!0,nt(n,lT,o)}function hh(n,o){return o.returnIdpCredential=!0,o.autoCreate=!1,nt(n,hT,o)}function lh(n){if(!n.oobCode)throw new T("invalid-action-code")}t.ob=function(n,o){return nt(this,iT,{oobCode:n,newPassword:o})},t.Sa=function(n){return nt(this,BE,{oobCode:n})},t.kb=function(n){return nt(this,qE,{oobCode:n})};var qE={endpoint:"setAccountInfo",A:lh,Z:"email",B:!0},BE={endpoint:"resetPassword",A:lh,G:function(n){var o=n.requestType;if(!o||!n.email&&o!="EMAIL_SIGNIN"&&o!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},B:!0},KE={endpoint:"signupNewUser",A:function(n){if(or(n),!n.password)throw new T("weak-password")},G:he,V:!0,B:!0},GE={endpoint:"createAuthUri",B:!0},HE={endpoint:"deleteAccount",O:["idToken"]},zE={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(n){if(!Array.isArray(n.deleteProvider))throw new T("internal-error")}},WE={endpoint:"emailLinkSignin",O:["email","oobCode"],A:or,G:he,V:!0,B:!0},$E={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:or,G:he,V:!0},QE={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:Bv,G:he,B:!0,Na:!0},XE={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:Bv,G:he,B:!0,Na:!0},YE={endpoint:"getAccountInfo"},JE={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(n){if(n.requestType!="EMAIL_SIGNIN")throw new T("internal-error");or(n)},Z:"email",B:!0},ZE={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(n){if(n.requestType!="VERIFY_EMAIL")throw new T("internal-error")},Z:"email",B:!0},tT={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(n){if(n.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new T("internal-error")},Z:"email",B:!0},eT={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(n){if(n.requestType!="PASSWORD_RESET")throw new T("internal-error");or(n)},Z:"email",B:!0},nT={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},rT={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(n){if(!n.recaptchaSiteKey)throw new T("internal-error")}},iT={endpoint:"resetPassword",A:lh,Z:"email",B:!0},oT={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Gv={endpoint:"setAccountInfo",O:["idToken"],A:qv,V:!0},Hv={endpoint:"setAccountInfo",O:["idToken"],A:function(n){if(qv(n),!n.password)throw new T("weak-password")},G:he,V:!0},sT={endpoint:"signupNewUser",G:he,V:!0,B:!0},uT={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(n){if(!n.phoneEnrollmentInfo)throw new T("internal-error");if(!n.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!n.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(n){if(!n.phoneSessionInfo||!n.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},aT={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(n){if(!n.phoneSignInInfo||!n.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(n){if(!n.phoneResponseInfo||!n.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},cT={endpoint:"verifyAssertion",A:sh,Za:uh,G:Kv,V:!0,B:!0},hT={endpoint:"verifyAssertion",A:sh,Za:uh,G:function(n){if(n.errorMessage&&n.errorMessage=="USER_NOT_FOUND")throw new T("user-not-found");if(n.errorMessage)throw Wv(n.errorMessage);he(n)},V:!0,B:!0},lT={endpoint:"verifyAssertion",A:function(n){if(sh(n),!n.idToken)throw new T("internal-error")},Za:uh,G:Kv,V:!0},fT={endpoint:"verifyCustomToken",A:function(n){if(!n.token)throw new T("invalid-custom-token")},G:he,V:!0,B:!0},zv={endpoint:"verifyPassword",A:function(n){if(or(n),!n.password)throw new T("wrong-password")},G:he,V:!0,B:!0},pT={endpoint:"verifyPhoneNumber",A:oh,G:he,B:!0},dT={endpoint:"verifyPhoneNumber",A:function(n){if(!n.idToken)throw new T("internal-error");oh(n)},G:function(n){if(n.temporaryProof)throw n.code="credential-already-in-use",Ks(n);he(n)}},vT={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:oh,G:he,B:!0},gT={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(n){if(!!n[Me]^!!n.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function nt(n,o,a){if(!GI(a,o.O))return vt(new T("internal-error"));var h=!!o.Na,p=o.Vb||"POST",d;return G(a).then(o.A).then(function(){return o.V&&(a.returnSecureToken=!0),o.B&&n.b&&typeof a.tenantId>"u"&&(a.tenantId=n.b),h?jv(n,n.i,o.endpoint,p,a,o.Ib,o.mb||!1):jv(n,n.h,o.endpoint,p,a,o.Ib,o.mb||!1)}).then(function(g){return d=g,o.Za?o.Za(a,d):d}).then(o.G).then(function(){if(!o.Z)return d;if(!(o.Z in d))throw new T("internal-error");return d[o.Z]})}function Wv(n){return fh({error:{errors:[{message:n}],code:400,message:n}})}function fh(n,o){var a=(n.error&&n.error.errors&&n.error.errors[0]||{}).reason||"",h={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(a=h[a]?new T(h[a]):null)return a;a=n.error&&n.error.message||"",h={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},se(h,o||{}),o=(o=a.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<o.length?o[1]:void 0;for(var p in h)if(a.indexOf(p)===0)return new T(h[p],o);return!o&&n&&(o=to(n)),new T("internal-error",o)}function mT(n){this.b=n,this.a=null,this.sb=yT(this)}function yT(n){return ST().then(function(){return new tt(function(o,a){gt("gapi.iframes.getContext")().open({where:document.body,url:n.b,messageHandlersFilter:gt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(h){function p(){clearTimeout(d),o()}n.a=h,n.a.restyle({setHideOnLeave:!1});var d=setTimeout(function(){a(Error("Network Error"))},TT.get());h.ping(p).then(p,function(){a(Error("Network Error"))})})})})}function wT(n,o){return n.sb.then(function(){return new tt(function(a){n.a.send(o.type,o,a,gt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function bT(n,o){n.sb.then(function(){n.a.register("authEvent",o,gt("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var IT=new Ke(bs,"https://apis.google.com/js/api.js?onload=%{onload}"),ET=new In(3e4,6e4),TT=new In(5e3,15e3),ru=null;function ST(){return ru||(ru=new tt(function(n,o){function a(){qd(),gt("gapi.load")("gapi.iframes",{callback:n,ontimeout:function(){qd(),o(Error("Network Error"))},timeout:ET.get()})}if(gt("gapi.iframes.Iframe"))n();else if(gt("gapi.load"))a();else{var h="__iframefcb"+Math.floor(1e6*Math.random()).toString();f[h]=function(){gt("gapi.load")?a():o(Error("Network Error"))},h=Wa(IT,{onload:h}),G(eh(h)).o(function(){o(Error("Network Error"))})}}).o(function(n){throw ru=null,n}))}function $v(n,o,a,h){this.l=n,this.h=o,this.i=a,this.g=h,this.f=null,this.g?(n=ce(this.g.url),n=Os(n.c,n.a,n.g,"/emulator/auth/iframe")):n=Os("https",this.l,null,"/__/auth/iframe"),this.a=n,St(this.a,"apiKey",this.h),St(this.a,"appName",this.i),this.b=null,this.c=[]}$v.prototype.toString=function(){return this.f?St(this.a,"v",this.f):Ge(this.a.b,"v"),this.b?St(this.a,"eid",this.b):Ge(this.a.b,"eid"),this.c.length?St(this.a,"fw",this.c.join(",")):Ge(this.a.b,"fw"),this.a.toString()};function ph(n,o,a,h,p,d){this.u=n,this.s=o,this.c=a,this.m=h,this.v=d,this.i=this.g=this.l=null,this.a=p,this.h=this.f=null}ph.prototype.zb=function(n){return this.h=n,this},ph.prototype.toString=function(){if(this.v){var n=ce(this.v.url);n=Os(n.c,n.a,n.g,"/emulator/auth/handler")}else n=Os("https",this.u,null,"/__/auth/handler");if(St(n,"apiKey",this.s),St(n,"appName",this.c),St(n,"authType",this.m),this.a.isOAuthProvider){var o=this.a;try{var a=Y.app(this.c).auth().la()}catch{a=null}o.pb=a,St(n,"providerId",this.a.providerId),a=this.a,o=Ud(a.Jb);for(var h in o)o[h]=o[h].toString();h=a.Qc,o=mn(o);for(var p=0;p<h.length;p++){var d=h[p];d in o&&delete o[d]}a.qb&&a.pb&&!o[a.qb]&&(o[a.qb]=a.pb),Gn(o)||St(n,"customParameters",to(o))}if(typeof this.a.Rb=="function"&&(a=this.a.Rb(),a.length&&St(n,"scopes",a.join(","))),this.l?St(n,"redirectUrl",this.l):Ge(n.b,"redirectUrl"),this.g?St(n,"eventId",this.g):Ge(n.b,"eventId"),this.i?St(n,"v",this.i):Ge(n.b,"v"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!ke(n,g)&&St(n,g,this.b[g]);return this.h?St(n,"tid",this.h):Ge(n.b,"tid"),this.f?St(n,"eid",this.f):Ge(n.b,"eid"),g=dh(this.c),g.length&&St(n,"fw",g.join(",")),n.toString()};function dh(n){try{return Y.app(n).auth().Ga()}catch{return[]}}function Qv(n,o,a,h,p,d){this.s=n,this.g=o,this.b=a,this.f=d,this.c=h||null,this.i=p||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function Xv(n){var o=Ji();return LE(n).then(function(a){t:{var h=ce(o),p=h.c;h=h.a;for(var d=0;d<a.length;d++){var g=a[d],b=h,A=p;if(g.indexOf("chrome-extension://")==0?b=ce(g).a==b&&A=="chrome-extension":A!="http"&&A!="https"?b=!1:MI.test(g)?b=b==g:(g=g.split(".").join("\\."),b=new RegExp("^(.+\\."+g+"|"+g+")$","i").test(b)),b){a=!0;break t}}a=!1}if(!a)throw new Hc(Ji())})}function Yv(n){return n.m||(n.m=xs().then(function(){if(!n.u){var o=n.c,a=n.i,h=dh(n.b),p=new $v(n.s,n.g,n.b,n.f);p.f=o,p.b=a,p.c=Kn(h||[]),n.u=p.toString()}n.v=new mT(n.u),_T(n)})),n.m}t=Qv.prototype,t.Pb=function(n,o,a){var h=new T("popup-closed-by-user"),p=new T("web-storage-unsupported"),d=this,g=!1;return this.ma().then(function(){AT(d).then(function(b){b||(n&&Xn(n),o(p),g=!0)})}).o(function(){}).then(function(){if(!g)return LI(n)}).then(function(){if(!g)return jr(a).then(function(){o(h)})})},t.Yb=function(){var n=jt();return!Zi(n)&&!jd(n)},t.Ub=function(){return!1},t.Nb=function(n,o,a,h,p,d,g,b){if(!n)return vt(new T("popup-blocked"));if(g&&!Zi())return this.ma().o(function(D){Xn(n),p(D)}),h(),G();this.a||(this.a=Xv(Jv(this)));var A=this;return this.a.then(function(){var D=A.ma().o(function(W){throw Xn(n),p(W),W});return h(),D}).then(function(){if(Kc(a),!g){var D=mo(A.s,A.g,A.b,o,a,null,d,A.c,void 0,A.i,b,A.f);Od(D,n)}}).o(function(D){throw D.code=="auth/network-request-failed"&&(A.a=null),D})};function Jv(n){return n.l||(n.C=n.c?Gr(n.c,dh(n.b)):null,n.l=new Le(n.g,Bi(n.i),n.C),n.f&&nu(n.l,n.f)),n.l}t.Ob=function(n,o,a,h){this.a||(this.a=Xv(Jv(this)));var p=this;return this.a.then(function(){Kc(o);var d=mo(p.s,p.g,p.b,n,o,Ji(),a,p.c,void 0,p.i,h,p.f);Od(d)}).o(function(d){throw d.code=="auth/network-request-failed"&&(p.a=null),d})},t.ma=function(){var n=this;return Yv(this).then(function(){return n.v.sb}).o(function(){throw n.a=null,new T("network-request-failed")})},t.ac=function(){return!0};function mo(n,o,a,h,p,d,g,b,A,D,W,ct){return n=new ph(n,o,a,h,p,ct),n.l=d,n.g=g,n.i=b,n.b=mn(A||null),n.f=D,n.zb(W).toString()}function _T(n){if(!n.v)throw Error("IfcHandler must be initialized!");bT(n.v,function(o){var a={};if(o&&o.authEvent){var h=!1;for(o=Iv(o.authEvent),a=0;a<n.h.length;a++)h=n.h[a](o)||h;return a={},a.status=h?"ACK":"ERROR",G(a)}return a.status="ERROR",G(a)})}function AT(n){var o={type:"webStorageSupport"};return Yv(n).then(function(){return wT(n.v,o)}).then(function(a){if(a&&a.length&&typeof a[0].webStorageSupport<"u")return a[0].webStorageSupport;throw Error()})}t.Ea=function(n){this.h.push(n)},t.Ta=function(n){Re(this.h,function(o){return o==n})};function Zv(n){if(this.a=n||Y.INTERNAL.reactNative&&Y.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}t=Zv.prototype,t.get=function(n){return G(this.a.getItem(n)).then(function(o){return o&&zr(o)})},t.set=function(n,o){return G(this.a.setItem(n,to(o)))},t.U=function(n){return G(this.a.removeItem(n))},t.ca=function(){},t.ia=function(){};function tg(n){this.b=n,this.a={},this.f=L(this.c,this)}var eg=[];function NT(){var n=xe()?self:null;if(yt(eg,function(a){a.b==n&&(o=a)}),!o){var o=new tg(n);eg.push(o)}return o}tg.prototype.c=function(n){var o=n.data.eventType,a=n.data.eventId,h=this.a[o];if(h&&0<h.length){n.ports[0].postMessage({status:"ack",eventId:a,eventType:o,response:null});var p=[];yt(h,function(d){p.push(G().then(function(){return d(n.origin,n.data.data)}))}),od(p).then(function(d){var g=[];yt(d,function(b){g.push({fulfilled:b.Qb,value:b.value,reason:b.reason?b.reason.message:void 0})}),yt(g,function(b){for(var A in b)typeof b[A]>"u"&&delete b[A]}),n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})})}};function ng(n,o,a){Gn(n.a)&&n.b.addEventListener("message",n.f),typeof n.a[o]>"u"&&(n.a[o]=[]),n.a[o].push(a)}function rg(n){this.a=n}rg.prototype.postMessage=function(n,o){this.a.postMessage(n,o)};function ig(n){this.c=n,this.b=!1,this.a=[]}function og(n,o,a,h){var p,d=a||{},g,b,A,D=null;if(n.b)return vt(Error("connection_unavailable"));var W=h?800:50,ct=typeof MessageChannel<"u"?new MessageChannel:null;return new tt(function(ot,Ft){ct?(p=Math.floor(Math.random()*Math.pow(10,20)).toString(),ct.port1.start(),b=setTimeout(function(){Ft(Error("unsupported_event"))},W),g=function(cn){cn.data.eventId===p&&(cn.data.status==="ack"?(clearTimeout(b),A=setTimeout(function(){Ft(Error("timeout"))},3e3)):cn.data.status==="done"?(clearTimeout(A),typeof cn.data.response<"u"?ot(cn.data.response):Ft(Error("unknown_error"))):(clearTimeout(b),clearTimeout(A),Ft(Error("invalid_response"))))},D={messageChannel:ct,onMessage:g},n.a.push(D),ct.port1.addEventListener("message",g),n.c.postMessage({eventType:o,eventId:p,data:d},[ct.port2])):Ft(Error("connection_unavailable"))}).then(function(ot){return vh(n,D),ot}).o(function(ot){throw vh(n,D),ot})}function vh(n,o){if(o){var a=o.messageChannel,h=o.onMessage;a&&(a.port1.removeEventListener("message",h),a.port1.close()),Re(n.a,function(p){return p==o})}}ig.prototype.close=function(){for(;0<this.a.length;)vh(this,this.a[0]);this.b=!0};function sg(){if(!yh())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=f.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var n=this;xe()&&self?(this.v=NT(),ng(this.v,"keyChanged",function(o,a){return cg(n).then(function(h){return 0<h.length&&yt(n.a,function(p){p(h)}),{keyProcessed:rn(h,a.key)}})}),ng(this.v,"ping",function(){return G(["keyChanged"])})):BI().then(function(o){(n.h=o)&&(n.g=new ig(new rg(o)),og(n.g,"ping",null,!0).then(function(a){a[0].fulfilled&&rn(a[0].value,"keyChanged")&&(n.s=!0)}).o(function(){}))})}var gh;function kT(n){return new tt(function(o,a){var h=n.m.deleteDatabase("firebaseLocalStorageDb");h.onsuccess=function(){o()},h.onerror=function(p){a(Error(p.target.error))}})}function ug(n){return new tt(function(o,a){var h=n.m.open("firebaseLocalStorageDb",1);h.onerror=function(p){try{p.preventDefault()}catch{}a(Error(p.target.error))},h.onupgradeneeded=function(p){p=p.target.result;try{p.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(d){a(d)}},h.onsuccess=function(p){p=p.target.result,p.objectStoreNames.contains("firebaseLocalStorage")?o(p):kT(n).then(function(){return ug(n)}).then(function(d){o(d)}).o(function(d){a(d)})}})}function mh(n){return n.i||(n.i=ug(n)),n.i}function iu(n,o){function a(p,d){mh(n).then(o).then(p).o(function(g){if(3<++h)d(g);else return mh(n).then(function(b){return b.close(),n.i=void 0,a(p,d)}).o(function(b){d(b)})})}var h=0;return new tt(a)}function yh(){try{return!!f.indexedDB}catch{return!1}}function yo(n){return n.objectStore("firebaseLocalStorage")}function wo(n,o){return n.transaction(["firebaseLocalStorage"],o?"readwrite":"readonly")}function Xr(n){return new tt(function(o,a){n.onsuccess=function(h){h&&h.target?o(h.target.result):o()},n.onerror=function(h){a(h.target.error)}})}t=sg.prototype,t.set=function(n,o){var a=this,h=!1;return iu(this,function(p){return p=yo(wo(p,!0)),Xr(p.get(n))}).then(function(p){return iu(a,function(d){if(d=yo(wo(d,!0)),p)return p.value=o,Xr(d.put(p));a.b++,h=!0;var g={};return g.fbase_key=n,g.value=o,Xr(d.add(g))})}).then(function(){return a.c[n]=o,ag(a,n)}).oa(function(){h&&a.b--})};function ag(n,o){return n.g&&n.h&&qI()===n.h?og(n.g,"keyChanged",{key:o},n.s).then(function(){}).o(function(){}):G()}t.get=function(n){return iu(this,function(o){return Xr(yo(wo(o,!1)).get(n))}).then(function(o){return o&&o.value})},t.U=function(n){var o=this,a=!1;return iu(this,function(h){return a=!0,o.b++,Xr(yo(wo(h,!0)).delete(n))}).then(function(){return delete o.c[n],ag(o,n)}).oa(function(){a&&o.b--})};function cg(n){return mh(n).then(function(o){var a=yo(wo(o,!1));return a.getAll?Xr(a.getAll()):new tt(function(h,p){var d=[],g=a.openCursor();g.onsuccess=function(b){(b=b.target.result)?(d.push(b.value),b.continue()):h(d)},g.onerror=function(b){p(b.target.error)}})}).then(function(o){var a={},h=[];if(n.b==0){for(h=0;h<o.length;h++)a[o[h].fbase_key]=o[h].value;h=xd(n.c,a),n.c=a}return h})}t.ca=function(n){this.a.length==0&&DT(this),this.a.push(n)},t.ia=function(n){Re(this.a,function(o){return o==n}),this.a.length==0&&hg(this)};function DT(n){function o(){n.f=setTimeout(function(){n.l=cg(n).then(function(a){0<a.length&&yt(n.a,function(h){h(a)})}).then(function(){o()}).o(function(a){a.message!="STOP_EVENT"&&o()})},800)}hg(n),o()}function hg(n){n.l&&n.l.cancel("STOP_EVENT"),n.f&&(clearTimeout(n.f),n.f=null)}function lg(n){var o=this,a=null;this.a=[],this.type="indexedDB",this.c=n,this.b=G().then(function(){if(yh()){var h=Jn(),p="__sak"+h;return gh||(gh=new sg),a=gh,a.set(p,h).then(function(){return a.get(p)}).then(function(d){if(d!==h)throw Error("indexedDB not supported!");return a.U(p)}).then(function(){return a}).o(function(){return o.c})}return o.c}).then(function(h){return o.type=h.type,h.ca(function(p){yt(o.a,function(d){d(p)})}),h})}t=lg.prototype,t.get=function(n){return this.b.then(function(o){return o.get(n)})},t.set=function(n,o){return this.b.then(function(a){return a.set(n,o)})},t.U=function(n){return this.b.then(function(o){return o.U(n)})},t.ca=function(n){this.a.push(n)},t.ia=function(n){Re(this.a,function(o){return o==n})};function bo(){this.a={},this.type="inMemory"}t=bo.prototype,t.get=function(n){return G(this.a[n])},t.set=function(n,o){return this.a[n]=o,G()},t.U=function(n){return delete this.a[n],G()},t.ca=function(){},t.ia=function(){};function ou(){if(!CT())throw He()=="Node"?new T("internal-error","The LocalStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=fg()||Y.INTERNAL.node.localStorage,this.type="localStorage"}function fg(){try{var n=f.localStorage,o=Jn();return n&&(n.setItem(o,"1"),n.removeItem(o)),n}catch{return null}}function CT(){var n=He()=="Node";if(n=fg()||n&&Y.INTERNAL.node&&Y.INTERNAL.node.localStorage,!n)return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch{return!1}}t=ou.prototype,t.get=function(n){var o=this;return G().then(function(){var a=o.a.getItem(n);return zr(a)})},t.set=function(n,o){var a=this;return G().then(function(){var h=to(o);h===null?a.U(n):a.a.setItem(n,h)})},t.U=function(n){var o=this;return G().then(function(){o.a.removeItem(n)})},t.ca=function(n){f.window&&Ne(f.window,"storage",n)},t.ia=function(n){f.window&&me(f.window,"storage",n)};function wh(){this.type="nullStorage"}t=wh.prototype,t.get=function(){return G(null)},t.set=function(){return G()},t.U=function(){return G()},t.ca=function(){},t.ia=function(){};function bh(){if(!RT())throw He()=="Node"?new T("internal-error","The SessionStorage compatibility library was not found."):new T("web-storage-unsupported");this.a=pg()||Y.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function pg(){try{var n=f.sessionStorage,o=Jn();return n&&(n.setItem(o,"1"),n.removeItem(o)),n}catch{return null}}function RT(){var n=He()=="Node";if(n=pg()||n&&Y.INTERNAL.node&&Y.INTERNAL.node.sessionStorage,!n)return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch{return!1}}t=bh.prototype,t.get=function(n){var o=this;return G().then(function(){var a=o.a.getItem(n);return zr(a)})},t.set=function(n,o){var a=this;return G().then(function(){var h=to(o);h===null?a.U(n):a.a.setItem(n,h)})},t.U=function(n){var o=this;return G().then(function(){o.a.removeItem(n)})},t.ca=function(){},t.ia=function(){};function OT(){var n={};n.Browser=xT,n.Node=PT,n.ReactNative=LT,n.Worker=MT,this.a=n[He()]}var Ih,xT={F:ou,cb:bh},PT={F:ou,cb:bh},LT={F:Zv,cb:wh},MT={F:ou,cb:wh},Yr={rd:"local",NONE:"none",td:"session"};function FT(n){var o=new T("invalid-persistence-type"),a=new T("unsupported-persistence-type");t:{for(h in Yr)if(Yr[h]==n){var h=!0;break t}h=!1}if(!h||typeof n!="string")throw o;switch(He()){case"ReactNative":if(n==="session")throw a;break;case"Node":if(n!=="none")throw a;break;case"Worker":if(n==="session"||!yh()&&n!=="none")throw a;break;default:if(!Ic()&&n!=="none")throw a}}function dg(){var n=!!(!jd(jt())&&wc()),o=Zi(),a=Ic();this.m=n,this.h=o,this.l=a,this.a={},Ih||(Ih=new OT),n=Ih;try{this.g=!mc()&&Bd()||!f.indexedDB?new n.a.F:new lg(xe()?new bo:new n.a.F)}catch{this.g=new bo,this.h=!0}try{this.i=new n.a.cb}catch{this.i=new bo}this.v=new bo,this.f=L(this.Zb,this),this.b={}}var Eh;function Io(){return Eh||(Eh=new dg),Eh}function sr(n,o){switch(o){case"session":return n.i;case"none":return n.v;default:return n.g}}function Jr(n,o){return"firebase:"+n.name+(o?":"+o:"")}function VT(n,o,a){var h=Jr(o,a),p=sr(n,o.F);return n.get(o,a).then(function(d){var g=null;try{g=zr(f.localStorage.getItem(h))}catch{}if(g&&!d)return f.localStorage.removeItem(h),n.set(o,g,a);g&&d&&p.type!="localStorage"&&f.localStorage.removeItem(h)})}t=dg.prototype,t.get=function(n,o){return sr(this,n.F).get(Jr(n,o))};function Zr(n,o,a){return a=Jr(o,a),o.F=="local"&&(n.b[a]=null),sr(n,o.F).U(a)}t.set=function(n,o,a){var h=Jr(n,a),p=this,d=sr(this,n.F);return d.set(h,o).then(function(){return d.get(h)}).then(function(g){n.F=="local"&&(p.b[h]=g)})},t.addListener=function(n,o,a){n=Jr(n,o),this.l&&(this.b[n]=f.localStorage.getItem(n)),Gn(this.a)&&(sr(this,"local").ca(this.f),this.h||(mc()||!Bd())&&f.indexedDB||!this.l||UT(this)),this.a[n]||(this.a[n]=[]),this.a[n].push(a)},t.removeListener=function(n,o,a){n=Jr(n,o),this.a[n]&&(Re(this.a[n],function(h){return h==a}),this.a[n].length==0&&delete this.a[n]),Gn(this.a)&&(sr(this,"local").ia(this.f),Th(this))};function UT(n){Th(n),n.c=setInterval(function(){for(var o in n.a){var a=f.localStorage.getItem(o),h=n.b[o];a!=h&&(n.b[o]=a,a=new Wn({type:"storage",key:o,target:window,oldValue:h,newValue:a,a:!0}),n.Zb(a))}},1e3)}function Th(n){n.c&&(clearInterval(n.c),n.c=null)}t.Zb=function(n){if(n&&n.g){var o=n.a.key;if(o==null)for(var a in this.a){var h=this.b[a];typeof h>"u"&&(h=null);var p=f.localStorage.getItem(a);p!==h&&(this.b[a]=p,this.nb(a))}else if(o.indexOf("firebase:")==0&&this.a[o]){if(typeof n.a.a<"u"?sr(this,"local").ia(this.f):Th(this),this.m){if(a=f.localStorage.getItem(o),h=n.a.newValue,h!==a)h!==null?f.localStorage.setItem(o,h):f.localStorage.removeItem(o);else if(this.b[o]===h&&typeof n.a.a>"u")return}var d=this;a=function(){(typeof n.a.a<"u"||d.b[o]!==f.localStorage.getItem(o))&&(d.b[o]=f.localStorage.getItem(o),d.nb(o))},Oe&&yn&&yn==10&&f.localStorage.getItem(o)!==n.a.newValue&&n.a.newValue!==n.a.oldValue?setTimeout(a,10):a()}}else yt(n,L(this.nb,this))},t.nb=function(n){this.a[n]&&yt(this.a[n],function(o){o()})};function jT(n){this.a=n,this.b=Io()}var Sh={name:"authEvent",F:"local"};function qT(n){return n.b.get(Sh,n.a).then(function(o){return Iv(o)})}function BT(){this.a=Io()}function KT(){this.b=-1}function su(n,o){this.b=vg,this.f=f.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=n,this.h=o,this.l=f.Int32Array?new Int32Array(64):Array(64),uu===void 0&&(f.Int32Array?uu=new Int32Array(yg):uu=yg),this.reset()}var uu;$(su,KT);for(var vg=64,GT=vg-1,gg=[],_h=0;_h<GT;_h++)gg[_h]=0;var mg=Ga(128,gg);su.prototype.reset=function(){this.g=this.c=0,this.a=f.Int32Array?new Int32Array(this.h):Kn(this.h)};function Ah(n){for(var o=n.f,a=n.l,h=0,p=0;p<o.length;)a[h++]=o[p]<<24|o[p+1]<<16|o[p+2]<<8|o[p+3],p=4*h;for(o=16;64>o;o++){p=a[o-15]|0,h=a[o-2]|0;var d=(a[o-16]|0)+((p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3)|0,g=(a[o-7]|0)+((h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10)|0;a[o]=d+g|0}h=n.a[0]|0,p=n.a[1]|0;var b=n.a[2]|0,A=n.a[3]|0,D=n.a[4]|0,W=n.a[5]|0,ct=n.a[6]|0;for(d=n.a[7]|0,o=0;64>o;o++){var ot=((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+(h&p^h&b^p&b)|0;g=D&W^~D&ct,d=d+((D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7))|0,g=g+(uu[o]|0)|0,g=d+(g+(a[o]|0)|0)|0,d=ct,ct=W,W=D,D=A+g|0,A=b,b=p,p=h,h=g+ot|0}n.a[0]=n.a[0]+h|0,n.a[1]=n.a[1]+p|0,n.a[2]=n.a[2]+b|0,n.a[3]=n.a[3]+A|0,n.a[4]=n.a[4]+D|0,n.a[5]=n.a[5]+W|0,n.a[6]=n.a[6]+ct|0,n.a[7]=n.a[7]+d|0}function Nh(n,o,a){a===void 0&&(a=o.length);var h=0,p=n.c;if(typeof o=="string")for(;h<a;)n.f[p++]=o.charCodeAt(h++),p==n.b&&(Ah(n),p=0);else if(E(o))for(;h<a;){var d=o[h++];if(!(typeof d=="number"&&0<=d&&255>=d&&d==(d|0)))throw Error("message must be a byte array");n.f[p++]=d,p==n.b&&(Ah(n),p=0)}else throw Error("message must be string or array");n.c=p,n.g+=a}var yg=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function wg(){su.call(this,8,HT)}$(wg,su);var HT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bg(n,o,a,h,p,d){this.v=n,this.i=o,this.l=a,this.m=h||null,this.u=p||null,this.s=d,this.h=o+":"+a,this.C=new BT,this.g=new jT(this.h),this.f=null,this.b=[],this.a=this.c=null}function au(n){return new T("invalid-cordova-configuration",n)}t=bg.prototype,t.ma=function(){return this.Ia?this.Ia:this.Ia=VI().then(function(){if(typeof gt("universalLinks.subscribe",f)!="function")throw au("cordova-universal-links-plugin-fix is not installed");if(typeof gt("BuildInfo.packageName",f)>"u")throw au("cordova-plugin-buildinfo is not installed");if(typeof gt("cordova.plugins.browsertab.openUrl",f)!="function")throw au("cordova-plugin-browsertab is not installed");if(typeof gt("cordova.InAppBrowser.open",f)!="function")throw au("cordova-plugin-inappbrowser is not installed")},function(){throw new T("cordova-not-ready")})};function zT(){for(var n=20,o=[];0<n;)o.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return o.join("")}function WT(n){var o=new wg;Nh(o,n),n=[];var a=8*o.g;56>o.c?Nh(o,mg,56-o.c):Nh(o,mg,o.b-(o.c-56));for(var h=63;56<=h;h--)o.f[h]=a&255,a/=256;for(Ah(o),h=a=0;h<o.i;h++)for(var p=24;0<=p;p-=8)n[a++]=o.a[h]>>p&255;return iE(n)}t.Pb=function(n,o){return o(new T("operation-not-supported-in-this-environment")),G()},t.Nb=function(){return vt(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(n,o,a,h){if(this.c)return vt(new T("redirect-operation-pending"));var p=this,d=f.document,g=null,b=null,A=null,D=null;return this.c=G().then(function(){return Kc(o),Eg(p)}).then(function(){return $T(p,n,o,a,h)}).then(function(){return new tt(function(W,ct){b=function(){var ot=gt("cordova.plugins.browsertab.close",f);return W(),typeof ot=="function"&&ot(),p.a&&typeof p.a.close=="function"&&(p.a.close(),p.a=null),!1},p.Ea(b),A=function(){g||(g=jr(2e3).then(function(){ct(new T("redirect-cancelled-by-user"))}))},D=function(){Ec()&&A()},d.addEventListener("resume",A,!1),jt().toLowerCase().match(/android/)||d.addEventListener("visibilitychange",D,!1)}).o(function(W){return kh(p).then(function(){throw W})})}).oa(function(){A&&d.removeEventListener("resume",A,!1),D&&d.removeEventListener("visibilitychange",D,!1),g&&g.cancel(),b&&p.Ta(b),p.c=null})};function $T(n,o,a,h,p){var d=zT(),g=new Pe(o,h,null,d,new T("no-auth-event"),null,p),b=gt("BuildInfo.packageName",f);if(typeof b!="string")throw new T("invalid-cordova-configuration");var A=gt("BuildInfo.displayName",f),D={};if(jt().toLowerCase().match(/iphone|ipad|ipod/))D.ibi=b;else if(jt().toLowerCase().match(/android/))D.apn=b;else return vt(new T("operation-not-supported-in-this-environment"));A&&(D.appDisplayName=A),d=WT(d),D.sessionId=d;var W=mo(n.v,n.i,n.l,o,a,null,h,n.m,D,n.u,p,n.s);return n.ma().then(function(){var ct=n.h;return n.C.a.set(Sh,g.w(),ct)}).then(function(){var ct=gt("cordova.plugins.browsertab.isAvailable",f);if(typeof ct!="function")throw new T("invalid-cordova-configuration");var ot=null;ct(function(Ft){if(Ft){if(ot=gt("cordova.plugins.browsertab.openUrl",f),typeof ot!="function")throw new T("invalid-cordova-configuration");ot(W)}else{if(ot=gt("cordova.InAppBrowser.open",f),typeof ot!="function")throw new T("invalid-cordova-configuration");Ft=jt(),n.a=ot(W,Ft.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||Ft.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function Ig(n,o){for(var a=0;a<n.b.length;a++)try{n.b[a](o)}catch{}}function Eg(n){return n.f||(n.f=n.ma().then(function(){return new tt(function(o){function a(h){return o(h),n.Ta(a),!1}n.Ea(a),QT(n)})})),n.f}function kh(n){var o=null;return qT(n.g).then(function(a){return o=a,a=n.g,Zr(a.b,Sh,a.a)}).then(function(){return o})}function QT(n){function o(g){h=!0,p&&p.cancel(),kh(n).then(function(b){var A=a;if(b&&g&&g.url){var D=null;A=pv(g.url),A.indexOf("/__/auth/callback")!=-1&&(D=ce(A),D=zr(ke(D,"firebaseError")||null),D=(D=typeof D=="object"?ji(D):null)?new Pe(b.c,b.b,null,null,D,null,b.T()):new Pe(b.c,b.b,A,b.f,null,null,b.T())),A=D||a}Ig(n,A)})}var a=new Pe("unknown",null,null,null,new T("no-auth-event")),h=!1,p=jr(500).then(function(){return kh(n).then(function(){h||Ig(n,a)})}),d=f.handleOpenURL;f.handleOpenURL=function(g){if(g.toLowerCase().indexOf(gt("BuildInfo.packageName",f).toLowerCase()+"://")==0&&o({url:g}),typeof d=="function")try{d(g)}catch(b){console.error(b)}},Gc||(Gc=new fE),pE(o)}t.Ea=function(n){this.b.push(n),Eg(this).o(function(o){o.code==="auth/invalid-cordova-configuration"&&(o=new Pe("unknown",null,null,null,new T("no-auth-event")),n(o))})},t.Ta=function(n){Re(this.b,function(o){return o==n})};function XT(n){this.a=n,this.b=Io()}var Dh={name:"pendingRedirect",F:"session"};function YT(n){return n.b.set(Dh,"pending",n.a)}function Ch(n){return Zr(n.b,Dh,n.a)}function JT(n){return n.b.get(Dh,n.a).then(function(o){return o=="pending"})}function cu(n,o,a,h){this.i={},this.u=0,this.D=n,this.v=o,this.m=a,this.J=h,this.h=[],this.f=!1,this.l=L(this.s,this),this.b=new lu,this.C=new Og,this.g=new XT(Dg(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Tg(this.D,this.v,this.m,Ki,this.J)}function Tg(n,o,a,h,p){var d=Y.SDK_VERSION||null;return yc()?new bg(n,o,a,d,h,p):new Qv(n,o,a,d,h,p)}cu.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Tg(this.D,this.v,this.m,null,this.J),this.i={}};function Sg(n){n.f||(n.f=!0,n.a.Ea(n.l));var o=n.a;return n.a.ma().o(function(a){throw n.a==o&&n.reset(),a})}function _g(n){n.a.Yb()&&Sg(n).o(function(o){var a=new Pe("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Oh(o)&&n.s(a)}),n.a.Ub()||Cg(n.b)}function hu(n,o){rn(n.h,o)||n.h.push(o),n.f||JT(n.g).then(function(a){a?Ch(n.g).then(function(){Sg(n).o(function(h){var p=new Pe("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Oh(h)&&n.s(p)})}):_g(n)}).o(function(){_g(n)})}function Rh(n,o){Re(n.h,function(a){return a==o})}cu.prototype.s=function(n){if(!n)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),n&&n.getUid()&&this.i.hasOwnProperty(n.getUid()))return!1;for(var o=!1,a=0;a<this.h.length;a++){var h=this.h[a];if(h.Gb(n.c,n.b)){(o=this.c[n.c])&&(o.h(n,h),n&&(n.f||n.b)&&(this.i[n.getUid()]=!0,this.u=Date.now())),o=!0;break}}return Cg(this.b),o};var ZT=new In(2e3,1e4),tS=new In(3e4,6e4);cu.prototype.ra=function(){return this.b.ra()};function Ag(n,o,a,h,p,d,g){return n.a.Nb(o,a,h,function(){n.f||(n.f=!0,n.a.Ea(n.l))},function(){n.reset()},p,d,g)}function Oh(n){return!!(n&&n.code=="auth/cordova-not-ready")}function Ng(n,o,a,h,p){var d;return YT(n.g).then(function(){return n.a.Ob(o,a,h,p).o(function(g){if(Oh(g))throw new T("operation-not-supported-in-this-environment");return d=g,Ch(n.g).then(function(){throw d})}).then(function(){return n.a.ac()?new tt(function(){}):Ch(n.g).then(function(){return n.ra()}).then(function(){}).o(function(){})})})}function kg(n,o,a,h,p){return n.a.Pb(h,function(d){o.na(a,null,d,p)},ZT.get())}var xh={};function Dg(n,o,a){return n=n+":"+o,a&&(n=n+":"+a.url),n}function Ph(n,o,a,h){var p=Dg(o,a,h);return xh[p]||(xh[p]=new cu(n,o,a,h)),xh[p]}function lu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}lu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},lu.prototype.h=function(n,o){if(n){this.reset(),this.g=!0;var a=n.c,h=n.b,p=n.a&&n.a.code=="auth/web-storage-unsupported",d=n.a&&n.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!p&&!d),a!="unknown"||p||d?n.a?(ur(this,!0,null,n.a),G()):o.Fa(a,h)?eS(this,n,o):vt(new T("invalid-auth-event")):(ur(this,!1,null,null),G())}else vt(new T("invalid-auth-event"))};function Cg(n){n.g||(n.g=!0,ur(n,!1,null,null))}function fu(n){n.g&&!n.i&&ur(n,!1,null,null)}function eS(n,o,a){a=a.Fa(o.c,o.b);var h=o.g,p=o.f,d=o.i,g=o.T(),b=!!o.c.match(/Redirect$/);a(h,p,g,d).then(function(A){ur(n,b,A,null)}).o(function(A){ur(n,b,null,A)})}function nS(n,o){if(n.b=function(){return vt(o)},n.c.length)for(var a=0;a<n.c.length;a++)n.c[a](o)}function Rg(n,o){if(n.b=function(){return G(o)},n.f.length)for(var a=0;a<n.f.length;a++)n.f[a](o)}function ur(n,o,a,h){o?h?nS(n,h):Rg(n,a):Rg(n,{user:null}),n.f=[],n.c=[]}lu.prototype.ra=function(){var n=this;return new tt(function(o,a){n.b?n.b().then(o,a):(n.f.push(o),n.c.push(a),rS(n))})};function rS(n){var o=new T("timeout");n.a&&n.a.cancel(),n.a=jr(tS.get()).then(function(){n.b||(n.g=!0,ur(n,!0,null,o))})}function Og(){}Og.prototype.h=function(n,o){if(n){var a=n.c,h=n.b;n.a?(o.na(n.c,null,n.a,n.b),G()):o.Fa(a,h)?iS(n,o):vt(new T("invalid-auth-event"))}else vt(new T("invalid-auth-event"))};function iS(n,o){var a=n.b,h=n.c;o.Fa(h,a)(n.g,n.f,n.T(),n.i).then(function(p){o.na(h,p,null,a)}).o(function(p){o.na(h,null,p,a)})}function xg(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(n){this.jb=n},enumerable:!1})}function Lh(n,o){this.a=o,q(this,"verificationId",n)}Lh.prototype.confirm=function(n){return n=bv(this.verificationId,n),this.a(n)};function Mh(n,o,a,h){return new un(n).gb(o,a).then(function(p){return new Lh(p,h)})}function oS(n){var o=ov(n);if(!(o&&o.exp&&o.auth_time&&o.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");te(this,{token:n,expirationTime:eo(1e3*o.exp),authTime:eo(1e3*o.auth_time),issuedAtTime:eo(1e3*o.iat),signInProvider:o.firebase&&o.firebase.sign_in_provider?o.firebase.sign_in_provider:null,signInSecondFactor:o.firebase&&o.firebase.sign_in_second_factor?o.firebase.sign_in_second_factor:null,claims:o})}function Fh(n,o,a){var h=o&&o[Lg];if(!h)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=n,this.f=mn(o),this.g=a,this.c=new qs(null,h),this.b=[];var p=this;yt(o[Pg]||[],function(d){(d=kc(d))&&p.b.push(d)}),q(this,"auth",this.a),q(this,"session",this.c),q(this,"hints",this.b)}var Pg="mfaInfo",Lg="mfaPendingCredential";Fh.prototype.Rc=function(n){var o=this;return n.tb(this.a.a,this.c).then(function(a){var h=mn(o.f);return delete h[Pg],delete h[Lg],se(h,a),o.g(h)})};function Vh(n,o,a,h){T.call(this,"multi-factor-auth-required",h,o),this.b=new Fh(n,o,a),q(this,"resolver",this.b)}$(Vh,T);function Mg(n,o,a){if(n&&N(n.serverResponse)&&n.code==="auth/multi-factor-auth-required")try{return new Vh(o,n.serverResponse,a,n.message)}catch{}return null}function Fg(){}Fg.prototype.tb=function(n,o,a){return o.type==oo?sS(this,n,o,a):uS(this,n,o)};function sS(n,o,a,h){return a.Ha().then(function(p){return p={idToken:p},typeof h<"u"&&(p.displayName=h),se(p,{phoneVerificationInfo:so(n.a)}),nt(o,QE,p)})}function uS(n,o,a){return a.Ha().then(function(h){return h={mfaPendingCredential:h},se(h,{phoneVerificationInfo:so(n.a)}),nt(o,XE,h)})}function Uh(n){q(this,"factorId",n.fa),this.a=n}$(Uh,Fg);function Vg(n){if(Uh.call(this,n),this.a.fa!=un.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}$(Vg,Uh);function ti(n,o){ae.call(this,n);for(var a in o)this[a]=o[a]}$(ti,ae);function jh(n,o){this.a=n,this.b=[],this.c=L(this.yc,this),Ne(this.a,"userReloaded",this.c);var a=[];o&&o.multiFactor&&o.multiFactor.enrolledFactors&&yt(o.multiFactor.enrolledFactors,function(h){var p=null,d={};if(h){h.uid&&(d[Cc]=h.uid),h.displayName&&(d[Gd]=h.displayName),h.enrollmentTime&&(d[Dc]=new Date(h.enrollmentTime).toISOString()),h.phoneNumber&&(d[Rc]=h.phoneNumber);try{p=new no(d)}catch{}h=p}else h=null;h&&a.push(h)}),pu(this,a)}function aS(n){var o=[];return yt(n.mfaInfo||[],function(a){(a=kc(a))&&o.push(a)}),o}t=jh.prototype,t.yc=function(n){pu(this,aS(n.hd))};function pu(n,o){n.b=o,q(n,"enrolledFactors",o)}t.Sb=function(){return this.a.I().then(function(n){return new qs(n,null)})},t.fc=function(n,o){var a=this,h=this.a.a;return this.Sb().then(function(p){return n.tb(h,p,o)}).then(function(p){return $e(a.a,p),a.a.reload()})},t.bd=function(n){var o=this,a=typeof n=="string"?n:n.uid,h=this.a.a;return this.a.I().then(function(p){return nt(h,gT,{idToken:p,mfaEnrollmentId:a})}).then(function(p){var d=Ub(o.b,function(g){return g.uid!=a});return pu(o,d),$e(o.a,p),o.a.reload().o(function(g){if(g.code!="auth/user-token-expired")throw g})})},t.w=function(){return{multiFactor:{enrolledFactors:ys(this.b,function(n){return n.w()})}}};function qh(n,o,a){if(this.h=n,this.i=o,this.g=a,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}qh.prototype.start=function(){this.a=this.c,Bh(this,!0)};function cS(n,o){return o?(n.a=n.c,n.g()):(o=n.a,n.a*=2,n.a>n.f&&(n.a=n.f),o)}function Bh(n,o){n.stop(),n.b=jr(cS(n,o)).then(function(){return jI()}).then(function(){return n.h()}).then(function(){Bh(n,!0)}).o(function(a){n.i(a)&&Bh(n,!1)})}qh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Kh(n){this.f=n,this.b=this.a=null,this.c=Date.now()}Kh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function Ug(n,o){typeof o>"u"&&(n.b?(o=n.b,o=o.a-o.g):o=0),n.c=Date.now()+1e3*o}function jg(n,o){n.b=Us(o[Me]||""),n.a=o.refreshToken,o=o.expiresIn,Ug(n,typeof o<"u"?Number(o):void 0)}function hS(n,o){n.b=o.b,n.a=o.a,n.c=o.c}function lS(n,o){return xE(n.f,o).then(function(a){return n.b=Us(a.access_token),n.a=a.refresh_token,Ug(n,a.expires_in),{accessToken:n.b.toString(),refreshToken:n.a}}).o(function(a){throw a.code=="auth/user-token-expired"&&(n.a=null),a})}Kh.prototype.getToken=function(n){return n=!!n,this.b&&!this.a?vt(new T("user-token-expired")):n||!this.b||Date.now()>this.c-3e4?this.a?lS(this,{grant_type:"refresh_token",refresh_token:this.a}):G(null):G({accessToken:this.b.toString(),refreshToken:this.a})};function du(n,o){this.a=n||null,this.b=o||null,te(this,{lastSignInTime:eo(o||null),creationTime:eo(n||null)})}function fS(n){return new du(n.a,n.b)}du.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function pS(n,o,a,h,p,d){te(this,{uid:n,displayName:h||null,photoURL:p||null,email:a||null,phoneNumber:d||null,providerId:o})}function we(n,o,a){this.N=[],this.l=n.apiKey,this.m=n.appName,this.s=n.authDomain||null;var h=Y.SDK_VERSION?Gr(Y.SDK_VERSION):null;this.a=new Le(this.l,Bi(Ki),h),(this.u=n.emulatorConfig||null)&&nu(this.a,this.u),this.h=new Kh(this.a),Xh(this,o[Me]),jg(this.h,o),q(this,"refreshToken",this.h.a),Bg(this,a||{}),Zt.call(this),this.P=!1,this.s&&Yn()&&(this.b=Ph(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=dS(this),this.ba=L(this.ib,this);var p=this;this.za=null,this.Pa=function(d){p.xa(d.h)},this.qa=null,this.Ba=function(d){Gh(p,d.c)},this.$=null,this.aa=[],this.Oa=function(d){Eo(p,d.f)},this.ja=null,this.S=new jh(this,a),q(this,"multiFactor",this.S)}$(we,Zt),we.prototype.xa=function(n){this.za=n,Mv(this.a,n)};function Gh(n,o){n.u=o,nu(n.a,o),n.b&&(o=n.b,n.b=Ph(n.s,n.l,n.m,n.u),n.P&&(Rh(o,n),hu(n.b,n)))}we.prototype.la=function(){return this.za};function Hh(n,o){n.qa&&me(n.qa,"languageCodeChanged",n.Pa),(n.qa=o)&&Ne(o,"languageCodeChanged",n.Pa)}function zh(n,o){n.$&&me(n.$,"emulatorConfigChanged",n.Ba),(n.$=o)&&Ne(o,"emulatorConfigChanged",n.Ba)}function Eo(n,o){n.aa=o,Fv(n.a,Y.SDK_VERSION?Gr(Y.SDK_VERSION,n.aa):null)}we.prototype.Ga=function(){return Kn(this.aa)};function Wh(n,o){n.ja&&me(n.ja,"frameworkChanged",n.Oa),(n.ja=o)&&Ne(o,"frameworkChanged",n.Oa)}we.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())};function $h(n){try{return Y.app(n.m).auth()}catch{throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+n.m+"'!")}}function dS(n){return new qh(function(){return n.I(!0)},function(o){return!!(o&&o.code=="auth/network-request-failed")},function(){var o=n.h.c-Date.now()-3e5;return 0<o?o:0})}function qg(n){n.J||n.D.b||(n.D.start(),me(n,"tokenChanged",n.ba),Ne(n,"tokenChanged",n.ba))}function Qh(n){me(n,"tokenChanged",n.ba),n.D.stop()}function Xh(n,o){n.Aa=o,q(n,"_lat",o)}function vS(n,o){Re(n.W,function(a){return a==o})}function ar(n){for(var o=[],a=0;a<n.W.length;a++)o.push(n.W[a](n));return od(o).then(function(){return n})}function To(n){n.b&&!n.P&&(n.P=!0,hu(n.b,n))}function Bg(n,o){te(n,{uid:o.uid,displayName:o.displayName||null,photoURL:o.photoURL||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,isAnonymous:o.isAnonymous||!1,tenantId:o.tenantId||null,metadata:new du(o.createdAt,o.lastLoginAt),providerData:[]}),n.a.b=n.tenantId}q(we.prototype,"providerId","firebase");function Kg(){}function Yh(n){return G().then(function(){if(n.J)throw new T("app-deleted")})}function Jh(n){return ys(n.providerData,function(o){return o.providerId})}function Zh(n,o){o&&(Gg(n,o.providerId),n.providerData.push(o))}function Gg(n,o){Re(n.providerData,function(a){return a.providerId==o})}function Sn(n,o,a){(o!="uid"||a)&&n.hasOwnProperty(o)&&q(n,o,a)}function vu(n,o){n!=o&&(te(n,{uid:o.uid,displayName:o.displayName,photoURL:o.photoURL,email:o.email,emailVerified:o.emailVerified,phoneNumber:o.phoneNumber,isAnonymous:o.isAnonymous,tenantId:o.tenantId,providerData:[]}),o.metadata?q(n,"metadata",fS(o.metadata)):q(n,"metadata",new du),yt(o.providerData,function(a){Zh(n,a)}),hS(n.h,o.h),q(n,"refreshToken",n.h.a),pu(n.S,o.S.b))}t=we.prototype,t.reload=function(){var n=this;return Pt(this,Yh(this).then(function(){return tl(n).then(function(){return ar(n)}).then(Kg)}))};function tl(n){return n.I().then(function(o){var a=n.isAnonymous;return gS(n,o).then(function(){return a||Sn(n,"isAnonymous",!1),o})})}t.oc=function(n){return this.I(n).then(function(o){return new oS(o)})},t.I=function(n){var o=this;return Pt(this,Yh(this).then(function(){return o.h.getToken(n)}).then(function(a){if(!a)throw new T("internal-error");return a.accessToken!=o.Aa&&(Xh(o,a.accessToken),o.dispatchEvent(new ti("tokenChanged"))),Sn(o,"refreshToken",a.refreshToken),a.accessToken}))};function $e(n,o){o[Me]&&n.Aa!=o[Me]&&(jg(n.h,o),n.dispatchEvent(new ti("tokenChanged")),Xh(n,o[Me]),Sn(n,"refreshToken",n.h.a))}function gS(n,o){return nt(n.a,YE,{idToken:o}).then(L(n.Kc,n))}t.Kc=function(n){if(n=n.users,!n||!n.length)throw new T("internal-error");n=n[0],Bg(this,{uid:n.localId,displayName:n.displayName,photoURL:n.photoUrl,email:n.email,emailVerified:!!n.emailVerified,phoneNumber:n.phoneNumber,lastLoginAt:n.lastLoginAt,createdAt:n.createdAt,tenantId:n.tenantId});for(var o=mS(n),a=0;a<o.length;a++)Zh(this,o[a]);Sn(this,"isAnonymous",!(this.email&&n.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new ti("userReloaded",{hd:n}))};function mS(n){return(n=n.providerUserInfo)&&n.length?ys(n,function(o){return new pS(o.rawId,o.providerId,o.email,o.displayName,o.photoUrl,o.phoneNumber)}):[]}t.Lc=function(n){return Tc("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(n)},t.ub=function(n){var o=this,a=null;return Pt(this,n.c(this.a,this.uid).then(function(h){return $e(o,h),a=So(o,h,"reauthenticate"),o.i=null,o.reload()}).then(function(){return a}),!0)};function gu(n,o){return tl(n).then(function(){if(rn(Jh(n),o))return ar(n).then(function(){throw new T("provider-already-linked")})})}t.Cc=function(n){return Tc("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(n)},t.rb=function(n){var o=this,a=null;return Pt(this,gu(this,n.providerId).then(function(){return o.I()}).then(function(h){return n.b(o.a,h)}).then(function(h){return a=So(o,h,"link"),Hg(o,h)}).then(function(){return a}))},t.Dc=function(n,o){var a=this;return Pt(this,gu(this,"phone").then(function(){return Mh($h(a),n,o,L(a.rb,a))}))},t.Mc=function(n,o){var a=this;return Pt(this,G().then(function(){return Mh($h(a),n,o,L(a.ub,a))}),!0)};function So(n,o,a){var h=Bc(o);return o=uv(o),ze({user:n,credential:h,additionalUserInfo:o,operationType:a})}function Hg(n,o){return $e(n,o),n.reload().then(function(){return n})}t.Cb=function(n){var o=this;return Pt(this,this.I().then(function(a){return o.a.Cb(a,n)}).then(function(a){return $e(o,a),o.reload()}))},t.ed=function(n){var o=this;return Pt(this,this.I().then(function(a){return n.b(o.a,a)}).then(function(a){return $e(o,a),o.reload()}))},t.Db=function(n){var o=this;return Pt(this,this.I().then(function(a){return o.a.Db(a,n)}).then(function(a){return $e(o,a),o.reload()}))},t.Eb=function(n){if(n.displayName===void 0&&n.photoURL===void 0)return Yh(this);var o=this;return Pt(this,this.I().then(function(a){return o.a.Eb(a,{displayName:n.displayName,photoUrl:n.photoURL})}).then(function(a){return $e(o,a),Sn(o,"displayName",a.displayName||null),Sn(o,"photoURL",a.photoUrl||null),yt(o.providerData,function(h){h.providerId==="password"&&(q(h,"displayName",o.displayName),q(h,"photoURL",o.photoURL))}),ar(o)}).then(Kg))},t.cd=function(n){var o=this;return Pt(this,tl(this).then(function(a){return rn(Jh(o),n)?jE(o.a,a,[n]).then(function(h){var p={};return yt(h.providerUserInfo||[],function(d){p[d.providerId]=!0}),yt(Jh(o),function(d){p[d]||Gg(o,d)}),p[un.PROVIDER_ID]||q(o,"phoneNumber",null),ar(o)}):ar(o).then(function(){throw new T("no-such-provider")})}))},t.delete=function(){var n=this;return Pt(this,this.I().then(function(o){return nt(n.a,HE,{idToken:o})}).then(function(){n.dispatchEvent(new ti("userDeleted"))})).then(function(){for(var o=0;o<n.N.length;o++)n.N[o].cancel("app-deleted");Hh(n,null),zh(n,null),Wh(n,null),n.N=[],n.J=!0,Qh(n),q(n,"refreshToken",null),n.b&&Rh(n.b,n)})},t.Gb=function(n,o){return!!(n=="linkViaPopup"&&(this.g||null)==o&&this.f||n=="reauthViaPopup"&&(this.g||null)==o&&this.f||n=="linkViaRedirect"&&(this.ga||null)==o||n=="reauthViaRedirect"&&(this.ga||null)==o)},t.na=function(n,o,a,h){n!="linkViaPopup"&&n!="reauthViaPopup"||h!=(this.g||null)||(a&&this.C?this.C(a):o&&!a&&this.f&&this.f(o),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(n,o){return n=="linkViaPopup"&&o==(this.g||null)?L(this.Lb,this):n=="reauthViaPopup"&&o==(this.g||null)?L(this.Mb,this):n=="linkViaRedirect"&&(this.ga||null)==o?L(this.Lb,this):n=="reauthViaRedirect"&&(this.ga||null)==o?L(this.Mb,this):null},t.Ec=function(n){var o=this;return zg(this,"linkViaPopup",n,function(){return gu(o,n.providerId).then(function(){return ar(o)})},!1)},t.Nc=function(n){return zg(this,"reauthViaPopup",n,function(){return G()},!0)};function zg(n,o,a,h,p){if(!Yn())return vt(new T("operation-not-supported-in-this-environment"));if(n.i&&!p)return vt(n.i);var d=Mc(a.providerId),g=Jn(n.uid+":::"),b=null;(!Zi()||wc())&&n.s&&a.isOAuthProvider&&(b=mo(n.s,n.l,n.m,o,a,null,g,Y.SDK_VERSION||null,null,null,n.tenantId,n.u));var A=Ld(b,d&&d.va,d&&d.ua);return h=h().then(function(){if($g(n),!p)return n.I().then(function(){})}).then(function(){return Ag(n.b,A,o,a,g,!!b,n.tenantId)}).then(function(){return new tt(function(D,W){n.na(o,null,new T("cancelled-popup-request"),n.g||null),n.f=D,n.C=W,n.g=g,n.c=kg(n.b,n,o,A,g)})}).then(function(D){return A&&Xn(A),D?ze(D):null}).o(function(D){throw A&&Xn(A),D}),Pt(n,h,p)}t.Fc=function(n){var o=this;return Wg(this,"linkViaRedirect",n,function(){return gu(o,n.providerId)},!1)},t.Oc=function(n){return Wg(this,"reauthViaRedirect",n,function(){return G()},!0)};function Wg(n,o,a,h,p){if(!Yn())return vt(new T("operation-not-supported-in-this-environment"));if(n.i&&!p)return vt(n.i);var d=null,g=Jn(n.uid+":::");return h=h().then(function(){if($g(n),!p)return n.I().then(function(){})}).then(function(){return n.ga=g,ar(n)}).then(function(b){return n.ha&&(b=n.ha,b=b.b.set(el,n.w(),b.a)),b}).then(function(){return Ng(n.b,o,a,g,n.tenantId)}).o(function(b){if(d=b,n.ha)return Xg(n.ha);throw d}).then(function(){if(d)throw d}),Pt(n,h,p)}function $g(n){if(!n.b||!n.P)throw n.b&&!n.P?new T("internal-error"):new T("auth-domain-config-required")}t.Lb=function(n,o,a,h){var p=this;this.c&&(this.c.cancel(),this.c=null);var d=null;return a=this.I().then(function(g){return ch(p.a,{requestUri:n,postBody:h,sessionId:o,idToken:g})}).then(function(g){return d=So(p,g,"link"),Hg(p,g)}).then(function(){return d}),Pt(this,a)},t.Mb=function(n,o,a,h){var p=this;this.c&&(this.c.cancel(),this.c=null);var d=null,g=G().then(function(){return $r(hh(p.a,{requestUri:n,sessionId:o,postBody:h,tenantId:a}),p.uid)}).then(function(b){return d=So(p,b,"reauthenticate"),$e(p,b),p.i=null,p.reload()}).then(function(){return d});return Pt(this,g,!0)},t.vb=function(n){var o=this,a=null;return Pt(this,this.I().then(function(h){return a=h,typeof n>"u"||Gn(n)?{}:Fs(new Ms(n))}).then(function(h){return o.a.vb(a,h)}).then(function(h){if(o.email!=h)return o.reload()}).then(function(){}))},t.Fb=function(n,o){var a=this,h=null;return Pt(this,this.I().then(function(p){return h=p,typeof o>"u"||Gn(o)?{}:Fs(new Ms(o))}).then(function(p){return a.a.Fb(h,n,p)}).then(function(p){if(a.email!=p)return a.reload()}).then(function(){}))};function Pt(n,o,a){var h=yS(n,o,a);return n.N.push(h),h.oa(function(){ws(n.N,h)}),h.o(function(p){var d=null;throw p&&p.code==="auth/multi-factor-auth-required"&&(d=Mg(p.w(),$h(n),L(n.jc,n))),d||p})}t.jc=function(n){var o=null,a=this;return n=$r(G(n),a.uid).then(function(h){return o=So(a,h,"reauthenticate"),$e(a,h),a.i=null,a.reload()}).then(function(){return o}),Pt(this,n,!0)};function yS(n,o,a){return n.i&&!a?(o.cancel(),vt(n.i)):o.o(function(h){throw!h||h.code!="auth/user-disabled"&&h.code!="auth/user-token-expired"||(n.i||n.dispatchEvent(new ti("userInvalidated")),n.i=h),h})}t.toJSON=function(){return this.w()},t.w=function(){var n={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&se(n,this.metadata.w()),yt(this.providerData,function(o){n.providerData.push(KI(o))}),se(n,this.S.w()),n};function Qg(n){if(!n.apiKey)return null;var o={apiKey:n.apiKey,authDomain:n.authDomain,appName:n.appName,emulatorConfig:n.emulatorConfig},a={};if(n.stsTokenManager&&n.stsTokenManager.accessToken){a[Me]=n.stsTokenManager.accessToken,a.refreshToken=n.stsTokenManager.refreshToken||null;var h=n.stsTokenManager.expirationTime;h&&(a.expiresIn=(h-Date.now())/1e3)}else return null;var p=new we(o,a,n);return n.providerData&&yt(n.providerData,function(d){d&&Zh(p,ze(d))}),n.redirectEventId&&(p.ga=n.redirectEventId),p}function wS(n,o,a,h){var p=new we(n,o);return a&&(p.ha=a),h&&Eo(p,h),p.reload().then(function(){return p})}function bS(n,o,a,h){var p=n.h,d={};return d[Me]=p.b&&p.b.toString(),d.refreshToken=p.a,o=new we(o||{apiKey:n.l,authDomain:n.s,appName:n.m},d),a&&(o.ha=a),h&&Eo(o,h),vu(o,n),o}function IS(n){this.a=n,this.b=Io()}var el={name:"redirectUser",F:"session"};function Xg(n){return Zr(n.b,el,n.a)}function ES(n,o){return n.b.get(el,n.a).then(function(a){return a&&o&&(a.authDomain=o),Qg(a||{})})}function nl(n){this.a=n,this.b=Io(),this.c=null,this.f=TS(this),this.b.addListener(Qe("local"),this.a,L(this.g,this))}nl.prototype.g=function(){var n=this,o=Qe("local");ei(this,function(){return G().then(function(){return n.c&&n.c.F!="local"?n.b.get(o,n.a):null}).then(function(a){if(a)return rl(n,"local").then(function(){n.c=o})})})};function rl(n,o){var a=[],h;for(h in Yr)Yr[h]!==o&&a.push(Zr(n.b,Qe(Yr[h]),n.a));return a.push(Zr(n.b,il,n.a)),fI(a)}function TS(n){var o=Qe("local"),a=Qe("session"),h=Qe("none");return VT(n.b,o,n.a).then(function(){return n.b.get(a,n.a)}).then(function(p){return p?a:n.b.get(h,n.a).then(function(d){return d?h:n.b.get(o,n.a).then(function(g){return g?o:n.b.get(il,n.a).then(function(b){return b?Qe(b):o})})})}).then(function(p){return n.c=p,rl(n,p.F)}).o(function(){n.c||(n.c=o)})}var il={name:"persistence",F:"session"};function Qe(n){return{name:"authUser",F:n}}nl.prototype.yb=function(n){var o=null,a=this;return FT(n),ei(this,function(){return n!=a.c.F?a.b.get(a.c,a.a).then(function(h){return o=h,rl(a,n)}).then(function(){if(a.c=Qe(n),o)return a.b.set(a.c,o,a.a)}):G()})};function SS(n){return ei(n,function(){return n.b.set(il,n.c.F,n.a)})}function Yg(n,o){return ei(n,function(){return n.b.set(n.c,o.w(),n.a)})}function Jg(n){return ei(n,function(){return Zr(n.b,n.c,n.a)})}function Zg(n,o,a){return ei(n,function(){return n.b.get(n.c,n.a).then(function(h){return h&&o&&(h.authDomain=o),h&&a&&(h.emulatorConfig=a),Qg(h||{})})})}function ei(n,o){return n.f=n.f.then(o,o),n.f}function Fe(n){if(this.l=!1,q(this,"settings",new xg),q(this,"app",n),ht(this).options&&ht(this).options.apiKey)n=Y.SDK_VERSION?Gr(Y.SDK_VERSION):null,this.a=new Le(ht(this).options&&ht(this).options.apiKey,Bi(Ki),n);else throw new T("invalid-api-key");this.P=[],this.s=[],this.N=[],this.Pa=Y.INTERNAL.createSubscribe(L(this.zc,this)),this.W=void 0,this.ib=Y.INTERNAL.createSubscribe(L(this.Ac,this)),ni(this,null),this.i=new nl(ht(this).options.apiKey+":"+ht(this).name),this.D=new IS(ht(this).options.apiKey+":"+ht(this).name),this.$=It(this,CS(this)),this.h=It(this,RS(this)),this.ba=!1,this.ja=L(this.Zc,this),this.Ba=L(this.da,this),this.qa=L(this.mc,this),this.za=L(this.wc,this),this.Aa=L(this.xc,this),this.b=null,NS(this),this.INTERNAL={},this.INTERNAL.delete=L(this.delete,this),this.INTERNAL.logFramework=L(this.Gc,this),this.u=0,Zt.call(this),AS(this),this.J=[],this.R=null}$(Fe,Zt);function tm(n){ae.call(this,"languageCodeChanged"),this.h=n}$(tm,ae);function em(n){ae.call(this,"emulatorConfigChanged"),this.c=n}$(em,ae);function nm(n){ae.call(this,"frameworkChanged"),this.f=n}$(nm,ae),t=Fe.prototype,t.yb=function(n){return n=this.i.yb(n),It(this,n)},t.xa=function(n){this.aa===n||this.l||(this.aa=n,Mv(this.a,this.aa),this.dispatchEvent(new tm(this.la())))},t.la=function(){return this.aa},t.fd=function(){var n=f.navigator;this.xa(n&&(n.languages&&n.languages[0]||n.language||n.userLanguage)||null)},t.gd=function(n,o){if(!this.R){if(!/^https?:\/\//.test(n))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");o=o?!!o.disableWarnings:!1,_S(o),this.R={url:n,ec:o},this.settings.jb=!0,nu(this.a,this.R),this.dispatchEvent(new em(this.R))}};function _S(n){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),f.document&&!n&&xs().then(function(){var o=f.document.createElement("div");o.innerText="Running in emulator mode. Do not use with production credentials.",o.style.position="fixed",o.style.width="100%",o.style.backgroundColor="#ffffff",o.style.border=".1em solid #000000",o.style.color="#b50000",o.style.bottom="0px",o.style.left="0px",o.style.margin="0px",o.style.zIndex=1e4,o.style.textAlign="center",o.classList.add("firebase-emulator-warning"),f.document.body.appendChild(o)})}t.Gc=function(n){this.J.push(n),Fv(this.a,Y.SDK_VERSION?Gr(Y.SDK_VERSION,this.J):null),this.dispatchEvent(new nm(this.J))},t.Ga=function(){return Kn(this.J)},t.zb=function(n){this.S===n||this.l||(this.S=n,this.a.b=this.S)},t.T=function(){return this.S};function AS(n){Object.defineProperty(n,"lc",{get:function(){return this.la()},set:function(o){this.xa(o)},enumerable:!1}),n.aa=null,Object.defineProperty(n,"ti",{get:function(){return this.T()},set:function(o){this.zb(o)},enumerable:!1}),n.S=null,Object.defineProperty(n,"emulatorConfig",{get:function(){if(this.R){var o=ce(this.R.url);o=ze({protocol:o.c,host:o.a,port:o.g,options:ze({disableWarnings:this.R.ec})})}else o=null;return o},enumerable:!1})}t.toJSON=function(){return{apiKey:ht(this).options.apiKey,authDomain:ht(this).options.authDomain,appName:ht(this).name,currentUser:J(this)&&J(this).w()}};function ol(n){return n.Oa||vt(new T("auth-domain-config-required"))}function NS(n){var o=ht(n).options.authDomain,a=ht(n).options.apiKey;o&&Yn()&&(n.Oa=n.$.then(function(){if(!n.l){if(n.b=Ph(o,a,ht(n).name,n.R),hu(n.b,n),J(n)&&To(J(n)),n.m){To(n.m);var h=n.m;h.xa(n.la()),Hh(h,n),h=n.m,Eo(h,n.J),Wh(h,n),h=n.m,Gh(h,n.R),zh(h,n),n.m=null}return n.b}}))}t.Gb=function(n,o){switch(n){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==o&&!!this.f;default:return!1}},t.na=function(n,o,a,h){n=="signInViaPopup"&&this.g==h&&(a&&this.C?this.C(a):o&&!a&&this.f&&this.f(o),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(n,o){return n=="signInViaRedirect"||n=="signInViaPopup"&&this.g==o&&this.f?L(this.ic,this):null},t.ic=function(n,o,a,h){var p=this,d={requestUri:n,postBody:h,sessionId:o,tenantId:a};return this.c&&(this.c.cancel(),this.c=null),p.$.then(function(){return cr(p,ah(p.a,d))})},t.Xc=function(n){if(!Yn())return vt(new T("operation-not-supported-in-this-environment"));var o=this,a=Mc(n.providerId),h=Jn(),p=null;(!Zi()||wc())&&ht(this).options.authDomain&&n.isOAuthProvider&&(p=mo(ht(this).options.authDomain,ht(this).options.apiKey,ht(this).name,"signInViaPopup",n,null,h,Y.SDK_VERSION||null,null,null,this.T(),this.R));var d=Ld(p,a&&a.va,a&&a.ua);return a=ol(this).then(function(g){return Ag(g,d,"signInViaPopup",n,h,!!p,o.T())}).then(function(){return new tt(function(g,b){o.na("signInViaPopup",null,new T("cancelled-popup-request"),o.g),o.f=g,o.C=b,o.g=h,o.c=kg(o.b,o,"signInViaPopup",d,h)})}).then(function(g){return d&&Xn(d),g?ze(g):null}).o(function(g){throw d&&Xn(d),g}),It(this,a)},t.Yc=function(n){if(!Yn())return vt(new T("operation-not-supported-in-this-environment"));var o=this,a=ol(this).then(function(){return SS(o.i)}).then(function(){return Ng(o.b,"signInViaRedirect",n,void 0,o.T())});return It(this,a)};function rm(n){if(!Yn())return vt(new T("operation-not-supported-in-this-environment"));var o=ol(n).then(function(){return n.b.ra()}).then(function(a){return a?ze(a):null});return It(n,o)}t.ra=function(){var n=this;return rm(this).then(function(o){return n.b&&fu(n.b.b),o}).o(function(o){throw n.b&&fu(n.b.b),o})},t.dd=function(n){if(!n)return vt(new T("null-user"));if(this.S!=n.tenantId)return vt(new T("tenant-id-mismatch"));var o=this,a={};a.apiKey=ht(this).options.apiKey,a.authDomain=ht(this).options.authDomain,a.appName=ht(this).name;var h=bS(n,a,o.D,o.Ga());return It(this,this.h.then(function(){if(ht(o).options.apiKey!=n.l)return h.reload()}).then(function(){return J(o)&&n.uid==J(o).uid?(vu(J(o),n),o.da(n)):(ni(o,h),To(h),o.da(h))}).then(function(){_o(o)}))};function kS(n,o){var a={};return a.apiKey=ht(n).options.apiKey,a.authDomain=ht(n).options.authDomain,a.appName=ht(n).name,n.R&&(a.emulatorConfig=n.R),n.$.then(function(){return wS(a,o,n.D,n.Ga())}).then(function(h){return J(n)&&h.uid==J(n).uid?(vu(J(n),h),n.da(h)):(ni(n,h),To(h),n.da(h))}).then(function(){_o(n)})}function ni(n,o){J(n)&&(vS(J(n),n.Ba),me(J(n),"tokenChanged",n.qa),me(J(n),"userDeleted",n.za),me(J(n),"userInvalidated",n.Aa),Qh(J(n))),o&&(o.W.push(n.Ba),Ne(o,"tokenChanged",n.qa),Ne(o,"userDeleted",n.za),Ne(o,"userInvalidated",n.Aa),0<n.u&&qg(o)),q(n,"currentUser",o),o&&(o.xa(n.la()),Hh(o,n),Eo(o,n.J),Wh(o,n),Gh(o,n.R),zh(o,n))}t.Bb=function(){var n=this,o=this.h.then(function(){return n.b&&fu(n.b.b),J(n)?(ni(n,null),Jg(n.i).then(function(){_o(n)})):G()});return It(this,o)};function DS(n){var o=ES(n.D,ht(n).options.authDomain).then(function(a){return(n.m=a)&&(a.ha=n.D),Xg(n.D)});return It(n,o)}function CS(n){var o=ht(n).options.authDomain,a=DS(n).then(function(){return Zg(n.i,o,n.R)}).then(function(h){return h?(h.ha=n.D,n.m&&(n.m.ga||null)==(h.ga||null)?h:h.reload().then(function(){return Yg(n.i,h).then(function(){return h})}).o(function(p){return p.code=="auth/network-request-failed"?h:Jg(n.i)})):null}).then(function(h){ni(n,h||null)});return It(n,a)}function RS(n){return n.$.then(function(){return rm(n)}).o(function(){}).then(function(){if(!n.l)return n.ja()}).o(function(){}).then(function(){if(!n.l){n.ba=!0;var o=n.i;o.b.addListener(Qe("local"),o.a,n.ja)}})}t.Zc=function(){var n=this;return Zg(this.i,ht(this).options.authDomain).then(function(o){if(!n.l){var a;if(a=J(n)&&o){a=J(n).uid;var h=o.uid;a=a==null||a===""||h===void 0||h===null||h===""?!1:a==h}if(a)return vu(J(n),o),J(n).I();(J(n)||o)&&(ni(n,o),o&&(To(o),o.ha=n.D),n.b&&hu(n.b,n),_o(n))}})},t.da=function(n){return Yg(this.i,n)},t.mc=function(){_o(this),this.da(J(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()};function cr(n,o){var a=null,h=null;return It(n,o.then(function(p){return a=Bc(p),h=uv(p),kS(n,p)},function(p){var d=null;throw p&&p.code==="auth/multi-factor-auth-required"&&(d=Mg(p.w(),n,L(n.kc,n))),d||p}).then(function(){return ze({user:J(n),credential:a,additionalUserInfo:h,operationType:"signIn"})}))}t.kc=function(n){var o=this;return this.h.then(function(){return cr(o,G(n))})},t.zc=function(n){var o=this;this.addAuthTokenListener(function(){n.next(J(o))})},t.Ac=function(n){var o=this;OS(this,function(){n.next(J(o))})},t.Ic=function(n,o,a){var h=this;return this.ba&&Promise.resolve().then(function(){typeof n=="function"?n(J(h)):typeof n.next=="function"&&n.next(J(h))}),this.Pa(n,o,a)},t.Hc=function(n,o,a){var h=this;return this.ba&&Promise.resolve().then(function(){h.W=h.getUid(),typeof n=="function"?n(J(h)):typeof n.next=="function"&&n.next(J(h))}),this.ib(n,o,a)},t.nc=function(n){var o=this,a=this.h.then(function(){return J(o)?J(o).I(n).then(function(h){return{accessToken:h}}):null});return It(this,a)},t.Tc=function(n){var o=this;return this.h.then(function(){return cr(o,nt(o.a,fT,{token:n}))}).then(function(a){var h=a.user;return Sn(h,"isAnonymous",!1),o.da(h),a})},t.Uc=function(n,o){var a=this;return this.h.then(function(){return cr(a,nt(a.a,zv,{email:n,password:o}))})},t.dc=function(n,o){var a=this;return this.h.then(function(){return cr(a,nt(a.a,KE,{email:n,password:o}))})},t.ab=function(n){var o=this;return this.h.then(function(){return cr(o,n.ka(o.a))})},t.Sc=function(n){return Tc("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(n)},t.Ab=function(){var n=this;return this.h.then(function(){var o=J(n);if(o&&o.isAnonymous){var a=ze({providerId:null,isNewUser:!1});return ze({user:o,credential:null,additionalUserInfo:a,operationType:"signIn"})}return cr(n,n.a.Ab()).then(function(h){var p=h.user;return Sn(p,"isAnonymous",!0),n.da(p),h})})};function ht(n){return n.app}function J(n){return n.currentUser}t.getUid=function(){return J(this)&&J(this).uid||null};function mu(n){return J(n)&&J(n)._lat||null}function _o(n){if(n.ba){for(var o=0;o<n.s.length;o++)n.s[o]&&n.s[o](mu(n));if(n.W!==n.getUid()&&n.N.length)for(n.W=n.getUid(),o=0;o<n.N.length;o++)n.N[o]&&n.N[o](mu(n))}}t.cc=function(n){this.addAuthTokenListener(n),this.u++,0<this.u&&J(this)&&qg(J(this))},t.Pc=function(n){var o=this;yt(this.s,function(a){a==n&&o.u--}),0>this.u&&(this.u=0),this.u==0&&J(this)&&Qh(J(this)),this.removeAuthTokenListener(n)},t.addAuthTokenListener=function(n){var o=this;this.s.push(n),It(this,this.h.then(function(){o.l||rn(o.s,n)&&n(mu(o))}))},t.removeAuthTokenListener=function(n){Re(this.s,function(o){return o==n})};function OS(n,o){n.N.push(o),It(n,n.h.then(function(){!n.l&&rn(n.N,o)&&n.W!==n.getUid()&&(n.W=n.getUid(),o(mu(n)))}))}t.delete=function(){this.l=!0;for(var n=0;n<this.P.length;n++)this.P[n].cancel("app-deleted");return this.P=[],this.i&&(n=this.i,n.b.removeListener(Qe("local"),n.a,this.ja)),this.b&&(Rh(this.b,this),fu(this.b.b)),Promise.resolve()};function It(n,o){return n.P.push(o),o.oa(function(){ws(n.P,o)}),o}t.hc=function(n){return It(this,PE(this.a,n))},t.Bc=function(n){return!!qc(n)},t.xb=function(n,o){var a=this;return It(this,G().then(function(){var h=new Ms(o);if(!h.c)throw new T("argument-error",Pc+" must be true when sending sign in link to email");return Fs(h)}).then(function(h){return a.a.xb(n,h)}).then(function(){}))},t.jd=function(n){return this.Sa(n).then(function(o){return o.data.email})},t.ob=function(n,o){return It(this,this.a.ob(n,o).then(function(){}))},t.Sa=function(n){return It(this,this.a.Sa(n).then(function(o){return new HI(o)}))},t.kb=function(n){return It(this,this.a.kb(n).then(function(){}))},t.wb=function(n,o){var a=this;return It(this,G().then(function(){return typeof o>"u"||Gn(o)?{}:Fs(new Ms(o))}).then(function(h){return a.a.wb(n,h)}).then(function(){}))},t.Wc=function(n,o){return It(this,Mh(this,n,o,L(this.ab,this)))},t.Vc=function(n,o){var a=this;return It(this,G().then(function(){var h=o||Ji(),p=wv(n,h);if(h=qc(h),!h)throw new T("argument-error","Invalid email link!");if(h.tenantId!==a.T())throw new T("tenant-id-mismatch");return a.ab(p)}))};function Ao(){}Ao.prototype.render=function(){},Ao.prototype.reset=function(){},Ao.prototype.getResponse=function(){},Ao.prototype.execute=function(){};function ri(){this.a={},this.b=1e12}var sl=null;ri.prototype.render=function(n,o){return this.a[this.b.toString()]=new yu(n,o),this.b++},ri.prototype.reset=function(n){var o=ul(this,n);n=im(n),o&&n&&(o.delete(),delete this.a[n])},ri.prototype.getResponse=function(n){return(n=ul(this,n))?n.getResponse():null},ri.prototype.execute=function(n){(n=ul(this,n))&&n.execute()};function ul(n,o){return(o=im(o))&&n.a[o]||null}function im(n){return(n=typeof n>"u"?1e12:n)?n.toString():null}function yu(n,o){this.g=!1,this.c=o,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Hi(n);var a=this;this.i=function(){a.execute()},this.h?this.execute():Ne(this.f,"click",this.i)}yu.prototype.getResponse=function(){return al(this),this.b},yu.prototype.execute=function(){al(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=UI();var o=n.c.callback,a=n.c["expired-callback"];if(o)try{o(n.b)}catch{}n.a=setTimeout(function(){if(n.a=null,n.b=null,a)try{a()}catch{}n.h&&n.execute()},6e4)},500))},yu.prototype.delete=function(){al(this),this.g=!0,clearTimeout(this.a),this.a=null,me(this.f,"click",this.i)};function al(n){if(n.g)throw Error("reCAPTCHA mock was already deleted!")}function cl(){}q(cl,"FACTOR_ID","phone");function hl(){}hl.prototype.g=function(){return sl||(sl=new ri),G(sl)},hl.prototype.c=function(){};var ll=null;function fl(){this.b=f.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xS=new Ke(bs,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),PS=new In(3e4,6e4);fl.prototype.g=function(n){var o=this;return new tt(function(a,h){var p=setTimeout(function(){h(new T("network-request-failed"))},PS.get());if(!f.grecaptcha||n!==o.f&&!o.b){f[o.a]=function(){if(f.grecaptcha){o.f=n;var g=f.grecaptcha.render;f.grecaptcha.render=function(b,A){return b=g(b,A),o.b++,b},clearTimeout(p),a(f.grecaptcha)}else clearTimeout(p),h(new T("internal-error"));delete f[o.a]};var d=Wa(xS,{onload:o.a,hl:n||""});G(eh(d)).o(function(){clearTimeout(p),h(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(p),a(f.grecaptcha)})},fl.prototype.c=function(){this.b--};var pl=null;function dl(n,o,a,h,p,d,g){if(q(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=o,this.g=null,g?(ll||(ll=new hl),g=ll):(pl||(pl=new fl),g=pl),this.m=g,this.a=a||{theme:"light",type:"image"},this.h=[],this.a[um])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[LS]==="invisible",!f.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Hi(o)||!this.i&&Hi(o).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Le(n,d||null,p||null),this.u=h||function(){return null};var b=this;this.l=[];var A=this.a[om];this.a[om]=function(W){if(am(b,W),typeof A=="function")A(W);else if(typeof A=="string"){var ct=gt(A,f);typeof ct=="function"&&ct(W)}};var D=this.a[sm];this.a[sm]=function(){if(am(b,null),typeof D=="function")D();else if(typeof D=="string"){var W=gt(D,f);typeof W=="function"&&W()}}}var om="callback",sm="expired-callback",um="sitekey",LS="size";function am(n,o){for(var a=0;a<n.l.length;a++)try{n.l[a](o)}catch{}}function MS(n,o){Re(n.l,function(a){return a==o})}function vl(n,o){return n.h.push(o),o.oa(function(){ws(n.h,o)}),o}t=dl.prototype,t.Ia=function(){var n=this;return this.f?this.f:this.f=vl(this,G().then(function(){if(Ps()&&!xe())return xs();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return n.m.g(n.u())}).then(function(o){return n.g=o,nt(n.s,rT,{})}).then(function(o){n.a[um]=o.recaptchaSiteKey}).o(function(o){throw n.f=null,o}))},t.render=function(){wu(this);var n=this;return vl(this,this.Ia().then(function(){if(n.c===null){var o=n.v;if(!n.i){var a=Hi(o);o=aI("DIV"),a.appendChild(o)}n.c=n.g.render(o,n.a)}return n.c}))},t.verify=function(){wu(this);var n=this;return vl(this,this.render().then(function(o){return new tt(function(a){var h=n.g.getResponse(o);if(h)a(h);else{var p=function(d){d&&(MS(n,p),a(d))};n.l.push(p),n.i&&n.g.execute(n.c)}})}))},t.reset=function(){wu(this),this.c!==null&&this.g.reset(this.c)};function wu(n){if(n.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}t.clear=function(){wu(this),this.J=!0,this.m.c();for(var n=0;n<this.h.length;n++)this.h[n].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){n=Hi(this.v);for(var o;o=n.firstChild;)n.removeChild(o)}};function gl(n,o,a){var h=!1;try{this.b=a||Y.app()}catch{throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)a=this.b.options.apiKey;else throw new T("invalid-api-key");var p=this,d=null;try{d=this.b.auth().Ga()}catch{}try{h=this.b.auth().settings.appVerificationDisabledForTesting}catch{}d=Y.SDK_VERSION?Gr(Y.SDK_VERSION,d):null,dl.call(this,a,n,o,function(){try{var g=p.b.auth().la()}catch{g=null}return g},d,Bi(Ki),h)}$(gl,dl);function cm(n,o,a,h){t:{a=Array.prototype.slice.call(a);for(var p=0,d=!1,g=0;g<o.length;g++)if(o[g].optional)d=!0;else{if(d)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");p++}if(d=o.length,a.length<p||d<a.length)h="Expected "+(p==d?p==1?"1 argument":p+" arguments":p+"-"+d+" arguments")+" but got "+a.length+".";else{for(p=0;p<a.length;p++)if(d=o[p].optional&&a[p]===void 0,!o[p].M(a[p])&&!d){if(o=o[p],0>p||p>=hm.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");a=hm[p],h=(h?"":a+" argument ")+(o.name?'"'+o.name+'" ':"")+"must be "+o.K+".";break t}h=null}}if(h)throw new T("argument-error",n+" failed: "+h)}var hm="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function j(n,o){return{name:n||"",K:"a valid string",optional:!!o,M:function(a){return typeof a=="string"}}}function ml(n,o){return{name:n||"",K:"a boolean",optional:!!o,M:function(a){return typeof a=="boolean"}}}function Nt(n,o){return{name:n||"",K:"a valid object",optional:!!o,M:N}}function ii(n,o){return{name:n||"",K:"a function",optional:!!o,M:function(a){return typeof a=="function"}}}function Xe(n,o){return{name:n||"",K:"null",optional:!!o,M:function(a){return a===null}}}function FS(){return{name:"",K:"an HTML element",optional:!1,M:function(n){return!!(n&&n instanceof Element)}}}function VS(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(n){return!!(n&&n instanceof Fe)}}}function US(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(n){return!!(n&&n instanceof Y.app.App)}}}function _n(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(o){if(!o)return!1;var a=!n||o.providerId===n;return!(!o.ka||!a)}}}function lm(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(n){return n?!!n.tb:!1}}}function oi(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}}function yl(n,o){return N(n)&&typeof n.type=="string"&&n.type===o&&typeof n.Ha=="function"}function fm(n){return N(n)&&typeof n.uid=="string"}function bu(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(n){return!(!n||typeof n.type!="string"||typeof n.verify!="function")}}}function _t(n,o,a,h){return{name:a||"",K:n.K+" or "+o.K,optional:!!h,M:function(p){return n.M(p)||o.M(p)}}}function wt(n,o){for(var a in o){var h=o[a].name;n[h]=dm(h,n[a],o[a].j)}}function pm(n,o){for(var a in o){var h=o[a].name;h!==a&&Object.defineProperty(n,h,{get:dt(function(p){return this[p]},a),set:dt(function(p,d,g,b){cm(p,[g],[b],!0),this[d]=b},h,a,o[a].lb),enumerable:!0})}}function At(n,o,a,h){n[o]=dm(o,a,h)}function dm(n,o,a){function h(){var g=Array.prototype.slice.call(arguments);return cm(p,a,g),o.apply(this,g)}if(!a)return o;var p=jS(n),d;for(d in o)h[d]=o[d];for(d in o.prototype)h.prototype[d]=o.prototype[d];return h}function jS(n){return n=n.split("."),n[n.length-1]}wt(Fe.prototype,{kb:{name:"applyActionCode",j:[j("code")]},Sa:{name:"checkActionCode",j:[j("code")]},ob:{name:"confirmPasswordReset",j:[j("code"),j("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[j("email"),j("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[j("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[j("emailLink")]},Hc:{name:"onAuthStateChanged",j:[_t(Nt(),ii(),"nextOrObserver"),ii("opt_error",!0),ii("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[_t(Nt(),ii(),"nextOrObserver"),ii("opt_error",!0),ii("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[j("email"),_t(Nt("opt_actionCodeSettings",!0),Xe(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[j("email"),Nt("actionCodeSettings")]},yb:{name:"setPersistence",j:[j("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[_n()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[_n()]},Tc:{name:"signInWithCustomToken",j:[j("token")]},Uc:{name:"signInWithEmailAndPassword",j:[j("email"),j("password")]},Vc:{name:"signInWithEmailLink",j:[j("email"),j("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[j("phoneNumber"),bu()]},Xc:{name:"signInWithPopup",j:[oi()]},Yc:{name:"signInWithRedirect",j:[oi()]},dd:{name:"updateCurrentUser",j:[_t(function(n){return{name:"user",K:"an instance of Firebase User",optional:!!n,M:function(o){return!!(o&&o instanceof we)}}}(),Xe(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[j(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[j("url"),Nt("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[j("code")]}}),pm(Fe.prototype,{lc:{name:"languageCode",lb:_t(j(),Xe(),"languageCode")},ti:{name:"tenantId",lb:_t(j(),Xe(),"tenantId")}}),Fe.Persistence=Yr,Fe.Persistence.LOCAL="local",Fe.Persistence.SESSION="session",Fe.Persistence.NONE="none",wt(we.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[ml("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[ml("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[_n()]},rb:{name:"linkWithCredential",j:[_n()]},Dc:{name:"linkWithPhoneNumber",j:[j("phoneNumber"),bu()]},Ec:{name:"linkWithPopup",j:[oi()]},Fc:{name:"linkWithRedirect",j:[oi()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[_n()]},ub:{name:"reauthenticateWithCredential",j:[_n()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[j("phoneNumber"),bu()]},Nc:{name:"reauthenticateWithPopup",j:[oi()]},Oc:{name:"reauthenticateWithRedirect",j:[oi()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[_t(Nt("opt_actionCodeSettings",!0),Xe(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[j(null,!0)]},cd:{name:"unlink",j:[j("provider")]},Cb:{name:"updateEmail",j:[j("email")]},Db:{name:"updatePassword",j:[j("password")]},ed:{name:"updatePhoneNumber",j:[_n("phone")]},Eb:{name:"updateProfile",j:[Nt("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[j("email"),_t(Nt("opt_actionCodeSettings",!0),Xe(null,!0),"opt_actionCodeSettings",!0)]}}),wt(ri.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),wt(Ao.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),wt(tt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),pm(xg.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:ml("appVerificationDisabledForTesting")}}),wt(Lh.prototype,{confirm:{name:"confirm",j:[j("verificationCode")]}}),At(Wr,"fromJSON",function(n){n=typeof n=="string"?JSON.parse(n):n;for(var o,a=[cE,hE,lE,aE],h=0;h<a.length;h++)if(o=a[h](n))return o;return null},[_t(j(),Nt(),"json")]),At(De,"credential",function(n,o){return new En(n,o)},[j("email"),j("password")]),wt(En.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),wt(er.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),At(er,"credential",vv,[_t(j(),Nt(),"token")]),At(De,"credentialWithLink",wv,[j("email"),j("emailLink")]),wt(nr.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),At(nr,"credential",gv,[_t(j(),Nt(),"token")]),wt(rr.prototype,{Ca:{name:"addScope",j:[j("scope")]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),At(rr,"credential",mv,[_t(j(),_t(Nt(),Xe()),"idToken"),_t(j(),Xe(),"accessToken",!0)]),wt(Qr.prototype,{Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),At(Qr,"credential",yv,[_t(j(),Nt(),"token"),j("secret",!0)]),wt(ye.prototype,{Ca:{name:"addScope",j:[j("scope")]},credential:{name:"credential",j:[_t(j(),_t(Nt(),Xe()),"optionsOrIdToken"),_t(j(),Xe(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Nt("customOAuthParameters")]}}),wt(sn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),wt(Zn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),At(un,"credential",bv,[j("verificationId"),j("verificationCode")]),wt(un.prototype,{gb:{name:"verifyPhoneNumber",j:[_t(j(),function(n,o){return{name:n||"phoneInfoOptions",K:"valid phone info options",optional:!!o,M:function(a){return a?a.session&&a.phoneNumber?yl(a.session,oo)&&typeof a.phoneNumber=="string":a.session&&a.multiFactorHint?yl(a.session,Bs)&&fm(a.multiFactorHint):a.session&&a.multiFactorUid?yl(a.session,Bs)&&typeof a.multiFactorUid=="string":a.phoneNumber?typeof a.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),bu()]}}),wt(Tn.prototype,{w:{name:"toJSON",j:[j(null,!0)]}}),wt(T.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),wt(uo.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),wt(Hc.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),wt(Vh.prototype,{toJSON:{name:"toJSON",j:[j(null,!0)]}}),wt(Fh.prototype,{Rc:{name:"resolveSignIn",j:[lm()]}}),wt(jh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[lm(),j("displayName",!0)]},bd:{name:"unenroll",j:[_t({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:fm},j(),"multiFactorInfoIdentifier")]}}),wt(gl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),At(xc,"parseLink",Yd,[j("link")]),At(cl,"assertion",function(n){return new Vg(n)},[_n("phone")]),function(){if(typeof Y<"u"&&Y.INTERNAL&&Y.INTERNAL.registerComponent){var n={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ls,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Oc,VERIFY_AND_CHANGE_EMAIL:ro,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Fe,AuthCredential:Wr,Error:T};At(n,"EmailAuthProvider",De,[]),At(n,"FacebookAuthProvider",er,[]),At(n,"GithubAuthProvider",nr,[]),At(n,"GoogleAuthProvider",rr,[]),At(n,"TwitterAuthProvider",Qr,[]),At(n,"OAuthProvider",ye,[j("providerId")]),At(n,"SAMLAuthProvider",dv,[j("providerId")]),At(n,"PhoneAuthProvider",un,[VS()]),At(n,"RecaptchaVerifier",gl,[_t(j(),FS(),"recaptchaContainer"),Nt("recaptchaParameters",!0),US()]),At(n,"ActionCodeURL",xc,[]),At(n,"PhoneMultiFactorGenerator",cl,[]),Y.INTERNAL.registerComponent({name:"auth",instanceFactory:function(o){return o=o.getProvider("app").getImmediate(),new Fe(o)},multipleInstances:!1,serviceProps:n,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(o){o.getProvider("auth-internal").initialize()}}),Y.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(o){return o=o.getProvider("auth").getImmediate(),{getUid:L(o.getUid,o),getToken:L(o.nc,o),addAuthTokenListener:L(o.cc,o),removeAuthTokenListener:L(o.Pc,o)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Y.registerVersion("@firebase/auth","0.16.8"),Y.INTERNAL.extendNamespace({User:we})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ml=function(t,e){return Ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},Ml(t,e)};function U1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ml(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function zy(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var j1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,df=df||{},Q=j1||self;function Vu(){}function Fl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Zo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function q1(t){return Object.prototype.hasOwnProperty.call(t,El)&&t[El]||(t[El]=++B1)}var El="closure_uid_"+(1e9*Math.random()>>>0),B1=0;function K1(t,e,r){return t.call.apply(t.bind,arguments)}function G1(t,e,r){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Kt(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kt=K1:Kt=G1,Kt.apply(null,arguments)}function Eu(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var i=r.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ht(t,e){function r(){}r.prototype=e.prototype,t.Z=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.Vb=function(i,s,u){for(var c=Array(arguments.length-2),l=2;l<arguments.length;l++)c[l-2]=arguments[l];return e.prototype[s].apply(i,c)}}function Vn(){this.s=this.s,this.o=this.o}var H1=0;Vn.prototype.s=!1;Vn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),H1!=0)&&q1(this)};Vn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(var r=0;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},$y=Array.prototype.forEach?function(t,e,r){Array.prototype.forEach.call(t,e,r)}:function(t,e,r){for(var i=t.length,s=typeof t=="string"?t.split(""):t,u=0;u<i;u++)u in s&&e.call(r,s[u],u,t)};function z1(t){t:{for(var e=F_,r=t.length,i=typeof t=="string"?t.split(""):t,s=0;s<r;s++)if(s in i&&e.call(void 0,i[s],s,t)){e=s;break t}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function ym(t){return Array.prototype.concat.apply([],arguments)}function vf(t){var e=t.length;if(0<e){for(var r=Array(e),i=0;i<e;i++)r[i]=t[i];return r}return[]}function Uu(t){return/^[\s\xa0]*$/.test(t)}var wm=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ne(t,e){return t.indexOf(e)!=-1}function Tl(t,e){return t<e?-1:t>e?1:0}var re;t:{var bm=Q.navigator;if(bm){var Im=bm.userAgent;if(Im){re=Im;break t}}re=""}function gf(t,e,r){for(var i in t)e.call(r,t[i],i,t)}function Qy(t){var e={};for(var r in t)e[r]=t[r];return e}var Em="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xy(t,e){for(var r,i,s=1;s<arguments.length;s++){i=arguments[s];for(r in i)t[r]=i[r];for(var u=0;u<Em.length;u++)r=Em[u],Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}}function mf(t){return mf[" "](t),t}mf[" "]=Vu;function W1(t){var e=X1;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var $1=ne(re,"Opera"),vi=ne(re,"Trident")||ne(re,"MSIE"),Yy=ne(re,"Edge"),Vl=Yy||vi,Jy=ne(re,"Gecko")&&!(ne(re.toLowerCase(),"webkit")&&!ne(re,"Edge"))&&!(ne(re,"Trident")||ne(re,"MSIE"))&&!ne(re,"Edge"),Q1=ne(re.toLowerCase(),"webkit")&&!ne(re,"Edge");function Zy(){var t=Q.document;return t?t.documentMode:void 0}var ju;t:{var Sl="",_l=function(){var t=re;if(Jy)return/rv:([^\);]+)(\)|;)/.exec(t);if(Yy)return/Edge\/([\d\.]+)/.exec(t);if(vi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Q1)return/WebKit\/(\S+)/.exec(t);if($1)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(_l&&(Sl=_l?_l[1]:""),vi){var Al=Zy();if(Al!=null&&Al>parseFloat(Sl)){ju=String(Al);break t}}ju=Sl}var X1={};function Y1(){return W1(function(){for(var t=0,e=wm(String(ju)).split("."),r=wm("9").split("."),i=Math.max(e.length,r.length),s=0;t==0&&s<i;s++){var u=e[s]||"",c=r[s]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],u[0].length==0&&c[0].length==0)break;t=Tl(u[1].length==0?0:parseInt(u[1],10),c[1].length==0?0:parseInt(c[1],10))||Tl(u[2].length==0,c[2].length==0)||Tl(u[2],c[2]),u=u[3],c=c[3]}while(t==0)}return 0<=t})}var Ul;if(Q.document&&vi){var Tm=Zy();Ul=Tm||parseInt(ju,10)||void 0}else Ul=void 0;var J1=Ul,Z1=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Q.addEventListener("test",Vu,e),Q.removeEventListener("test",Vu,e)}catch{}return t}();function Xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};function Fo(t,e){if(Xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var r=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Jy){t:{try{mf(e.nodeName);var s=!0;break t}catch{}s=!1}s||(e=null)}}else r=="mouseover"?e=t.fromElement:r=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:t_[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Fo.Z.h.call(this)}}Ht(Fo,Xt);var t_={2:"touch",3:"pen",4:"mouse"};Fo.prototype.h=function(){Fo.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ts="closure_listenable_"+(1e6*Math.random()|0),e_=0;function n_(t,e,r,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=r,this.capture=!!i,this.ia=s,this.key=++e_,this.ca=this.fa=!1}function la(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function fa(t){this.src=t,this.g={},this.h=0}fa.prototype.add=function(t,e,r,i,s){var u=t.toString();t=this.g[u],t||(t=this.g[u]=[],this.h++);var c=ql(t,e,i,s);return-1<c?(e=t[c],r||(e.fa=!1)):(e=new n_(e,this.src,u,!!i,s),e.fa=r,t.push(e)),e};function jl(t,e){var r=e.type;if(r in t.g){var i=t.g[r],s=Wy(i,e),u;(u=0<=s)&&Array.prototype.splice.call(i,s,1),u&&(la(e),t.g[r].length==0&&(delete t.g[r],t.h--))}}function ql(t,e,r,i){for(var s=0;s<t.length;++s){var u=t[s];if(!u.ca&&u.listener==e&&u.capture==!!r&&u.ia==i)return s}return-1}var yf="closure_lm_"+(1e6*Math.random()|0),Nl={};function tw(t,e,r,i,s){if(i&&i.once)return nw(t,e,r,i,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)tw(t,e[u],r,i,s);return null}return r=If(r),t&&t[ts]?t.N(e,r,Zo(i)?!!i.capture:!!i,s):ew(t,e,r,!1,i,s)}function ew(t,e,r,i,s,u){if(!e)throw Error("Invalid event type");var c=Zo(s)?!!s.capture:!!s,l=bf(t);if(l||(t[yf]=l=new fa(t)),r=l.add(e,r,i,c,u),r.proxy)return r;if(i=r_(),r.proxy=i,i.src=t,i.listener=r,t.addEventListener)Z1||(s=c),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(iw(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return r}function r_(){function t(r){return e.call(t.src,t.listener,r)}var e=i_;return t}function nw(t,e,r,i,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)nw(t,e[u],r,i,s);return null}return r=If(r),t&&t[ts]?t.O(e,r,Zo(i)?!!i.capture:!!i,s):ew(t,e,r,!0,i,s)}function rw(t,e,r,i,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)rw(t,e[u],r,i,s);else i=Zo(i)?!!i.capture:!!i,r=If(r),t&&t[ts]?(t=t.i,e=String(e).toString(),e in t.g&&(u=t.g[e],r=ql(u,r,i,s),-1<r&&(la(u[r]),Array.prototype.splice.call(u,r,1),u.length==0&&(delete t.g[e],t.h--)))):t&&(t=bf(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ql(e,r,i,s)),(r=-1<t?e[t]:null)&&wf(r))}function wf(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[ts])jl(e.i,t);else{var r=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(r,i,t.capture):e.detachEvent?e.detachEvent(iw(r),i):e.addListener&&e.removeListener&&e.removeListener(i),(r=bf(e))?(jl(r,t),r.h==0&&(r.src=null,e[yf]=null)):la(t)}}}function iw(t){return t in Nl?Nl[t]:Nl[t]="on"+t}function i_(t,e){if(t.ca)t=!0;else{e=new Fo(e,this);var r=t.listener,i=t.ia||t.src;t.fa&&wf(t),t=r.call(i,e)}return t}function bf(t){return t=t[yf],t instanceof fa?t:null}var kl="__closure_events_fn_"+(1e9*Math.random()>>>0);function If(t){return typeof t=="function"?t:(t[kl]||(t[kl]=function(e){return t.handleEvent(e)}),t[kl])}function Ut(){Vn.call(this),this.i=new fa(this),this.P=this,this.I=null}Ht(Ut,Vn);Ut.prototype[ts]=!0;Ut.prototype.removeEventListener=function(t,e,r,i){rw(this,t,e,r,i)};function Gt(t,e){var r,i=t.I;if(i)for(r=[];i;i=i.I)r.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new Xt(e,t);else if(e instanceof Xt)e.target=e.target||t;else{var s=e;e=new Xt(i,t),Xy(e,s)}if(s=!0,r)for(var u=r.length-1;0<=u;u--){var c=e.g=r[u];s=Tu(c,i,!0,e)&&s}if(c=e.g=t,s=Tu(c,i,!0,e)&&s,s=Tu(c,i,!1,e)&&s,r)for(u=0;u<r.length;u++)c=e.g=r[u],s=Tu(c,i,!1,e)&&s}Ut.prototype.M=function(){if(Ut.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var r=t.g[e],i=0;i<r.length;i++)la(r[i]);delete t.g[e],t.h--}}this.I=null};Ut.prototype.N=function(t,e,r,i){return this.i.add(String(t),e,!1,r,i)};Ut.prototype.O=function(t,e,r,i){return this.i.add(String(t),e,!0,r,i)};function Tu(t,e,r,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==r){var l=c.listener,f=c.ia||c.src;c.fa&&jl(t.i,c),s=l.call(f,i)!==!1&&s}}return s&&!i.defaultPrevented}var Ef=Q.JSON.stringify;function o_(){var t=sw,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var s_=function(){function t(){this.h=this.g=null}return t.prototype.add=function(e,r){var i=ow.get();i.set(e,r),this.h?this.h.next=i:this.g=i,this.h=i},t}(),ow=new(function(){function t(e,r){this.i=e,this.j=r,this.h=0,this.g=null}return t.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},t}())(function(){return new u_},function(t){return t.reset()}),u_=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(e,r){this.h=e,this.g=r,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function a_(t){Q.setTimeout(function(){throw t},0)}function Tf(t,e){Bl||c_(),Kl||(Bl(),Kl=!0),sw.add(t,e)}var Bl;function c_(){var t=Q.Promise.resolve(void 0);Bl=function(){t.then(h_)}}var Kl=!1,sw=new s_;function h_(){for(var t;t=o_();){try{t.h.call(t.g)}catch(r){a_(r)}var e=ow;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Kl=!1}function pa(t,e){Ut.call(this),this.h=t||1,this.g=e||Q,this.j=Kt(this.kb,this),this.l=Date.now()}Ht(pa,Ut);V=pa.prototype;V.da=!1;V.S=null;V.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gt(this,"tick"),this.da&&(Sf(this),this.start()))}};V.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Sf(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}V.M=function(){pa.Z.M.call(this),Sf(this),delete this.g};function _f(t,e,r){if(typeof t=="function")r&&(t=Kt(t,r));else if(t&&typeof t.handleEvent=="function")t=Kt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Q.setTimeout(t,e||0)}function uw(t){t.g=_f(function(){t.g=null,t.i&&(t.i=!1,uw(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}var l_=function(t){U1(e,t);function e(r,i){var s=t.call(this)||this;return s.m=r,s.j=i,s.h=null,s.i=!1,s.g=null,s}return e.prototype.l=function(r){this.h=arguments,this.g?this.i=!0:uw(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Vn);function Vo(t){Vn.call(this),this.h=t,this.g={}}Ht(Vo,Vn);var Sm=[];function aw(t,e,r,i){Array.isArray(r)||(r&&(Sm[0]=r.toString()),r=Sm);for(var s=0;s<r.length;s++){var u=tw(e,r[s],i||t.handleEvent,!1,t.h||t);if(!u)break;t.g[u.key]=u}}function cw(t){gf(t.g,function(e,r){this.g.hasOwnProperty(r)&&wf(e)},t),t.g={}}Vo.prototype.M=function(){Vo.Z.M.call(this),cw(this)};Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function da(){this.g=!0}da.prototype.Aa=function(){this.g=!1};function f_(t,e,r,i,s,u){t.info(function(){if(t.g)if(u)for(var c="",l=u.split("&"),f=0;f<l.length;f++){var v=l[f].split("=");if(1<v.length){var m=v[0];v=v[1];var y=m.split("_");c=2<=y.length&&y[1]=="type"?c+(m+"="+v+"&"):c+(m+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+r+`
`+c})}function p_(t,e,r,i,s,u,c){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+r+`
`+u+" "+c})}function li(t,e,r,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+v_(t,r)+(i?" "+i:"")})}function d_(t,e){t.info(function(){return"TIMEOUT: "+e})}da.prototype.info=function(){};function v_(t,e){if(!t.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r){for(t=0;t<r.length;t++)if(Array.isArray(r[t])){var i=r[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if(u!="noop"&&u!="stop"&&u!="close")for(var c=1;c<s.length;c++)s[c]=""}}}}return Ef(r)}catch{return e}}var Nr={},_m=null;function va(){return _m=_m||new Ut}Nr.Ma="serverreachability";function hw(t){Xt.call(this,Nr.Ma,t)}Ht(hw,Xt);function Uo(t){var e=va();Gt(e,new hw(e))}Nr.STAT_EVENT="statevent";function lw(t,e){Xt.call(this,Nr.STAT_EVENT,t),this.stat=e}Ht(lw,Xt);function ie(t){var e=va();Gt(e,new lw(e,t))}Nr.Na="timingevent";function fw(t,e){Xt.call(this,Nr.Na,t),this.size=e}Ht(fw,Xt);function es(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){t()},e)}var ga={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Af(){}Af.prototype.h=null;function Am(t){return t.h||(t.h=t.i())}function dw(){}var ns={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nf(){Xt.call(this,"d")}Ht(Nf,Xt);function kf(){Xt.call(this,"c")}Ht(kf,Xt);var Gl;function ma(){}Ht(ma,Af);ma.prototype.g=function(){return new XMLHttpRequest};ma.prototype.i=function(){return{}};Gl=new ma;function rs(t,e,r,i){this.l=t,this.j=e,this.m=r,this.X=i||1,this.V=new Vo(this),this.P=g_,t=Vl?125:void 0,this.W=new pa(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new vw}function vw(){this.i=null,this.g="",this.h=!1}var g_=45e3,Hl={},qu={};V=rs.prototype;V.setTimeout=function(t){this.P=t};function zl(t,e,r){t.K=1,t.v=wa(vn(e)),t.s=r,t.U=!0,gw(t,null)}function gw(t,e){t.F=Date.now(),is(t),t.A=vn(t.v);var r=t.A,i=t.X;Array.isArray(i)||(i=[String(i)]),Tw(r.h,"t",i),t.C=0,r=t.l.H,t.h=new vw,t.g=Kw(t.l,r?e:null,!t.s),0<t.O&&(t.L=new l_(Kt(t.Ia,t,t.g),t.O)),aw(t.V,t.g,"readystatechange",t.gb),e=t.H?Qy(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Uo(),f_(t.j,t.u,t.A,t.m,t.X,t.s)}V.gb=function(t){t=t.target;var e=this.L;e&&hn(t)==3?e.l():this.Ia(t)};V.Ia=function(t){try{if(t==this.g)t:{var e=hn(this.g),r=this.g.Da(),i=this.g.ba();if(!(3>e)&&(e!=3||Vl||this.g&&(this.h.h||this.g.ga()||Cm(this.g)))){this.I||e!=4||r==7||(r==8||0>=i?Uo(3):Uo(2)),ya(this);var s=this.g.ba();this.N=s;e:if(mw(this)){var u=Cm(this.g);t="";var c=u.length,l=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Ro(this);var f="";break e}this.h.i=new Q.TextDecoder}for(r=0;r<c;r++)this.h.h=!0,t+=this.h.i.decode(u[r],{stream:l&&r==c-1});u.splice(0,c),this.h.g+=t,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=s==200,p_(this.j,this.u,this.A,this.m,this.X,e,s),this.i){if(this.$&&!this.J){e:{if(this.g){var v,m=this.g;if((v=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Uu(v)){var y=v;break e}}y=null}if(s=y)li(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wl(this,s);else{this.i=!1,this.o=3,ie(12),pr(this),Ro(this);break t}}this.U?(yw(this,e,f),Vl&&this.i&&e==3&&(aw(this.V,this.W,"tick",this.fb),this.W.start())):(li(this.j,this.m,f,null),Wl(this,f)),e==4&&pr(this),this.i&&!this.I&&(e==4?Uw(this.l,this):(this.i=!1,is(this)))}else s==400&&0<f.indexOf("Unknown SID")?(this.o=3,ie(12)):(this.o=0,ie(13)),pr(this),Ro(this)}}}catch{}finally{}};function mw(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function yw(t,e,r){for(var i=!0,s;!t.I&&t.C<r.length;)if(s=m_(t,r),s==qu){e==4&&(t.o=4,ie(14),i=!1),li(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Hl){t.o=4,ie(15),li(t.j,t.m,r,"[Invalid Chunk]"),i=!1;break}else li(t.j,t.m,s,null),Wl(t,s);mw(t)&&s!=qu&&s!=Hl&&(t.h.g="",t.C=0),e!=4||r.length!=0||t.h.h||(t.o=1,ie(16),i=!1),t.i=t.i&&i,i?0<r.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Ff(e),e.L=!0,ie(11))):(li(t.j,t.m,r,"[Invalid Chunked Response]"),pr(t),Ro(t))}V.fb=function(){if(this.g){var t=hn(this.g),e=this.g.ga();this.C<e.length&&(ya(this),yw(this,t,e),this.i&&t!=4&&is(this))}};function m_(t,e){var r=t.C,i=e.indexOf(`
`,r);return i==-1?qu:(r=Number(e.substring(r,i)),isNaN(r)?Hl:(i+=1,i+r>e.length?qu:(e=e.substr(i,r),t.C=i+r,e)))}V.cancel=function(){this.I=!0,pr(this)};function is(t){t.Y=Date.now()+t.P,ww(t,t.P)}function ww(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=es(Kt(t.eb,t),e)}function ya(t){t.B&&(Q.clearTimeout(t.B),t.B=null)}V.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(d_(this.j,this.A),this.K!=2&&(Uo(),ie(17)),pr(this),this.o=2,Ro(this)):ww(this,this.Y-t)};function Ro(t){t.l.G==0||t.I||Uw(t.l,t)}function pr(t){ya(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Sf(t.W),cw(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Wl(t,e){try{var r=t.l;if(r.G!=0&&(r.g==t||$l(r.i,t))){if(r.I=t.N,!t.J&&$l(r.i,t)&&r.G==3){try{var i=r.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){t:if(!r.u){if(r.g)if(r.g.F+3e3<t.F)Hu(r),Ea(r);else break t;Mf(r),ie(18)}}else r.ta=s[1],0<r.ta-r.U&&37500>s[2]&&r.N&&r.A==0&&!r.v&&(r.v=es(Kt(r.ab,r),6e3));if(1>=Aw(r.i)&&r.ka){try{r.ka()}catch{}r.ka=void 0}}else dr(r,11)}else if((t.J||r.g==t)&&Hu(r),!Uu(e))for(s=r.Ca.g.parse(e),e=0;e<s.length;e++){var u=s[e];if(r.U=u[0],u=u[1],r.G==2)if(u[0]=="c"){r.J=u[1],r.la=u[2];var c=u[3];c!=null&&(r.ma=c,r.h.info("VER="+r.ma));var l=u[4];l!=null&&(r.za=l,r.h.info("SVER="+r.za));var f=u[5];f!=null&&typeof f=="number"&&0<f&&(i=1.5*f,r.K=i,r.h.info("backChannelRequestTimeoutMs_="+i)),i=r;var v=t.g;if(v){var m=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var y=i.i;!y.g&&(ne(m,"spdy")||ne(m,"quic")||ne(m,"h2"))&&(y.j=y.l,y.g=new Set,y.h&&(Rf(y,y.h),y.h=null))}if(i.D){var w=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(i.sa=w,mt(i.F,i.D,w))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-t.F,r.h.info("Handshake RTT: "+r.O+"ms")),i=r;var I=t;if(i.oa=Bw(i,i.H?i.la:null,i.W),I.J){Nw(i.i,I);var E=I,S=i.K;S&&E.setTimeout(S),E.B&&(ya(E),is(E)),i.g=I}else Fw(i);0<r.l.length&&Ta(r)}else u[0]!="stop"&&u[0]!="close"||dr(r,7);else r.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?dr(r,7):Lf(r):u[0]!="noop"&&r.j&&r.j.wa(u),r.A=0)}}Uo(4)}catch{}}function y_(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(Fl(t)){for(var e=[],r=t.length,i=0;i<r;i++)e.push(t[i]);return e}e=[],r=0;for(i in t)e[r++]=t[i];return e}function Df(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Fl(t)||typeof t=="string")$y(t,e,void 0);else{if(t.T&&typeof t.T=="function")var r=t.T();else if(t.R&&typeof t.R=="function")r=void 0;else if(Fl(t)||typeof t=="string"){r=[];for(var i=t.length,s=0;s<i;s++)r.push(s)}else for(s in r=[],i=0,t)r[i++]=s;i=y_(t),s=i.length;for(var u=0;u<s;u++)e.call(void 0,i[u],r&&r[u],t)}}function Oi(t,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var i=0;i<r;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Oi)for(r=t.T(),i=0;i<r.length;i++)this.set(r[i],t.get(r[i]));else for(i in t)this.set(i,t[i])}V=Oi.prototype;V.R=function(){Cf(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};V.T=function(){return Cf(this),this.g.concat()};function Cf(t){if(t.i!=t.g.length){for(var e=0,r=0;e<t.g.length;){var i=t.g[e];Ir(t.h,i)&&(t.g[r++]=i),e++}t.g.length=r}if(t.i!=t.g.length){var s={};for(r=e=0;e<t.g.length;)i=t.g[e],Ir(s,i)||(t.g[r++]=i,s[i]=1),e++;t.g.length=r}}V.get=function(t,e){return Ir(this.h,t)?this.h[t]:e};V.set=function(t,e){Ir(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};V.forEach=function(t,e){for(var r=this.T(),i=0;i<r.length;i++){var s=r[i],u=this.get(s);t.call(e,u,s,this)}};function Ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var bw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function w_(t,e){if(t){t=t.split("&");for(var r=0;r<t.length;r++){var i=t[r].indexOf("="),s=null;if(0<=i){var u=t[r].substring(0,i);s=t[r].substring(i+1)}else u=t[r];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Er(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Er){this.g=e!==void 0?e:t.g,Bu(this,t.j),this.s=t.s,Ku(this,t.i),Gu(this,t.m),this.l=t.l,e=t.h;var r=new jo;r.i=e.i,e.g&&(r.g=new Oi(e.g),r.h=e.h),Nm(this,r),this.o=t.o}else t&&(r=String(t).match(bw))?(this.g=!!e,Bu(this,r[1]||"",!0),this.s=Oo(r[2]||""),Ku(this,r[3]||"",!0),Gu(this,r[4]),this.l=Oo(r[5]||"",!0),Nm(this,r[6]||"",!0),this.o=Oo(r[7]||"")):(this.g=!!e,this.h=new jo(null,this.g))}Er.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Do(e,km,!0),":");var r=this.i;return(r||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Do(e,km,!0),"@"),t.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r=this.m,r!=null&&t.push(":",String(r))),(r=this.l)&&(this.i&&r.charAt(0)!="/"&&t.push("/"),t.push(Do(r,r.charAt(0)=="/"?S_:T_,!0))),(r=this.h.toString())&&t.push("?",r),(r=this.o)&&t.push("#",Do(r,A_)),t.join("")};function vn(t){return new Er(t)}function Bu(t,e,r){t.j=r?Oo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ku(t,e,r){t.i=r?Oo(e,!0):e}function Gu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Nm(t,e,r){e instanceof jo?(t.h=e,N_(t.h,t.g)):(r||(e=Do(e,__)),t.h=new jo(e,t.g))}function mt(t,e,r){t.h.set(e,r)}function wa(t){return mt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function b_(t){return t instanceof Er?vn(t):new Er(t,void 0)}function I_(t,e,r,i){var s=new Er(null,void 0);return t&&Bu(s,t),e&&Ku(s,e),r&&Gu(s,r),i&&(s.l=i),s}function Oo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Do(t,e,r){return typeof t=="string"?(t=encodeURI(t).replace(e,E_),r&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function E_(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var km=/[#\/\?@]/g,T_=/[#\?:]/g,S_=/[#\?]/g,__=/[#\?@]/g,A_=/#/g;function jo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Un(t){t.g||(t.g=new Oi,t.h=0,t.i&&w_(t.i,function(e,r){t.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}V=jo.prototype;V.add=function(t,e){Un(this),this.i=null,t=xi(this,t);var r=this.g.get(t);return r||this.g.set(t,r=[]),r.push(e),this.h+=1,this};function Iw(t,e){Un(t),e=xi(t,e),Ir(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Ir(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Cf(t)))}function Ew(t,e){return Un(t),e=xi(t,e),Ir(t.g.h,e)}V.forEach=function(t,e){Un(this),this.g.forEach(function(r,i){$y(r,function(s){t.call(e,s,i,this)},this)},this)};V.T=function(){Un(this);for(var t=this.g.R(),e=this.g.T(),r=[],i=0;i<e.length;i++)for(var s=t[i],u=0;u<s.length;u++)r.push(e[i]);return r};V.R=function(t){Un(this);var e=[];if(typeof t=="string")Ew(this,t)&&(e=ym(e,this.g.get(xi(this,t))));else{t=this.g.R();for(var r=0;r<t.length;r++)e=ym(e,t[r])}return e};V.set=function(t,e){return Un(this),this.i=null,t=xi(this,t),Ew(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Tw(t,e,r){Iw(t,e),0<r.length&&(t.i=null,t.g.set(xi(t,e),vf(r)),t.h+=r.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),r=0;r<e.length;r++){var i=e[r],s=encodeURIComponent(String(i));i=this.R(i);for(var u=0;u<i.length;u++){var c=s;i[u]!==""&&(c+="="+encodeURIComponent(String(i[u]))),t.push(c)}}return this.i=t.join("&")};function xi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function N_(t,e){e&&!t.j&&(Un(t),t.i=null,t.g.forEach(function(r,i){var s=i.toLowerCase();i!=s&&(Iw(this,i),Tw(this,s,r))},t)),t.j=e}var k_=function(){function t(e,r){this.h=e,this.g=r}return t}();function Sw(t){this.l=t||D_,Q.PerformanceNavigationTiming?(t=Q.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Q.g&&Q.g.Ea&&Q.g.Ea()&&Q.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var D_=10;function _w(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Aw(t){return t.h?1:t.g?t.g.size:0}function $l(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Rf(t,e){t.g?t.g.add(e):t.h=e}function Nw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Sw.prototype.cancel=function(){var t,e;if(this.i=kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var r=zy(this.g.values()),i=r.next();!i.done;i=r.next()){var s=i.value;s.cancel()}}catch(u){t={error:u}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.g.clear()}};function kw(t){var e,r;if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){var i=t.i;try{for(var s=zy(t.g.values()),u=s.next();!u.done;u=s.next()){var c=u.value;i=i.concat(c.D)}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i}return vf(t.i)}function Of(){}Of.prototype.stringify=function(t){return Q.JSON.stringify(t,void 0)};Of.prototype.parse=function(t){return Q.JSON.parse(t,void 0)};function C_(){this.g=new Of}function R_(t,e,r){var i=r||"";try{Df(t,function(s,u){var c=s;Zo(s)&&(c=Ef(s)),e.push(i+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function O_(t,e){var r=new da;if(Q.Image){var i=new Image;i.onload=Eu(Su,r,i,"TestLoadImage: loaded",!0,e),i.onerror=Eu(Su,r,i,"TestLoadImage: error",!1,e),i.onabort=Eu(Su,r,i,"TestLoadImage: abort",!1,e),i.ontimeout=Eu(Su,r,i,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Su(t,e,r,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function os(t){this.l=t.$b||null,this.j=t.ib||!1}Ht(os,Af);os.prototype.g=function(){return new ba(this.l,this.j)};os.prototype.i=function(t){return function(){return t}}({});function ba(t,e){Ut.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ht(ba,Ut);var xf=0;V=ba.prototype;V.open=function(t,e){if(this.readyState!=xf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,qo(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Q).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=xf};V.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,qo(this)),this.g&&(this.readyState=3,qo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dw(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function Dw(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}V.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ss(this):qo(this),this.readyState==3&&Dw(this)}};V.Ua=function(t){this.g&&(this.response=this.responseText=t,ss(this))};V.Ta=function(t){this.g&&(this.response=t,ss(this))};V.ha=function(){this.g&&ss(this)};function ss(t){t.readyState=4,t.l=null,t.j=null,t.A=null,qo(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),r=e.next();!r.done;)r=r.value,t.push(r[0]+": "+r[1]),r=e.next();return t.join(`\r
`)};function qo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var x_=Q.JSON.parse;function Ot(t){Ut.call(this),this.headers=new Oi,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cw,this.K=this.L=!1}Ht(Ot,Ut);var Cw="",P_=/^https?$/i,L_=["POST","PUT"];V=Ot.prototype;V.ea=function(t,e,r,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gl.g(),this.C=this.u?Am(this.u):Am(Gl),this.g.onreadystatechange=Kt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(u){Dm(this,u);return}t=r||"";var s=new Oi(this.headers);i&&Df(i,function(u,c){s.set(c,u)}),i=z1(s.T()),r=Q.FormData&&t instanceof Q.FormData,!(0<=Wy(L_,e))||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xw(this),0<this.B&&((this.K=M_(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kt(this.pa,this)):this.A=_f(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(u){Dm(this,u)}};function M_(t){return vi&&Y1()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function F_(t){return t.toLowerCase()=="content-type"}V.pa=function(){typeof df<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gt(this,"timeout"),this.abort(8))};function Dm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Rw(t),Ia(t)}function Rw(t){t.D||(t.D=!0,Gt(t,"complete"),Gt(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gt(this,"complete"),Gt(this,"abort"),Ia(this))};V.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ia(this,!0)),Ot.Z.M.call(this)};V.Fa=function(){this.s||(this.F||this.v||this.l?Ow(this):this.cb())};V.cb=function(){Ow(this)};function Ow(t){if(t.h&&typeof df<"u"&&(!t.C[1]||hn(t)!=4||t.ba()!=2)){if(t.v&&hn(t)==4)_f(t.Fa,0,t);else if(Gt(t,"readystatechange"),hn(t)==4){t.h=!1;try{var e=t.ba();t:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}var i;if(!(i=r)){var s;if(s=e===0){var u=String(t.H).match(bw)[1]||null;if(!u&&Q.self&&Q.self.location){var c=Q.self.location.protocol;u=c.substr(0,c.length-1)}s=!P_.test(u?u.toLowerCase():"")}i=s}if(i)Gt(t,"complete"),Gt(t,"success");else{t.m=6;try{var l=2<hn(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.ba()+"]",Rw(t)}}finally{Ia(t)}}}}function Ia(t,e){if(t.g){xw(t);var r=t.g,i=t.C[0]?Vu:null;t.g=null,t.C=null,e||Gt(t,"ready");try{r.onreadystatechange=i}catch{}}}function xw(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Q.clearTimeout(t.A),t.A=null)}function hn(t){return t.g?t.g.readyState:0}V.ba=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}};V.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),x_(e)}};function Cm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Cw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}V.Da=function(){return this.m};V.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function V_(t){var e="";return gf(t,function(r,i){e+=i,e+=":",e+=r,e+=`\r
`}),e}function Pf(t,e,r){t:{for(i in r){var i=!1;break t}i=!0}i||(r=V_(r),typeof t=="string"?r!=null&&encodeURIComponent(String(r)):mt(t,e,r))}function No(t,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[t]||e}function Pw(t){this.za=0,this.l=[],this.h=new da,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=No("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=No("baseRetryDelayMs",5e3,t),this.$a=No("retryDelaySeedMs",1e4,t),this.Ya=No("forwardChannelMaxRetries",2,t),this.ra=No("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Sw(t&&t.concurrentRequestLimit),this.Ca=new C_,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}V=Pw.prototype;V.ma=8;V.G=1;function Lf(t){if(Lw(t),t.G==3){var e=t.V++,r=vn(t.F);mt(r,"SID",t.J),mt(r,"RID",e),mt(r,"TYPE","terminate"),us(t,r),e=new rs(t,t.h,e,void 0),e.K=2,e.v=wa(vn(r)),r=!1,Q.navigator&&Q.navigator.sendBeacon&&(r=Q.navigator.sendBeacon(e.v.toString(),"")),!r&&Q.Image&&(new Image().src=e.v,r=!0),r||(e.g=Kw(e.l,null),e.g.ea(e.v)),e.F=Date.now(),is(e)}qw(t)}V.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Ea(t){t.g&&(Ff(t),t.g.cancel(),t.g=null)}function Lw(t){Ea(t),t.u&&(Q.clearTimeout(t.u),t.u=null),Hu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Q.clearTimeout(t.m),t.m=null)}function Dl(t,e){t.l.push(new k_(t.Za++,e)),t.G==3&&Ta(t)}function Ta(t){_w(t.i)||t.m||(t.m=!0,Tf(t.Ha,t),t.C=0)}function U_(t,e){return Aw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=es(Kt(t.Ha,t,e),jw(t,t.C)),t.C++,!0)}V.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new rs(this,this.h,t,void 0),r=this.s;if(this.P&&(r?(r=Qy(r),Xy(r,this.P)):r=this.P),this.o===null&&(e.H=r),this.ja)t:{for(var i=0,s=0;s<this.l.length;s++){e:{var u=this.l[s];if("__data__"in u.g&&(u=u.g.__data__,typeof u=="string")){u=u.length;break e}u=void 0}if(u===void 0)break;if(i+=u,4096<i){i=s;break t}if(i===4096||s===this.l.length-1){i=s+1;break t}}i=1e3}else i=1e3;i=Mw(this,e,i),s=vn(this.F),mt(s,"RID",t),mt(s,"CVER",22),this.D&&mt(s,"X-HTTP-Session-Id",this.D),us(this,s),this.o&&r&&Pf(s,this.o,r),Rf(this.i,e),this.Ra&&mt(s,"TYPE","init"),this.ja?(mt(s,"$req",i),mt(s,"SID","null"),e.$=!0,zl(e,s,null)):zl(e,s,i),this.G=2}}else this.G==3&&(t?Rm(this,t):this.l.length==0||_w(this.i)||Rm(this))};function Rm(t,e){var r;e?r=e.m:r=t.V++;var i=vn(t.F);mt(i,"SID",t.J),mt(i,"RID",r),mt(i,"AID",t.U),us(t,i),t.o&&t.s&&Pf(i,t.o,t.s),r=new rs(t,t.h,r,t.C+1),t.o===null&&(r.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Mw(t,r,1e3),r.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Rf(t.i,r),zl(r,i,e)}function us(t,e){t.j&&Df({},function(r,i){mt(e,i,r)})}function Mw(t,e,r){r=Math.min(t.l.length,r);var i=t.j?Kt(t.j.Oa,t.j,t):null;t:for(var s=t.l,u=-1;;){var c=["count="+r];u==-1?0<r?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);for(var l=!0,f=0;f<r;f++){var v=s[f].h,m=s[f].g;if(v-=u,0>v)u=Math.max(0,s[f].h-100),l=!1;else try{R_(m,c,"req"+v+"_")}catch{i&&i(m)}}if(l){i=c.join("&");break t}}return t=t.l.splice(0,r),e.D=t,i}function Fw(t){t.g||t.u||(t.Y=1,Tf(t.Ga,t),t.A=0)}function Mf(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=es(Kt(t.Ga,t),jw(t,t.A)),t.A++,!0)}V.Ga=function(){if(this.u=null,Vw(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=es(Kt(this.bb,this),t)}};V.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ie(10),Ea(this),Vw(this))};function Ff(t){t.B!=null&&(Q.clearTimeout(t.B),t.B=null)}function Vw(t){t.g=new rs(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=vn(t.oa);mt(e,"RID","rpc"),mt(e,"SID",t.J),mt(e,"CI",t.N?"0":"1"),mt(e,"AID",t.U),us(t,e),mt(e,"TYPE","xmlhttp"),t.o&&t.s&&Pf(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var r=t.g;t=t.la,r.K=1,r.v=wa(vn(e)),r.s=null,r.U=!0,gw(r,t)}V.ab=function(){this.v!=null&&(this.v=null,Ea(this),Mf(this),ie(19))};function Hu(t){t.v!=null&&(Q.clearTimeout(t.v),t.v=null)}function Uw(t,e){var r=null;if(t.g==e){Hu(t),Ff(t),t.g=null;var i=2}else if($l(t.i,e))r=e.D,Nw(t.i,e),i=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(i==1){r=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;i=va(),Gt(i,new fw(i,r)),Ta(t)}else Fw(t);else if(s=e.o,s==3||s==0&&0<t.I||!(i==1&&U_(t,e)||i==2&&Mf(t)))switch(r&&0<r.length&&(e=t.i,e.i=e.i.concat(r)),s){case 1:dr(t,5);break;case 4:dr(t,10);break;case 3:dr(t,6);break;default:dr(t,2)}}}function jw(t,e){var r=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(r*=2),r*e}function dr(t,e){if(t.h.info("Error code "+e),e==2){var r=null;t.j&&(r=null);var i=Kt(t.jb,t);r||(r=new Er("//www.google.com/images/cleardot.gif"),Q.location&&Q.location.protocol=="http"||Bu(r,"https"),wa(r)),O_(r.toString(),i)}else ie(2);t.G=0,t.j&&t.j.va(e),qw(t),Lw(t)}V.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ie(2)):(this.h.info("Failed to ping google.com"),ie(1))};function qw(t){t.G=0,t.I=-1,t.j&&((kw(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,vf(t.l),t.l.length=0),t.j.ua())}function Bw(t,e,r){var i=b_(r);if(i.i!="")e&&Ku(i,e+"."+i.i),Gu(i,i.m);else{var s=Q.location;i=I_(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,r)}return t.aa&&gf(t.aa,function(u,c){mt(i,c,u)}),e=t.D,r=t.sa,e&&r&&mt(i,e,r),mt(i,"VER",t.ma),us(t,i),i}function Kw(t,e,r){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=r&&t.Ba&&!t.qa?new Ot(new os({ib:!0})):new Ot(t.qa),e.L=t.H,e}function Gw(){}V=Gw.prototype;V.xa=function(){};V.wa=function(){};V.va=function(){};V.ua=function(){};V.Oa=function(){};function zu(){if(vi&&!(10<=Number(J1)))throw Error("Environmental error: no available transport.")}zu.prototype.g=function(t,e){return new Ae(t,e)};function Ae(t,e){Ut.call(this),this.g=new Pw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Uu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Uu(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Pi(this)}Ht(Ae,Ut);Ae.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,r=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Tf(Kt(t.hb,t,e))),ie(0),t.W=e,t.aa=r||{},t.N=t.X,t.F=Bw(t,null,t.W),Ta(t)};Ae.prototype.close=function(){Lf(this.g)};Ae.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Dl(this.g,e)}else this.v?(e={},e.__data__=Ef(t),Dl(this.g,e)):Dl(this.g,t)};Ae.prototype.M=function(){this.g.j=null,delete this.j,Lf(this.g),delete this.g,Ae.Z.M.call(this)};function Hw(t){Nf.call(this);var e=t.__sm__;if(e){t:{for(var r in e){t=r;break t}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ht(Hw,Nf);function zw(){kf.call(this),this.status=1}Ht(zw,kf);function Pi(t){this.g=t}Ht(Pi,Gw);Pi.prototype.xa=function(){Gt(this.g,"a")};Pi.prototype.wa=function(t){Gt(this.g,new Hw(t))};Pi.prototype.va=function(t){Gt(this.g,new zw)};Pi.prototype.ua=function(){Gt(this.g,"b")};zu.prototype.createWebChannel=zu.prototype.g;Ae.prototype.send=Ae.prototype.u;Ae.prototype.open=Ae.prototype.m;Ae.prototype.close=Ae.prototype.close;ga.NO_ERROR=0;ga.TIMEOUT=8;ga.HTTP_ERROR=6;pw.COMPLETE="complete";dw.EventType=ns;ns.OPEN="a";ns.CLOSE="b";ns.ERROR="c";ns.MESSAGE="d";Ut.prototype.listen=Ut.prototype.N;Ot.prototype.listenOnce=Ot.prototype.O;Ot.prototype.getLastError=Ot.prototype.La;Ot.prototype.getLastErrorCode=Ot.prototype.Da;Ot.prototype.getStatus=Ot.prototype.ba;Ot.prototype.getResponseJson=Ot.prototype.Qa;Ot.prototype.getResponseText=Ot.prototype.ga;Ot.prototype.send=Ot.prototype.ea;var j_=function(){return new zu},q_=function(){return va()},Cl=ga,B_=pw,K_=Nr,Om={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},G_=os,_u=dw,H_=Ot;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te=function(){function t(e,r){var i=this;this.previousValue=e,r&&(r.sequenceNumberHandler=function(s){return i.t(s)},this.i=function(s){return r.writeSequenceNumber(s)})}return t.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},t.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},t}();Te.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=function(t){function e(r,i){var s=this;return(s=t.call(this,i)||this).code=r,s.message=i,s.name="FirebaseError",s.toString=function(){return s.name+": [code="+s.code+"]: "+s.message},s}return H(e,t),e}(Error),Ue=new Ky("@firebase/firestore");function Ql(){return Ue.logLevel}function P(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(Ue.logLevel<=st.DEBUG){var i=e.map(Vf);Ue.debug.apply(Ue,Tt(["Firestore (8.10.1): "+t],i))}}function Ct(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(Ue.logLevel<=st.ERROR){var i=e.map(Vf);Ue.error.apply(Ue,Tt(["Firestore (8.10.1): "+t],i))}}function Wu(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(Ue.logLevel<=st.WARN){var i=e.map(Vf);Ue.warn.apply(Ue,Tt(["Firestore (8.10.1): "+t],i))}}function Vf(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t){t===void 0&&(t="Unexpected state");var e="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+t;throw Ct(e),new Error(e)}function z(t,e){t||B()}function M(t,e){return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t){var e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(var i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ww=function(){function t(){}return t.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length,i="";i.length<20;)for(var s=z_(40),u=0;u<s.length;++u)i.length<20&&s[u]<r&&(i+=e.charAt(s[u]%e.length));return i},t}();function rt(t,e){return t<e?-1:t>e?1:0}function gi(t,e,r){return t.length===e.length&&t.every(function(i,s){return r(i,e[s])})}function $w(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe=function(){function t(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new R(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new R(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new R(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var r=Math.floor(e/1e3);return new t(r,Math.floor(1e6*(e-1e3*r)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)},t.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Z=function(){function t(e){this.timestamp=e}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new fe(0,0))},t.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},t.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t){var e=0;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function kr(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function Qw(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=function(){function t(e,r,i){r===void 0?r=0:r>e.length&&B(),i===void 0?i=e.length-r:i>e.length-r&&B(),this.segments=e,this.offset=r,this.len=i}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return t.comparator(this,e)===0},t.prototype.child=function(e){var r=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(i){r.push(i)}):r.push(e),this.construct(r)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(e){return this.segments[this.offset+e]},t.prototype.isEmpty=function(){return this.length===0},t.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0},t.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0},t.prototype.forEach=function(e){for(var r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(e,r){for(var i=Math.min(e.length,r.length),s=0;s<i;s++){var u=e.get(s),c=r.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<r.length?-1:e.length>r.length?1:0},t}(),ut=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype.construct=function(r,i,s){return new e(r,i,s)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var s=[],u=0,c=r;u<c.length;u++){var l=c[u];if(l.indexOf("//")>=0)throw new R(_.INVALID_ARGUMENT,"Invalid segment ("+l+"). Paths must not contain // in them.");s.push.apply(s,l.split("/").filter(function(f){return f.length>0}))}return new e(s)},e.emptyPath=function(){return new e([])},e}(Xw),W_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Be=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype.construct=function(r,i,s){return new e(r,i,s)},e.isValidIdentifier=function(r){return W_.test(r)},e.prototype.canonicalString=function(){return this.toArray().map(function(r){return r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(r)||(r="`"+r+"`"),r}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(r){for(var i=[],s="",u=0,c=function(){if(s.length===0)throw new R(_.INVALID_ARGUMENT,"Invalid field path ("+r+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");i.push(s),s=""},l=!1;u<r.length;){var f=r[u];if(f==="\\"){if(u+1===r.length)throw new R(_.INVALID_ARGUMENT,"Path has trailing escape character: "+r);var v=r[u+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new R(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);s+=v,u+=2}else f==="`"?(l=!l,u++):f!=="."||l?(s+=f,u++):(c(),u++)}if(c(),l)throw new R(_.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new e(i)},e.emptyPath=function(){return new e([])},e}(Xw),mi=function(){function t(e){this.fields=e,e.sort(Be.comparator)}return t.prototype.covers=function(e){for(var r=0,i=this.fields;r<i.length;r++)if(i[r].isPrefixOf(e))return!0;return!1},t.prototype.isEqual=function(e){return gi(this.fields,e.fields,function(r,i){return r.isEqual(i)})},t}(),pe=function(){function t(e){this.binaryString=e}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(r){for(var i="",s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e))},t.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},t.prototype.toUint8Array=function(){return function(e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(e){return rt(this.binaryString,e.binaryString)},t.prototype.isEqual=function(e){return this.binaryString===e.binaryString},t}();pe.EMPTY_BYTE_STRING=new pe("");var $_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mn(t){if(z(!!t),typeof t=="string"){var e=0,r=$_.exec(t);if(z(!!r),r[1]){var i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}var s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?pe.fromBase64String(t):pe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Yw(t){var e=t.mapValue.fields.__previous_value__;return Uf(e)?Yw(e):e}function Bo(t){var e=Mn(t.mapValue.fields.__local_write_time__.timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function Jw(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(){function t(e){this.path=e}return t.fromPath=function(e){return new t(ut.fromString(e))},t.fromName=function(e){return new t(ut.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},t.prototype.isEqual=function(e){return e!==null&&ut.comparator(this.path,e.path)===0},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(e,r){return ut.comparator(e.path,r.path)},t.isDocumentKey=function(e){return e.length%2==0},t.fromSegments=function(e){return new t(new ut(e.slice()))},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Uf(t)?4:10:B()}function tn(t,e){var r=Tr(t);if(r!==Tr(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bo(t).isEqual(Bo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;var u=Mn(i.timestampValue),c=Mn(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return yi(i.bytesValue).isEqual(yi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){var u=Dt(i.doubleValue),c=Dt(s.doubleValue);return u===c?$u(u)===$u(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return gi(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:return function(i,s){var u=i.mapValue.fields||{},c=s.mapValue.fields||{};if(xm(u)!==xm(c))return!1;for(var l in u)if(u.hasOwnProperty(l)&&(c[l]===void 0||!tn(u[l],c[l])))return!1;return!0}(t,e);default:return B()}}function Ko(t,e){return(t.values||[]).find(function(r){return tn(r,e)})!==void 0}function wi(t,e){var r=Tr(t),i=Tr(e);if(r!==i)return rt(r,i);switch(r){case 0:return 0;case 1:return rt(t.booleanValue,e.booleanValue);case 2:return function(s,u){var c=Dt(s.integerValue||s.doubleValue),l=Dt(u.integerValue||u.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return Pm(t.timestampValue,e.timestampValue);case 4:return Pm(Bo(t),Bo(e));case 5:return rt(t.stringValue,e.stringValue);case 6:return function(s,u){var c=yi(s),l=yi(u);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,u){for(var c=s.split("/"),l=u.split("/"),f=0;f<c.length&&f<l.length;f++){var v=rt(c[f],l[f]);if(v!==0)return v}return rt(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,u){var c=rt(Dt(s.latitude),Dt(u.latitude));return c!==0?c:rt(Dt(s.longitude),Dt(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,u){for(var c=s.values||[],l=u.values||[],f=0;f<c.length&&f<l.length;++f){var v=wi(c[f],l[f]);if(v)return v}return rt(c.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,u){var c=s.fields||{},l=Object.keys(c),f=u.fields||{},v=Object.keys(f);l.sort(),v.sort();for(var m=0;m<l.length&&m<v.length;++m){var y=rt(l[m],v[m]);if(y!==0)return y;var w=wi(c[l[m]],f[v[m]]);if(w!==0)return w}return rt(l.length,v.length)}(t.mapValue,e.mapValue);default:throw B()}}function Pm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return rt(t,e);var r=Mn(t),i=Mn(e),s=rt(r.seconds,i.seconds);return s!==0?s:rt(r.nanos,i.nanos)}function jf(t){return Xl(t)}function Xl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){var s=Mn(i);return"time("+s.seconds+","+s.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?yi(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,K.fromName(r).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(i){for(var s="[",u=!0,c=0,l=i.values||[];c<l.length;c++)u?u=!1:s+=",",s+=Xl(l[c]);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){for(var s="{",u=!0,c=0,l=Object.keys(i.fields||{}).sort();c<l.length;c++){var f=l[c];u?u=!1:s+=",",s+=f+":"+Xl(i.fields[f])}return s+"}"}(t.mapValue):B();var e,r}function Qu(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Yl(t){return!!t&&"integerValue"in t}function qf(t){return!!t&&"arrayValue"in t}function Lm(t){return!!t&&"nullValue"in t}function Mm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return kr(t.mapValue.fields,function(s,u){return e.mapValue.fields[s]=xo(u)}),e}if(t.arrayValue){for(var r={arrayValue:{values:[]}},i=0;i<(t.arrayValue.values||[]).length;++i)r.arrayValue.values[i]=xo(t.arrayValue.values[i]);return r}return Object.assign({},t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee=function(){function t(e){this.value=e}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){if(e.isEmpty())return this.value;for(var r=this.value,i=0;i<e.length-1;++i)if(!Ru(r=(r.mapValue.fields||{})[e.get(i)]))return null;return(r=(r.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.set=function(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=xo(r)},t.prototype.setAll=function(e){var r=this,i=Be.emptyPath(),s={},u=[];e.forEach(function(l,f){if(!i.isImmediateParentOf(f)){var v=r.getFieldsMap(i);r.applyChanges(v,s,u),s={},u=[],i=f.popLast()}l?s[f.lastSegment()]=xo(l):u.push(f.lastSegment())});var c=this.getFieldsMap(i);this.applyChanges(c,s,u)},t.prototype.delete=function(e){var r=this.field(e.popLast());Ru(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]},t.prototype.isEqual=function(e){return tn(this.value,e.value)},t.prototype.getFieldsMap=function(e){var r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(var i=0;i<e.length;++i){var s=r.mapValue.fields[e.get(i)];Ru(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields},t.prototype.applyChanges=function(e,r,i){kr(r,function(l,f){return e[l]=f});for(var s=0,u=i;s<u.length;s++){var c=u[s];delete e[c]}},t.prototype.clone=function(){return new t(xo(this.value))},t}();function Zw(t){var e=[];return kr(t.fields,function(r,i){var s=new Be([r]);if(Ru(i)){var u=Zw(i.mapValue).fields;if(u.length===0)e.push(s);else for(var c=0,l=u;c<l.length;c++){var f=l[c];e.push(s.child(f))}}else e.push(s)}),new mi(e)}var Yt=function(){function t(e,r,i,s,u){this.key=e,this.documentType=r,this.version=i,this.data=s,this.documentState=u}return t.newInvalidDocument=function(e){return new t(e,0,Z.min(),Ee.empty(),0)},t.newFoundDocument=function(e,r,i){return new t(e,1,r,i,0)},t.newNoDocument=function(e,r){return new t(e,2,r,Ee.empty(),0)},t.newUnknownDocument=function(e,r){return new t(e,3,r,Ee.empty(),2)},t.prototype.convertToFoundDocument=function(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this},t.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=Ee.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=Ee.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return this.documentType!==0},t.prototype.isFoundDocument=function(){return this.documentType===1},t.prototype.isNoDocument=function(){return this.documentType===2},t.prototype.isUnknownDocument=function(){return this.documentType===3},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Q_=function(t,e,r,i,s,u,c){e===void 0&&(e=null),r===void 0&&(r=[]),i===void 0&&(i=[]),s===void 0&&(s=null),u===void 0&&(u=null),c===void 0&&(c=null),this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=c,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t,e,r,i,s,u,c){return e===void 0&&(e=null),r===void 0&&(r=[]),i===void 0&&(i=[]),s===void 0&&(s=null),u===void 0&&(u=null),c===void 0&&(c=null),new Q_(t,e,r,i,s,u,c)}function as(t){var e=M(t);if(e.h===null){var r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(function(i){return function(s){return s.field.canonicalString()+s.op.toString()+jf(s.value)}(i)}).join(","),r+="|ob:",r+=e.orderBy.map(function(i){return function(s){return s.field.canonicalString()+s.dir}(i)}).join(","),Dr(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=Yu(e.startAt)),e.endAt&&(r+="|ub:",r+=Yu(e.endAt)),e.h=r}return e.h}function Sa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(var r=0;r<t.orderBy.length;r++)if(!rA(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if(s=t.filters[i],u=e.filters[i],s.op!==u.op||!s.field.isEqual(u.field)||!tn(s.value,u.value))return!1;var s,u;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Um(t.startAt,e.startAt)&&Um(t.endAt,e.endAt)}function Xu(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Se=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).field=r,u.op=i,u.value=s,u}return H(e,t),e.create=function(r,i,s){return r.isKeyField()?i==="in"||i==="not-in"?this.l(r,i,s):new X_(r,i,s):i==="array-contains"?new Z_(r,s):i==="in"?new tA(r,s):i==="not-in"?new eA(r,s):i==="array-contains-any"?new nA(r,s):new e(r,i,s)},e.l=function(r,i,s){return i==="in"?new Y_(r,s):new J_(r,s)},e.prototype.matches=function(r){var i=r.data.field(this.field);return this.op==="!="?i!==null&&this.m(wi(i,this.value)):i!==null&&Tr(this.value)===Tr(i)&&this.m(wi(i,this.value))},e.prototype.m=function(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return r===0;case"!=":return r!==0;case">":return r>0;case">=":return r>=0;default:return B()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),X_=function(t){function e(r,i,s){var u=this;return(u=t.call(this,r,i,s)||this).key=K.fromName(s.referenceValue),u}return H(e,t),e.prototype.matches=function(r){var i=K.comparator(r.key,this.key);return this.m(i)},e}(Se),Y_=function(t){function e(r,i){var s=this;return(s=t.call(this,r,"in",i)||this).keys=t0("in",i),s}return H(e,t),e.prototype.matches=function(r){return this.keys.some(function(i){return i.isEqual(r.key)})},e}(Se),J_=function(t){function e(r,i){var s=this;return(s=t.call(this,r,"not-in",i)||this).keys=t0("not-in",i),s}return H(e,t),e.prototype.matches=function(r){return!this.keys.some(function(i){return i.isEqual(r.key)})},e}(Se);function t0(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(function(i){return K.fromName(i.referenceValue)})}var Z_=function(t){function e(r,i){return t.call(this,r,"array-contains",i)||this}return H(e,t),e.prototype.matches=function(r){var i=r.data.field(this.field);return qf(i)&&Ko(i.arrayValue,this.value)},e}(Se),tA=function(t){function e(r,i){return t.call(this,r,"in",i)||this}return H(e,t),e.prototype.matches=function(r){var i=r.data.field(this.field);return i!==null&&Ko(this.value.arrayValue,i)},e}(Se),eA=function(t){function e(r,i){return t.call(this,r,"not-in",i)||this}return H(e,t),e.prototype.matches=function(r){if(Ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var i=r.data.field(this.field);return i!==null&&!Ko(this.value.arrayValue,i)},e}(Se),nA=function(t){function e(r,i){return t.call(this,r,"array-contains-any",i)||this}return H(e,t),e.prototype.matches=function(r){var i=this,s=r.data.field(this.field);return!(!qf(s)||!s.arrayValue.values)&&s.arrayValue.values.some(function(u){return Ko(i.value.arrayValue,u)})},e}(Se),Go=function(t,e){this.position=t,this.before=e};function Yu(t){return(t.before?"b":"a")+":"+t.position.map(function(e){return jf(e)}).join(",")}var pi=function(t,e){e===void 0&&(e="asc"),this.field=t,this.dir=e};function rA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Vm(t,e,r){for(var i=0,s=0;s<t.position.length;s++){var u=e[s],c=t.position[s];if(i=u.field.isKeyField()?K.comparator(K.fromName(c.referenceValue),r.key):wi(c,r.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return t.before?i<=0:i<0}function Um(t,e){if(t===null)return e===null;if(e===null||t.before!==e.before||t.position.length!==e.position.length)return!1;for(var r=0;r<t.position.length;r++)if(!tn(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn=function(t,e,r,i,s,u,c,l){e===void 0&&(e=null),r===void 0&&(r=[]),i===void 0&&(i=[]),s===void 0&&(s=null),u===void 0&&(u="F"),c===void 0&&(c=null),l===void 0&&(l=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=c,this.endAt=l,this.p=null,this.T=null,this.startAt,this.endAt};function e0(t,e,r,i,s,u,c,l){return new gn(t,e,r,i,s,u,c,l)}function cs(t){return new gn(t)}function Ou(t){return!Dr(t.limit)&&t.limitType==="F"}function Ju(t){return!Dr(t.limit)&&t.limitType==="L"}function Bf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Kf(t){for(var e=0,r=t.filters;e<r.length;e++){var i=r[e];if(i.g())return i.field}return null}function Gf(t){return t.collectionGroup!==null}function bi(t){var e=M(t);if(e.p===null){e.p=[];var r=Kf(e),i=Bf(e);if(r!==null&&i===null)r.isKeyField()||e.p.push(new pi(r)),e.p.push(new pi(Be.keyField(),"asc"));else{for(var s=!1,u=0,c=e.explicitOrderBy;u<c.length;u++){var l=c[u];e.p.push(l),l.field.isKeyField()&&(s=!0)}if(!s){var f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new pi(Be.keyField(),f))}}}return e.p}function en(t){var e=M(t);if(!e.T)if(e.limitType==="F")e.T=Fm(e.path,e.collectionGroup,bi(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var r=[],i=0,s=bi(e);i<s.length;i++){var u=s[i],c=u.dir==="desc"?"asc":"desc";r.push(new pi(u.field,c))}var l=e.endAt?new Go(e.endAt.position,!e.endAt.before):null,f=e.startAt?new Go(e.startAt.position,!e.startAt.before):null;e.T=Fm(e.path,e.collectionGroup,r,e.filters,e.limit,l,f)}return e.T}function n0(t,e,r){return new gn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function hs(t,e){return Sa(en(t),en(e))&&t.limitType===e.limitType}function r0(t){return as(en(t))+"|lt:"+t.limitType}function Jl(t){return"Query(target="+function(e){var r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=", filters: ["+e.filters.map(function(i){return(s=i).field.canonicalString()+" "+s.op+" "+jf(s.value);var s}).join(", ")+"]"),Dr(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=", orderBy: ["+e.orderBy.map(function(i){return function(s){return s.field.canonicalString()+" ("+s.dir+")"}(i)}).join(", ")+"]"),e.startAt&&(r+=", startAt: "+Yu(e.startAt)),e.endAt&&(r+=", endAt: "+Yu(e.endAt)),"Target("+r+")"}(en(t))+"; limitType="+t.limitType+")"}function ls(t,e){return e.isFoundDocument()&&function(r,i){var s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(var s=0,u=r.explicitOrderBy;s<u.length;s++){var c=u[s];if(!c.field.isKeyField()&&i.data.field(c.field)===null)return!1}return!0}(t,e)&&function(r,i){for(var s=0,u=r.filters;s<u.length;s++)if(!u[s].matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!Vm(r.startAt,bi(r),i))&&(!r.endAt||!Vm(r.endAt,bi(r),i))}(t,e)}function i0(t){return function(e,r){for(var i=!1,s=0,u=bi(t);s<u.length;s++){var c=u[s],l=iA(c,e,r);if(l!==0)return l;i=i||c.field.isKeyField()}return 0}}function iA(t,e,r){var i=t.field.isKeyField()?K.comparator(e.key,r.key):function(s,u,c){var l=u.data.field(s),f=c.data.field(s);return l!==null&&f!==null?wi(l,f):B()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function s0(t){return{integerValue:""+t}}function u0(t,e){return Jw(e)?s0(e):o0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a=function(){this._=void 0};function oA(t,e,r){return t instanceof Ii?function(i,s){var u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(r,e):t instanceof Sr?c0(t,e):t instanceof _r?h0(t,e):function(i,s){var u=a0(i,s),c=jm(u)+jm(i.A);return Yl(u)&&Yl(i.A)?s0(c):o0(i.R,c)}(t,e)}function sA(t,e,r){return t instanceof Sr?c0(t,e):t instanceof _r?h0(t,e):r}function a0(t,e){return t instanceof Ei?Yl(r=e)||function(i){return!!i&&"doubleValue"in i}(r)?e:{integerValue:0}:null;var r}var Ii=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e}(_a),Sr=function(t){function e(r){var i=this;return(i=t.call(this)||this).elements=r,i}return H(e,t),e}(_a);function c0(t,e){for(var r=l0(e),i=function(c){r.some(function(l){return tn(l,c)})||r.push(c)},s=0,u=t.elements;s<u.length;s++)i(u[s]);return{arrayValue:{values:r}}}var _r=function(t){function e(r){var i=this;return(i=t.call(this)||this).elements=r,i}return H(e,t),e}(_a);function h0(t,e){for(var r=l0(e),i=function(c){r=r.filter(function(l){return!tn(l,c)})},s=0,u=t.elements;s<u.length;s++)i(u[s]);return{arrayValue:{values:r}}}var Ei=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).R=r,s.A=i,s}return H(e,t),e}(_a);function jm(t){return Dt(t.integerValue||t.doubleValue)}function l0(t){return qf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs=function(t,e){this.field=t,this.transform=e},uA=function(t,e){this.version=t,this.transformResults=e},Qt=function(){function t(e,r){this.updateTime=e,this.exists=r}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},t}();function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Aa=function(){};function aA(t,e,r){t instanceof ps?function(i,s,u){var c=i.value.clone(),l=Km(i.fieldTransforms,s,u.transformResults);c.setAll(l),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,r):t instanceof jn?function(i,s,u){if(xu(i.precondition,s)){var c=Km(i.fieldTransforms,s,u.transformResults),l=s.data;l.setAll(f0(i)),l.setAll(c),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}else s.convertToUnknownDocument(u.version)}(t,e,r):function(i,s,u){s.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,r)}function Zl(t,e,r){t instanceof ps?function(i,s,u){if(xu(i.precondition,s)){var c=i.value.clone(),l=Gm(i.fieldTransforms,u,s);c.setAll(l),s.convertToFoundDocument(Bm(s),c).setHasLocalMutations()}}(t,e,r):t instanceof jn?function(i,s,u){if(xu(i.precondition,s)){var c=Gm(i.fieldTransforms,u,s),l=s.data;l.setAll(f0(i)),l.setAll(c),s.convertToFoundDocument(Bm(s),l).setHasLocalMutations()}}(t,e,r):function(i,s){xu(i.precondition,s)&&s.convertToNoDocument(Z.min())}(t,e)}function cA(t,e){for(var r=null,i=0,s=t.fieldTransforms;i<s.length;i++){var u=s[i],c=e.data.field(u.field),l=a0(u.transform,c||null);l!=null&&(r==null&&(r=Ee.empty()),r.set(u.field,l))}return r||null}function qm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gi(r,i,function(s,u){return function(c,l){return c.field.isEqual(l.field)&&function(f,v){return f instanceof Sr&&v instanceof Sr||f instanceof _r&&v instanceof _r?gi(f.elements,v.elements,tn):f instanceof Ei&&v instanceof Ei?tn(f.A,v.A):f instanceof Ii&&v instanceof Ii}(c.transform,l.transform)}(s,u)})}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Bm(t){return t.isFoundDocument()?t.version:Z.min()}var ps=function(t){function e(r,i,s,u){u===void 0&&(u=[]);var c=this;return(c=t.call(this)||this).key=r,c.value=i,c.precondition=s,c.fieldTransforms=u,c.type=0,c}return H(e,t),e}(Aa),jn=function(t){function e(r,i,s,u,c){c===void 0&&(c=[]);var l=this;return(l=t.call(this)||this).key=r,l.data=i,l.fieldMask=s,l.precondition=u,l.fieldTransforms=c,l.type=1,l}return H(e,t),e}(Aa);function f0(t){var e=new Map;return t.fieldMask.fields.forEach(function(r){if(!r.isEmpty()){var i=t.data.field(r);e.set(r,i)}}),e}function Km(t,e,r){var i=new Map;z(t.length===r.length);for(var s=0;s<r.length;s++){var u=t[s],c=u.transform,l=e.data.field(u.field);i.set(u.field,sA(c,l,r[s]))}return i}function Gm(t,e,r){for(var i=new Map,s=0,u=t;s<u.length;s++){var c=u[s],l=c.transform,f=r.data.field(c.field);i.set(c.field,oA(l,f,e))}return i}var kt,it,ds=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).key=r,s.precondition=i,s.type=2,s.fieldTransforms=[],s}return H(e,t),e}(Aa),Hf=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).key=r,s.precondition=i,s.type=3,s.fieldTransforms=[],s}return H(e,t),e}(Aa),hA=function(t){this.count=t};function p0(t){switch(t){case _.OK:return B();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return B()}}function d0(t){if(t===void 0)return Ct("GRPC error has no .code"),_.UNKNOWN;switch(t){case kt.OK:return _.OK;case kt.CANCELLED:return _.CANCELLED;case kt.UNKNOWN:return _.UNKNOWN;case kt.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case kt.INTERNAL:return _.INTERNAL;case kt.UNAVAILABLE:return _.UNAVAILABLE;case kt.UNAUTHENTICATED:return _.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case kt.NOT_FOUND:return _.NOT_FOUND;case kt.ALREADY_EXISTS:return _.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return _.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case kt.ABORTED:return _.ABORTED;case kt.OUT_OF_RANGE:return _.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return _.UNIMPLEMENTED;case kt.DATA_LOSS:return _.DATA_LOSS;default:return B()}}(it=kt||(kt={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt=function(){function t(e,r){this.comparator=e,this.root=r||Cn.EMPTY}return t.prototype.insert=function(e,r){return new t(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Cn.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))},t.prototype.get=function(e){for(var r=this.root;!r.isEmpty();){var i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null},t.prototype.indexOf=function(e){for(var r=0,i=this.root;!i.isEmpty();){var s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},t.prototype.forEach=function(e){this.inorderTraversal(function(r,i){return e(r,i),!1})},t.prototype.toString=function(){var e=[];return this.inorderTraversal(function(r,i){return e.push(r+":"+i),!1}),"{"+e.join(", ")+"}"},t.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},t.prototype.getIterator=function(){return new Au(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(e){return new Au(this.root,e,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Au(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(e){return new Au(this.root,e,this.comparator,!0)},t}(),Au=function(){function t(e,r,i,s){this.isReverse=s,this.nodeStack=[];for(var u=1;!e.isEmpty();)if(u=r?i(e.key,r):1,s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return t.prototype.getNext=function(){var e=this.nodeStack.pop(),r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(this.nodeStack.length===0)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},t}(),Cn=function(){function t(e,r,i,s,u){this.key=e,this.value=r,this.color=i??t.RED,this.left=s??t.EMPTY,this.right=u??t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,r,i,s,u){return new t(e??this.key,r??this.value,i??this.color,s??this.left,u??this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},t.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(e,r,i){var s=this,u=i(e,s.key);return(s=u<0?s.copy(null,null,null,s.left.insert(e,r,i),null):u===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,r){var i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return t.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},t.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},t.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)},t.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();var e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)},t}();Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1,Cn.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw B()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw B()},enumerable:!1,configurable:!0}),t.prototype.copy=function(e,r,i,s,u){return this},t.prototype.insert=function(e,r,i){return new Cn(e,r)},t.prototype.remove=function(e,r){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(e){return!1},t.prototype.reverseTraversal=function(e){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt=function(){function t(e){this.comparator=e,this.data=new Jt(this.comparator)}return t.prototype.has=function(e){return this.data.get(e)!==null},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return this.data.indexOf(e)},t.prototype.forEach=function(e){this.data.inorderTraversal(function(r,i){return e(r),!1})},t.prototype.forEachInRange=function(e,r){for(var i=this.data.getIteratorFrom(e[0]);i.hasNext();){var s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}},t.prototype.forEachWhile=function(e,r){var i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return},t.prototype.firstAfterOrEqual=function(e){var r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null},t.prototype.getIterator=function(){return new Hm(this.data.getIterator())},t.prototype.getIteratorFrom=function(e){return new Hm(this.data.getIteratorFrom(e))},t.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},t.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(e){var r=this;return r.size<e.size&&(r=e,e=this),e.forEach(function(i){r=r.add(i)}),r},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var r=this.data.getIterator(),i=e.data.getIterator();r.hasNext();){var s=r.getNext().key,u=i.getNext().key;if(this.comparator(s,u)!==0)return!1}return!0},t.prototype.toArray=function(){var e=[];return this.forEach(function(r){e.push(r)}),e},t.prototype.toString=function(){var e=[];return this.forEach(function(r){return e.push(r)}),"SortedSet("+e.toString()+")"},t.prototype.copy=function(e){var r=new t(this.comparator);return r.data=e,r},t}(),Hm=function(){function t(e){this.iter=e}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),lA=new Jt(K.comparator);function je(){return lA}var fA=new Jt(K.comparator);function tf(){return fA}var pA=new Jt(K.comparator);function dA(){return pA}var vA=new Mt(K.comparator);function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=vA,i=0,s=t;i<s.length;i++){var u=s[i];r=r.add(u)}return r}var gA=new Mt(rt);function Na(){return gA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zf=function(){function t(e,r,i,s,u){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=u}return t.createSynthesizedRemoteEventForCurrentChange=function(e,r){var i=new Map;return i.set(e,Wf.createSynthesizedTargetChangeForCurrentChange(e,r)),new t(Z.min(),i,Na(),je(),ft())},t}(),Wf=function(){function t(e,r,i,s,u){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=u}return t.createSynthesizedTargetChangeForCurrentChange=function(e,r){return new t(pe.EMPTY_BYTE_STRING,r,ft(),ft(),ft())},t}(),Pu=function(t,e,r,i){this.v=t,this.removedTargetIds=e,this.key=r,this.P=i},v0=function(t,e){this.targetId=t,this.V=e},g0=function(t,e,r,i){r===void 0&&(r=pe.EMPTY_BYTE_STRING),i===void 0&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i},zm=function(){function t(){this.S=0,this.D=$m(),this.C=pe.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},t.prototype.M=function(){var e=ft(),r=ft(),i=ft();return this.D.forEach(function(s,u){switch(u){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:B()}}),new Wf(this.C,this.N,e,r,i)},t.prototype.L=function(){this.k=!1,this.D=$m()},t.prototype.B=function(e,r){this.k=!0,this.D=this.D.insert(e,r)},t.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),mA=function(){function t(e){this.W=e,this.G=new Map,this.H=je(),this.J=Wm(),this.Y=new Mt(rt)}return t.prototype.X=function(e){for(var r=0,i=e.v;r<i.length;r++){var s=i[r];e.P&&e.P.isFoundDocument()?this.Z(s,e.P):this.tt(s,e.key,e.P)}for(var u=0,c=e.removedTargetIds;u<c.length;u++)s=c[u],this.tt(s,e.key,e.P)},t.prototype.et=function(e){var r=this;this.forEachTarget(e,function(i){var s=r.nt(i);switch(e.state){case 0:r.st(i)&&s.O(e.resumeToken);break;case 1:s.K(),s.F||s.L(),s.O(e.resumeToken);break;case 2:s.K(),s.F||r.removeTarget(i);break;case 3:r.st(i)&&(s.j(),s.O(e.resumeToken));break;case 4:r.st(i)&&(r.it(i),s.O(e.resumeToken));break;default:B()}})},t.prototype.forEachTarget=function(e,r){var i=this;e.targetIds.length>0?e.targetIds.forEach(r):this.G.forEach(function(s,u){i.st(u)&&r(u)})},t.prototype.rt=function(e){var r=e.targetId,i=e.V.count,s=this.ot(r);if(s){var u=s.target;if(Xu(u))if(i===0){var c=new K(u.path);this.tt(r,c,Yt.newNoDocument(c,Z.min()))}else z(i===1);else this.ct(r)!==i&&(this.it(r),this.Y=this.Y.add(r))}},t.prototype.ut=function(e){var r=this,i=new Map;this.G.forEach(function(c,l){var f=r.ot(l);if(f){if(c.current&&Xu(f.target)){var v=new K(f.target.path);r.H.get(v)!==null||r.at(l,v)||r.tt(l,v,Yt.newNoDocument(v,e))}c.$&&(i.set(l,c.M()),c.L())}});var s=ft();this.J.forEach(function(c,l){var f=!0;l.forEachWhile(function(v){var m=r.ot(v);return!m||m.purpose===2||(f=!1,!1)}),f&&(s=s.add(c))});var u=new zf(e,i,this.Y,this.H,s);return this.H=je(),this.J=Wm(),this.Y=new Mt(rt),u},t.prototype.Z=function(e,r){if(this.st(e)){var i=this.at(e,r.key)?2:0;this.nt(e).B(r.key,i),this.H=this.H.insert(r.key,r),this.J=this.J.insert(r.key,this.ht(r.key).add(e))}},t.prototype.tt=function(e,r,i){if(this.st(e)){var s=this.nt(e);this.at(e,r)?s.B(r,1):s.q(r),this.J=this.J.insert(r,this.ht(r).delete(e)),i&&(this.H=this.H.insert(r,i))}},t.prototype.removeTarget=function(e){this.G.delete(e)},t.prototype.ct=function(e){var r=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size},t.prototype.U=function(e){this.nt(e).U()},t.prototype.nt=function(e){var r=this.G.get(e);return r||(r=new zm,this.G.set(e,r)),r},t.prototype.ht=function(e){var r=this.J.get(e);return r||(r=new Mt(rt),this.J=this.J.insert(e,r)),r},t.prototype.st=function(e){var r=this.ot(e)!==null;return r||P("WatchChangeAggregator","Detected inactive target",e),r},t.prototype.ot=function(e){var r=this.G.get(e);return r&&r.F?null:this.W.lt(e)},t.prototype.it=function(e){var r=this;this.G.set(e,new zm),this.W.getRemoteKeysForTarget(e).forEach(function(i){r.tt(e,i,null)})},t.prototype.at=function(e,r){return this.W.getRemoteKeysForTarget(e).has(r)},t}();function Wm(){return new Jt(K.comparator)}function $m(){return new Jt(K.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yA={asc:"ASCENDING",desc:"DESCENDING"},wA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bA=function(t,e){this.databaseId=t,this.I=e};function Ho(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function m0(t,e){return t.I?e.toBase64():e.toUint8Array()}function IA(t,e){return Ho(t,e.toTimestamp())}function oe(t){return z(!!t),Z.fromTimestamp(function(e){var r=Mn(e);return new fe(r.seconds,r.nanos)}(t))}function $f(t,e){return function(r){return new ut(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function y0(t){var e=ut.fromString(t);return z(_0(e)),e}function zo(t,e){return $f(t.databaseId,e.path)}function fn(t,e){var r=y0(e);if(r.get(1)!==t.databaseId.projectId)throw new R(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new R(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new K(b0(r))}function ef(t,e){return $f(t.databaseId,e)}function w0(t){var e=y0(t);return e.length===4?ut.emptyPath():b0(e)}function Wo(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function b0(t){return z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qm(t,e,r){return{name:zo(t,e),fields:r.value.mapValue.fields}}function EA(t,e,r){var i=fn(t,e.name),s=oe(e.updateTime),u=new Ee({mapValue:{fields:e.fields}}),c=Yt.newFoundDocument(i,s,u);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function Zu(t,e){var r;if(e instanceof ps)r={update:Qm(t,e.key,e.value)};else if(e instanceof ds)r={delete:zo(t,e.key)};else if(e instanceof jn)r={update:Qm(t,e.key,e.data),updateMask:NA(e.fieldMask)};else{if(!(e instanceof Hf))return B();r={verify:zo(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(function(i){return function(s,u){var c=u.transform;if(c instanceof Ii)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sr)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _r)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ei)return{fieldPath:u.field.canonicalString(),increment:c.A};throw B()}(0,i)})),e.precondition.isNone||(r.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:IA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),r}function Xm(t,e){var r=e.currentDocument?function(v){return v.updateTime!==void 0?Qt.updateTime(oe(v.updateTime)):v.exists!==void 0?Qt.exists(v.exists):Qt.none()}(e.currentDocument):Qt.none(),i=e.updateTransforms?e.updateTransforms.map(function(v){return function(m,y){var w=null;if("setToServerValue"in y)z(y.setToServerValue==="REQUEST_TIME"),w=new Ii;else if("appendMissingElements"in y){var I=y.appendMissingElements.values||[];w=new Sr(I)}else if("removeAllFromArray"in y){var E=y.removeAllFromArray.values||[];w=new _r(E)}else"increment"in y?w=new Ei(m,y.increment):B();var S=Be.fromServerFormat(y.fieldPath);return new fs(S,w)}(t,v)}):[];if(e.update){e.update.name;var s=fn(t,e.update.name),u=new Ee({mapValue:{fields:e.update.fields}});if(e.updateMask){var c=function(v){var m=v.fieldPaths||[];return new mi(m.map(function(y){return Be.fromServerFormat(y)}))}(e.updateMask);return new jn(s,u,c,r,i)}return new ps(s,u,r,i)}if(e.delete){var l=fn(t,e.delete);return new ds(l,r)}if(e.verify){var f=fn(t,e.verify);return new Hf(f,r)}return B()}function I0(t,e){return{documents:[ef(t,e.path)]}}function E0(t,e){var r={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(r.parent=ef(t,i),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=ef(t,i.popLast()),r.structuredQuery.from=[{collectionId:i.lastSegment()}]);var s=function(l){if(l.length!==0){var f=l.map(function(v){return function(m){if(m.op==="=="){if(Mm(m.value))return{unaryFilter:{field:si(m.field),op:"IS_NAN"}};if(Lm(m.value))return{unaryFilter:{field:si(m.field),op:"IS_NULL"}}}else if(m.op==="!="){if(Mm(m.value))return{unaryFilter:{field:si(m.field),op:"IS_NOT_NAN"}};if(Lm(m.value))return{unaryFilter:{field:si(m.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(m.field),op:SA(m.op),value:m.value}}}(v)});return f.length===1?f[0]:{compositeFilter:{op:"AND",filters:f}}}}(e.filters);s&&(r.structuredQuery.where=s);var u=function(l){if(l.length!==0)return l.map(function(f){return function(v){return{field:si(v.field),direction:TA(v.dir)}}(f)})}(e.orderBy);u&&(r.structuredQuery.orderBy=u);var c=function(l,f){return l.I||Dr(f)?f:{value:f}}(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=Ym(e.startAt)),e.endAt&&(r.structuredQuery.endAt=Ym(e.endAt)),r}function T0(t){var e=w0(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,s=null;if(i>0){z(i===1);var u=r.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}var c=[];r.where&&(c=S0(r.where));var l=[];r.orderBy&&(l=r.orderBy.map(function(y){return function(w){return new pi(fi(w.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(y)}));var f=null;r.limit&&(f=function(y){var w;return Dr(w=typeof y=="object"?y.value:y)?null:w}(r.limit));var v=null;r.startAt&&(v=Jm(r.startAt));var m=null;return r.endAt&&(m=Jm(r.endAt)),e0(e,s,l,c,f,"F",v,m)}function S0(t){return t?t.unaryFilter!==void 0?[AA(t)]:t.fieldFilter!==void 0?[_A(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(function(e){return S0(e)}).reduce(function(e,r){return e.concat(r)}):B():[]}function Ym(t){return{before:t.before,values:t.position}}function Jm(t){var e=!!t.before,r=t.values||[];return new Go(r,e)}function TA(t){return yA[t]}function SA(t){return wA[t]}function si(t){return{fieldPath:t.canonicalString()}}function fi(t){return Be.fromServerFormat(t.fieldPath)}function _A(t){return Se.create(fi(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}function AA(t){switch(t.unaryFilter.op){case"IS_NAN":var e=fi(t.unaryFilter.field);return Se.create(e,"==",{doubleValue:NaN});case"IS_NULL":var r=fi(t.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=fi(t.unaryFilter.field);return Se.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var s=fi(t.unaryFilter.field);return Se.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return B()}}function NA(t){var e=[];return t.fields.forEach(function(r){return e.push(r.canonicalString())}),{fieldPaths:e}}function _0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){for(var e="",r=0;r<t.length;r++)e.length>0&&(e=Zm(e)),e=kA(t.get(r),e);return Zm(e)}function kA(t,e){for(var r=e,i=t.length,s=0;s<i;s++){var u=t.charAt(s);switch(u){case"\0":r+="";break;case"":r+="";break;default:r+=u}}return r}function Zm(t){return t+""}function ln(t){var e=t.length;if(z(e>=2),e===2)return z(t.charAt(0)===""&&t.charAt(1)===""),ut.emptyPath();for(var r=e-2,i=[],s="",u=0;u<e;){var c=t.indexOf("",u);switch((c<0||c>r)&&B(),t.charAt(c+1)){case"":var l=t.substring(u,c),f=void 0;s.length===0?f=l:(f=s+=l,s=""),i.push(f);break;case"":s+=t.substring(u,c),s+="\0";break;case"":s+=t.substring(u,c+1);break;default:B()}u=c+2}return new ut(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DA=function(t,e){this.seconds=t,this.nanoseconds=e},be=function(t,e,r){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=r};be.store="owner",be.key="owner";var Pn=function(t,e,r){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=r};Pn.store="mutationQueues",Pn.keyPath="userId";var pt=function(t,e,r,i,s){this.userId=t,this.batchId=e,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=s};pt.store="mutations",pt.keyPath="batchId",pt.userMutationsIndex="userMutationsIndex",pt.userMutationsKeyPath=["userId","batchId"];var Wt=function(){function t(){}return t.prefixForUser=function(e){return[e]},t.prefixForPath=function(e,r){return[e,qe(r)]},t.key=function(e,r,i){return[e,qe(r),i]},t}();Wt.store="documentMutations",Wt.PLACEHOLDER=new Wt;var CA=function(t,e){this.path=t,this.readTime=e},RA=function(t,e){this.path=t,this.version=e},Et=function(t,e,r,i,s,u){this.unknownDocument=t,this.noDocument=e,this.document=r,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=u};Et.store="remoteDocuments",Et.readTimeIndex="readTimeIndex",Et.readTimeIndexPath="readTime",Et.collectionReadTimeIndex="collectionReadTimeIndex",Et.collectionReadTimeIndexPath=["parentPath","readTime"];var Je=function(t){this.byteSize=t};Je.store="remoteDocumentGlobal",Je.key="remoteDocumentGlobalKey";var le=function(t,e,r,i,s,u,c){this.targetId=t,this.canonicalId=e,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=u,this.query=c};le.store="targets",le.keyPath="targetId",le.queryTargetsIndexName="queryTargetsIndex",le.queryTargetsKeyPath=["canonicalId","targetId"];var Bt=function(t,e,r){this.targetId=t,this.path=e,this.sequenceNumber=r};Bt.store="targetDocuments",Bt.keyPath=["targetId","path"],Bt.documentTargetsIndex="documentTargetsIndex",Bt.documentTargetsKeyPath=["path","targetId"];var Ie=function(t,e,r,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Ie.key="targetGlobalKey",Ie.store="targetGlobal";var mr=function(t,e){this.collectionId=t,this.parent=e};mr.store="collectionParents",mr.keyPath=["collectionId","parent"];var pn=function(t,e,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=r,this.inForeground=i};pn.store="clientMetadata",pn.keyPath="clientId";var Ti=function(t,e,r){this.bundleId=t,this.createTime=e,this.version=r};Ti.store="bundles",Ti.keyPath="bundleId";var Si=function(t,e,r){this.name=t,this.readTime=e,this.bundledQuery=r};Si.store="namedQueries",Si.keyPath="name";var OA=Tt(Tt([],Tt(Tt([],Tt(Tt([],Tt(Tt([],[Pn.store,pt.store,Wt.store,Et.store,le.store,be.store,Ie.store,Bt.store]),[pn.store])),[Je.store])),[mr.store])),[Ti.store,Si.store]),A0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",N0=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},t}(),de=function(){var t=this;this.promise=new Promise(function(e,r){t.resolve=e,t.reject=r})},O=function(){function t(e){var r=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(i){r.isDone=!0,r.result=i,r.nextCallback&&r.nextCallback(i)},function(i){r.isDone=!0,r.error=i,r.catchCallback&&r.catchCallback(i)})}return t.prototype.catch=function(e){return this.next(void 0,e)},t.prototype.next=function(e,r){var i=this;return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new t(function(s,u){i.nextCallback=function(c){i.wrapSuccess(e,c).next(s,u)},i.catchCallback=function(c){i.wrapFailure(r,c).next(s,u)}})},t.prototype.toPromise=function(){var e=this;return new Promise(function(r,i){e.next(r,i)})},t.prototype.wrapUserFunction=function(e){try{var r=e();return r instanceof t?r:t.resolve(r)}catch(i){return t.reject(i)}},t.prototype.wrapSuccess=function(e,r){return e?this.wrapUserFunction(function(){return e(r)}):t.resolve(r)},t.prototype.wrapFailure=function(e,r){return e?this.wrapUserFunction(function(){return e(r)}):t.reject(r)},t.resolve=function(e){return new t(function(r,i){r(e)})},t.reject=function(e){return new t(function(r,i){i(e)})},t.waitFor=function(e){return new t(function(r,i){var s=0,u=0,c=!1;e.forEach(function(l){++s,l.next(function(){++u,c&&u===s&&r()},function(f){return i(f)})}),c=!0,u===s&&r()})},t.or=function(e){for(var r=t.resolve(!1),i=function(c){r=r.next(function(l){return l?t.resolve(l):c()})},s=0,u=e;s<u.length;s++)i(u[s]);return r},t.forEach=function(e,r){var i=this,s=[];return e.forEach(function(u,c){s.push(r.call(i,u,c))}),this.waitFor(s)},t}(),k0=function(){function t(e,r){var i=this;this.action=e,this.transaction=r,this.aborted=!1,this.ft=new de,this.transaction.oncomplete=function(){i.ft.resolve()},this.transaction.onabort=function(){r.error?i.ft.reject(new Po(e,r.error)):i.ft.resolve()},this.transaction.onerror=function(s){var u=Qf(s.target.error);i.ft.reject(new Po(e,u))}}return t.open=function(e,r,i,s){try{return new t(r,e.transaction(s,i))}catch(u){throw new Po(r,u)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(P("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(e){var r=this.transaction.objectStore(e);return new PA(r)},t}(),_i=function(){function t(e,r,i){this.name=e,this.version=r,this.wt=i,t._t(br())===12.2&&Ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return P("SimpleDb","Removing database:",e),fr(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if(typeof indexedDB>"u")return!1;if(t.gt())return!0;var e=br(),r=t._t(e),i=0<r&&r<10,s=t.Et(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||u)},t.gt=function(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.Tt)==="YES"},t.It=function(e,r){return e.store(r)},t._t=function(e){var r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(i)},t.Et=function(e){var r=e.match(/Android ([\d.]+)/i),i=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(i)},t.prototype.At=function(e){return C(this,void 0,void 0,function(){var r,i=this;return k(this,function(s){switch(s.label){case 0:return this.db?[3,2]:(P("SimpleDb","Opening database:",this.name),r=this,[4,new Promise(function(u,c){var l=indexedDB.open(i.name,i.version);l.onsuccess=function(f){var v=f.target.result;u(v)},l.onblocked=function(){c(new Po(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(f){var v=f.target.error;v.name==="VersionError"?c(new R(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(new Po(e,v))},l.onupgradeneeded=function(f){P("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',f.oldVersion);var v=f.target.result;i.wt.Rt(v,l.transaction,f.oldVersion,i.version).next(function(){P("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:r.db=s.sent(),s.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(u){return i.bt(u)}),this.db)]}})})},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(r){return e(r)})},t.prototype.runTransaction=function(e,r,i,s){return C(this,void 0,void 0,function(){var u,c,l,f,v;return k(this,function(m){switch(m.label){case 0:u=r==="readonly",c=0,l=function(){var y,w,I,E,S;return k(this,function(N){switch(N.label){case 0:++c,N.label=1;case 1:return N.trys.push([1,4,,5]),[4,f.At(e)];case 2:return f.db=N.sent(),y=k0.open(f.db,e,u?"readonly":"readwrite",i),w=s(y).catch(function(x){return y.abort(x),O.reject(x)}).toPromise(),I={},w.catch(function(){}),[4,y.dt];case 3:return[2,(I.value=(N.sent(),w),I)];case 4:return E=N.sent(),S=E.name!=="FirebaseError"&&c<3,P("SimpleDb","Transaction failed with error:",E.message,"Retrying:",S),f.close(),S?[3,5]:[2,{value:Promise.reject(E)}];case 5:return[2]}})},f=this,m.label=1;case 1:return[5,l()];case 2:if(typeof(v=m.sent())=="object")return[2,v.value];m.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),xA=function(){function t(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(e){this.St=e},t.prototype.delete=function(){return fr(this.Pt.delete())},t}(),Po=function(t){function e(r,i){var s=this;return(s=t.call(this,_.UNAVAILABLE,"IndexedDB transaction '"+r+"' failed: "+i)||this).name="IndexedDbTransactionError",s}return H(e,t),e}(R);function Cr(t){return t.name==="IndexedDbTransactionError"}var PA=function(){function t(e){this.store=e}return t.prototype.put=function(e,r){var i;return r!==void 0?(P("SimpleDb","PUT",this.store.name,e,r),i=this.store.put(r,e)):(P("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),fr(i)},t.prototype.add=function(e){return P("SimpleDb","ADD",this.store.name,e,e),fr(this.store.add(e))},t.prototype.get=function(e){var r=this;return fr(this.store.get(e)).next(function(i){return i===void 0&&(i=null),P("SimpleDb","GET",r.store.name,e,i),i})},t.prototype.delete=function(e){return P("SimpleDb","DELETE",this.store.name,e),fr(this.store.delete(e))},t.prototype.count=function(){return P("SimpleDb","COUNT",this.store.name),fr(this.store.count())},t.prototype.Nt=function(e,r){var i=this.cursor(this.options(e,r)),s=[];return this.xt(i,function(u,c){s.push(c)}).next(function(){return s})},t.prototype.kt=function(e,r){P("SimpleDb","DELETE ALL",this.store.name);var i=this.options(e,r);i.Ft=!1;var s=this.cursor(i);return this.xt(s,function(u,c,l){return l.delete()})},t.prototype.$t=function(e,r){var i;r?i=e:(i={},r=e);var s=this.cursor(i);return this.xt(s,r)},t.prototype.Ot=function(e){var r=this.cursor({});return new O(function(i,s){r.onerror=function(u){var c=Qf(u.target.error);s(c)},r.onsuccess=function(u){var c=u.target.result;c?e(c.primaryKey,c.value).next(function(l){l?c.continue():i()}):i()}})},t.prototype.xt=function(e,r){var i=[];return new O(function(s,u){e.onerror=function(c){u(c.target.error)},e.onsuccess=function(c){var l=c.target.result;if(l){var f=new xA(l),v=r(l.primaryKey,l.value,f);if(v instanceof O){var m=v.catch(function(y){return f.done(),O.reject(y)});i.push(m)}f.isDone?s():f.Dt===null?l.continue():l.continue(f.Dt)}else s()}}).next(function(){return O.waitFor(i)})},t.prototype.options=function(e,r){var i;return e!==void 0&&(typeof e=="string"?i=e:r=e),{index:i,range:r}},t.prototype.cursor=function(e){var r="next";if(e.reverse&&(r="prev"),e.index){var i=this.store.index(e.index);return e.Ft?i.openKeyCursor(e.range,r):i.openCursor(e.range,r)}return this.store.openCursor(e.range,r)},t}();function fr(t){return new O(function(e,r){t.onsuccess=function(i){var s=i.target.result;e(s)},t.onerror=function(i){var s=Qf(i.target.error);r(s)}})}var ty=!1;function Qf(t){var e=_i._t(br());if(e>=12.2&&e<13){var r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){var i=new R("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+r+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ty||(ty=!0,setTimeout(function(){throw i},0)),i}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ey=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).Mt=r,s.currentSequenceNumber=i,s}return H(e,t),e}(N0);function ve(t,e){var r=M(t);return _i.It(r.Mt,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xf=function(){function t(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}return t.prototype.applyToRemoteDocument=function(e,r){for(var i=r.mutationResults,s=0;s<this.mutations.length;s++){var u=this.mutations[s];u.key.isEqual(e.key)&&aA(u,e,i[s])}},t.prototype.applyToLocalView=function(e){for(var r=0,i=this.baseMutations;r<i.length;r++)(c=i[r]).key.isEqual(e.key)&&Zl(c,e,this.localWriteTime);for(var s=0,u=this.mutations;s<u.length;s++){var c;(c=u[s]).key.isEqual(e.key)&&Zl(c,e,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(e){var r=this;this.mutations.forEach(function(i){var s=e.get(i.key),u=s;r.applyToLocalView(u),s.isValidDocument()||u.convertToNoDocument(Z.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(e,r){return e.add(r.key)},ft())},t.prototype.isEqual=function(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,function(r,i){return qm(r,i)})&&gi(this.baseMutations,e.baseMutations,function(r,i){return qm(r,i)})},t}(),LA=function(){function t(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}return t.from=function(e,r,i){z(e.mutations.length===i.length);for(var s=dA(),u=e.mutations,c=0;c<u.length;c++)s=s.insert(u[c].key,i[c].version);return new t(e,r,i,s)},t}(),ka=function(){function t(e,r,i,s,u,c,l){u===void 0&&(u=Z.min()),c===void 0&&(c=Z.min()),l===void 0&&(l=pe.EMPTY_BYTE_STRING),this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=l}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,r){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),D0=function(t){this.Lt=t};function nf(t,e){if(e.document)return EA(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var r=K.fromSegments(e.noDocument.path),i=Ni(e.noDocument.readTime),s=Yt.newNoDocument(r,i);return e.hasCommittedMutations?s.setHasCommittedMutations():s}if(e.unknownDocument){var u=K.fromSegments(e.unknownDocument.path);return i=Ni(e.unknownDocument.version),Yt.newUnknownDocument(u,i)}return B()}function ny(t,e,r){var i=Yf(r),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var u=function(y,w){return{name:zo(y,w.key),fields:w.data.value.mapValue.fields,updateTime:Ho(y,w.version.toTimestamp())}}(t.Lt,e),c=e.hasCommittedMutations;return new Et(null,null,u,c,i,s)}if(e.isNoDocument()){var l=e.key.path.toArray(),f=Ai(e.version);return c=e.hasCommittedMutations,new Et(null,new CA(l,f),null,c,i,s)}if(e.isUnknownDocument()){var v=e.key.path.toArray(),m=Ai(e.version);return new Et(new RA(v,m),null,null,!0,i,s)}return B()}function Yf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function C0(t){var e=new fe(t[0],t[1]);return Z.fromTimestamp(e)}function Ai(t){var e=t.toTimestamp();return new DA(e.seconds,e.nanoseconds)}function Ni(t){var e=new fe(t.seconds,t.nanoseconds);return Z.fromTimestamp(e)}function ci(t,e){for(var r=(e.baseMutations||[]).map(function(f){return Xm(t.Lt,f)}),i=0;i<e.mutations.length-1;++i){var s=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){var u=e.mutations[i+1];s.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}var c=e.mutations.map(function(f){return Xm(t.Lt,f)}),l=fe.fromMillis(e.localWriteTimeMs);return new Xf(e.batchId,l,r,c)}function Co(t){var e,r,i=Ni(t.readTime),s=t.lastLimboFreeSnapshotVersion!==void 0?Ni(t.lastLimboFreeSnapshotVersion):Z.min();return t.query.documents!==void 0?(z((r=t.query).documents.length===1),e=en(cs(w0(r.documents[0])))):e=function(u){return en(T0(u))}(t.query),new ka(e,t.targetId,0,t.lastListenSequenceNumber,i,s,pe.fromBase64String(t.resumeToken))}function R0(t,e){var r,i=Ai(e.snapshotVersion),s=Ai(e.lastLimboFreeSnapshotVersion);r=Xu(e.target)?I0(t.Lt,e.target):E0(t.Lt,e.target);var u=e.resumeToken.toBase64();return new le(e.targetId,as(e.target),i,u,e.sequenceNumber,s,r)}function O0(t){var e=T0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?n0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MA=function(){function t(){}return t.prototype.getBundleMetadata=function(e,r){return ry(e).get(r).next(function(i){if(i)return{id:(s=i).bundleId,createTime:Ni(s.createTime),version:s.version};var s})},t.prototype.saveBundleMetadata=function(e,r){return ry(e).put({bundleId:(i=r).id,createTime:Ai(oe(i.createTime)),version:i.version});var i},t.prototype.getNamedQuery=function(e,r){return iy(e).get(r).next(function(i){if(i)return{name:(s=i).name,query:O0(s.bundledQuery),readTime:Ni(s.readTime)};var s})},t.prototype.saveNamedQuery=function(e,r){return iy(e).put(function(i){return{name:i.name,readTime:Ai(oe(i.readTime)),bundledQuery:i.bundledQuery}}(r))},t}();function ry(t){return ve(t,Ti.store)}function iy(t){return ve(t,Si.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FA=function(){function t(){this.Bt=new Jf}return t.prototype.addToCollectionParentIndex=function(e,r){return this.Bt.add(r),O.resolve()},t.prototype.getCollectionParents=function(e,r){return O.resolve(this.Bt.getEntries(r))},t}(),Jf=function(){function t(){this.index={}}return t.prototype.add=function(e){var r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Mt(ut.comparator),u=!s.has(i);return this.index[r]=s.add(i),u},t.prototype.has=function(e){var r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)},t.prototype.getEntries=function(e){return(this.index[e]||new Mt(ut.comparator)).toArray()},t}(),VA=function(){function t(){this.qt=new Jf}return t.prototype.addToCollectionParentIndex=function(e,r){var i=this;if(!this.qt.has(r)){var s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(function(){i.qt.add(r)});var c={collectionId:s,parent:qe(u)};return oy(e).put(c)}return O.resolve()},t.prototype.getCollectionParents=function(e,r){var i=[],s=IDBKeyRange.bound([r,""],[$w(r),""],!1,!0);return oy(e).Nt(s).next(function(u){for(var c=0,l=u;c<l.length;c++){var f=l[c];if(f.collectionId!==r)break;i.push(ln(f.parent))}return i})},t}();function oy(t){return ve(t,mr.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ye=function(){function t(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(t,e,r){var i=t.store(pt.store),s=t.store(Wt.store),u=[],c=IDBKeyRange.only(r.batchId),l=0,f=i.$t({range:c},function(E,S,N){return l++,N.delete()});u.push(f.next(function(){z(l===1)}));for(var v=[],m=0,y=r.mutations;m<y.length;m++){var w=y[m],I=Wt.key(e,w.key.path,r.batchId);u.push(s.delete(I)),v.push(w.key)}return O.waitFor(u).next(function(){return v})}function ta(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw B();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ye.DEFAULT_COLLECTION_PERCENTILE=10,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ye.DEFAULT=new Ye(41943040,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ye.DISABLED=new Ye(-1,0,0);var UA=function(){function t(e,r,i,s){this.userId=e,this.R=r,this.Ut=i,this.referenceDelegate=s,this.Kt={}}return t.Qt=function(e,r,i,s){return z(e.uid!==""),new t(e.isAuthenticated()?e.uid:"",r,i,s)},t.prototype.checkEmpty=function(e){var r=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nn(e).$t({index:pt.userMutationsIndex,range:i},function(s,u,c){r=!1,c.done()}).next(function(){return r})},t.prototype.addMutationBatch=function(e,r,i,s){var u=this,c=hi(e),l=Nn(e);return l.add({}).next(function(f){z(typeof f=="number");for(var v=new Xf(f,r,i,s),m=function(x,F,U){var X=U.baseMutations.map(function(L){return Zu(x.Lt,L)}),et=U.mutations.map(function(L){return Zu(x.Lt,L)});return new pt(F,U.batchId,U.localWriteTime.toMillis(),X,et)}(u.R,u.userId,v),y=[],w=new Mt(function(x,F){return rt(x.canonicalString(),F.canonicalString())}),I=0,E=s;I<E.length;I++){var S=E[I],N=Wt.key(u.userId,S.key.path,f);w=w.add(S.key.path.popLast()),y.push(l.put(m)),y.push(c.put(N,Wt.PLACEHOLDER))}return w.forEach(function(x){y.push(u.Ut.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(function(){u.Kt[f]=v.keys()}),O.waitFor(y).next(function(){return v})})},t.prototype.lookupMutationBatch=function(e,r){var i=this;return Nn(e).get(r).next(function(s){return s?(z(s.userId===i.userId),ci(i.R,s)):null})},t.prototype.jt=function(e,r){var i=this;return this.Kt[r]?O.resolve(this.Kt[r]):this.lookupMutationBatch(e,r).next(function(s){if(s){var u=s.keys();return i.Kt[r]=u,u}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(e,r){var i=this,s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]),c=null;return Nn(e).$t({index:pt.userMutationsIndex,range:u},function(l,f,v){f.userId===i.userId&&(z(f.batchId>=s),c=ci(i.R,f)),v.done()}).next(function(){return c})},t.prototype.getHighestUnacknowledgedBatchId=function(e){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Nn(e).$t({index:pt.userMutationsIndex,range:r,reverse:!0},function(s,u,c){i=u.batchId,c.done()}).next(function(){return i})},t.prototype.getAllMutationBatches=function(e){var r=this,i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nn(e).Nt(pt.userMutationsIndex,i).next(function(s){return s.map(function(u){return ci(r.R,u)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,r){var i=this,s=Wt.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(s),c=[];return hi(e).$t({range:u},function(l,f,v){var m=l[0],y=l[1],w=l[2],I=ln(y);if(m===i.userId&&r.path.isEqual(I))return Nn(e).get(w).next(function(E){if(!E)throw B();z(E.userId===i.userId),c.push(ci(i.R,E))});v.done()}).next(function(){return c})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,r){var i=this,s=new Mt(rt),u=[];return r.forEach(function(c){var l=Wt.prefixForPath(i.userId,c.path),f=IDBKeyRange.lowerBound(l),v=hi(e).$t({range:f},function(m,y,w){var I=m[0],E=m[1],S=m[2],N=ln(E);I===i.userId&&c.path.isEqual(N)?s=s.add(S):w.done()});u.push(v)}),O.waitFor(u).next(function(){return i.Wt(e,s)})},t.prototype.getAllMutationBatchesAffectingQuery=function(e,r){var i=this,s=r.path,u=s.length+1,c=Wt.prefixForPath(this.userId,s),l=IDBKeyRange.lowerBound(c),f=new Mt(rt);return hi(e).$t({range:l},function(v,m,y){var w=v[0],I=v[1],E=v[2],S=ln(I);w===i.userId&&s.isPrefixOf(S)?S.length===u&&(f=f.add(E)):y.done()}).next(function(){return i.Wt(e,f)})},t.prototype.Wt=function(e,r){var i=this,s=[],u=[];return r.forEach(function(c){u.push(Nn(e).get(c).next(function(l){if(l===null)throw B();z(l.userId===i.userId),s.push(ci(i.R,l))}))}),O.waitFor(u).next(function(){return s})},t.prototype.removeMutationBatch=function(e,r){var i=this;return x0(e.Mt,this.userId,r).next(function(s){return e.addOnCommittedListener(function(){i.Gt(r.batchId)}),O.forEach(s,function(u){return i.referenceDelegate.markPotentiallyOrphaned(e,u)})})},t.prototype.Gt=function(e){delete this.Kt[e]},t.prototype.performConsistencyCheck=function(e){var r=this;return this.checkEmpty(e).next(function(i){if(!i)return O.resolve();var s=IDBKeyRange.lowerBound(Wt.prefixForUser(r.userId)),u=[];return hi(e).$t({range:s},function(c,l,f){if(c[0]===r.userId){var v=ln(c[1]);u.push(v)}else f.done()}).next(function(){z(u.length===0)})})},t.prototype.containsKey=function(e,r){return P0(e,this.userId,r)},t.prototype.zt=function(e){var r=this;return L0(e).get(this.userId).next(function(i){return i||new Pn(r.userId,-1,"")})},t}();function P0(t,e,r){var i=Wt.prefixForPath(e,r.path),s=i[1],u=IDBKeyRange.lowerBound(i),c=!1;return hi(t).$t({range:u,Ft:!0},function(l,f,v){var m=l[0],y=l[1];l[2],m===e&&y===s&&(c=!0),v.done()}).next(function(){return c})}function Nn(t){return ve(t,pt.store)}function hi(t){return ve(t,Wt.store)}function L0(t){return ve(t,Pn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ea=function(){function t(e){this.Ht=e}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),jA=function(){function t(e,r){this.referenceDelegate=e,this.R=r}return t.prototype.allocateTargetId=function(e){var r=this;return this.Xt(e).next(function(i){var s=new ea(i.highestTargetId);return i.highestTargetId=s.next(),r.Zt(e,i).next(function(){return i.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next(function(r){return Z.fromTimestamp(new fe(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next(function(r){return r.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(e,r,i){var s=this;return this.Xt(e).next(function(u){return u.highestListenSequenceNumber=r,i&&(u.lastRemoteSnapshotVersion=i.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),s.Zt(e,u)})},t.prototype.addTargetData=function(e,r){var i=this;return this.te(e,r).next(function(){return i.Xt(e).next(function(s){return s.targetCount+=1,i.ee(r,s),i.Zt(e,s)})})},t.prototype.updateTargetData=function(e,r){return this.te(e,r)},t.prototype.removeTargetData=function(e,r){var i=this;return this.removeMatchingKeysForTargetId(e,r.targetId).next(function(){return ui(e).delete(r.targetId)}).next(function(){return i.Xt(e)}).next(function(s){return z(s.targetCount>0),s.targetCount-=1,i.Zt(e,s)})},t.prototype.removeTargets=function(e,r,i){var s=this,u=0,c=[];return ui(e).$t(function(l,f){var v=Co(f);v.sequenceNumber<=r&&i.get(v.targetId)===null&&(u++,c.push(s.removeTargetData(e,v)))}).next(function(){return O.waitFor(c)}).next(function(){return u})},t.prototype.forEachTarget=function(e,r){return ui(e).$t(function(i,s){var u=Co(s);r(u)})},t.prototype.Xt=function(e){return uy(e).get(Ie.key).next(function(r){return z(r!==null),r})},t.prototype.Zt=function(e,r){return uy(e).put(Ie.key,r)},t.prototype.te=function(e,r){return ui(e).put(R0(this.R,r))},t.prototype.ee=function(e,r){var i=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,i=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,i=!0),i},t.prototype.getTargetCount=function(e){return this.Xt(e).next(function(r){return r.targetCount})},t.prototype.getTargetData=function(e,r){var i=as(r),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),u=null;return ui(e).$t({range:s,index:le.queryTargetsIndexName},function(c,l,f){var v=Co(l);Sa(r,v.target)&&(u=v,f.done())}).next(function(){return u})},t.prototype.addMatchingKeys=function(e,r,i){var s=this,u=[],c=Rn(e);return r.forEach(function(l){var f=qe(l.path);u.push(c.put(new Bt(i,f))),u.push(s.referenceDelegate.addReference(e,i,l))}),O.waitFor(u)},t.prototype.removeMatchingKeys=function(e,r,i){var s=this,u=Rn(e);return O.forEach(r,function(c){var l=qe(c.path);return O.waitFor([u.delete([i,l]),s.referenceDelegate.removeReference(e,i,c)])})},t.prototype.removeMatchingKeysForTargetId=function(e,r){var i=Rn(e),s=IDBKeyRange.bound([r],[r+1],!1,!0);return i.delete(s)},t.prototype.getMatchingKeysForTargetId=function(e,r){var i=IDBKeyRange.bound([r],[r+1],!1,!0),s=Rn(e),u=ft();return s.$t({range:i,Ft:!0},function(c,l,f){var v=ln(c[1]),m=new K(v);u=u.add(m)}).next(function(){return u})},t.prototype.containsKey=function(e,r){var i=qe(r.path),s=IDBKeyRange.bound([i],[$w(i)],!1,!0),u=0;return Rn(e).$t({index:Bt.documentTargetsIndex,Ft:!0,range:s},function(c,l,f){var v=c[0];c[1],v!==0&&(u++,f.done())}).next(function(){return u>0})},t.prototype.lt=function(e,r){return ui(e).get(r).next(function(i){return i?Co(i):null})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){return ve(t,le.store)}function uy(t){return ve(t,Ie.store)}function Rn(t){return ve(t,Bt.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t){return C(this,void 0,void 0,function(){return k(this,function(e){if(t.code!==_.FAILED_PRECONDITION||t.message!==A0)throw t;return P("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(t,e){var r=t[0],i=t[1],s=e[0],u=e[1],c=rt(r,s);return c===0?rt(i,u):c}var qA=function(){function t(e){this.ne=e,this.buffer=new Mt(ay),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(e){var r=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(r);else{var i=this.buffer.last();ay(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),BA=function(){function t(e,r){this.garbageCollector=e,this.asyncQueue=r,this.oe=!1,this.ce=null}return t.prototype.start=function(e){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(e)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),t.prototype.ue=function(e){var r=this,i=this.oe?3e5:6e4;P("LruGarbageCollector","Garbage collection scheduled in "+i+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,function(){return C(r,void 0,void 0,function(){var s;return k(this,function(u){switch(u.label){case 0:this.ce=null,this.oe=!0,u.label=1;case 1:return u.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return u.sent(),[3,7];case 3:return Cr(s=u.sent())?(P("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s),[3,6]):[3,4];case 4:return[4,Rr(s)];case 5:u.sent(),u.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return u.sent(),[2]}})})})},t}(),KA=function(){function t(e,r){this.ae=e,this.params=r}return t.prototype.calculateTargetCount=function(e,r){return this.ae.he(e).next(function(i){return Math.floor(r/100*i)})},t.prototype.nthSequenceNumber=function(e,r){var i=this;if(r===0)return O.resolve(Te.o);var s=new qA(r);return this.ae.forEachTarget(e,function(u){return s.re(u.sequenceNumber)}).next(function(){return i.ae.le(e,function(u){return s.re(u)})}).next(function(){return s.maxValue})},t.prototype.removeTargets=function(e,r,i){return this.ae.removeTargets(e,r,i)},t.prototype.removeOrphanedDocuments=function(e,r){return this.ae.removeOrphanedDocuments(e,r)},t.prototype.collect=function(e,r){var i=this;return this.params.cacheSizeCollectionThreshold===-1?(P("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(sy)):this.getCacheSize(e).next(function(s){return s<i.params.cacheSizeCollectionThreshold?(P("LruGarbageCollector","Garbage collection skipped; Cache size "+s+" is lower than threshold "+i.params.cacheSizeCollectionThreshold),sy):i.fe(e,r)})},t.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},t.prototype.fe=function(e,r){var i,s,u,c,l,f,v,m=this,y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(w){return w>m.params.maximumSequenceNumbersToCollect?(P("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+w),s=m.params.maximumSequenceNumbersToCollect):s=w,c=Date.now(),m.nthSequenceNumber(e,s)}).next(function(w){return i=w,l=Date.now(),m.removeTargets(e,i,r)}).next(function(w){return u=w,f=Date.now(),m.removeOrphanedDocuments(e,i)}).next(function(w){return v=Date.now(),Ql()<=st.DEBUG&&P("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(c-y)+`ms
	Determined least recently used `+s+" in "+(l-c)+`ms
	Removed `+u+" targets in "+(f-l)+`ms
	Removed `+w+" documents in "+(v-f)+`ms
Total Duration: `+(v-y)+"ms"),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:w})})},t}(),GA=function(){function t(e,r){this.db=e,this.garbageCollector=function(i,s){return new KA(i,s)}(this,r)}return t.prototype.he=function(e){var r=this.de(e);return this.db.getTargetCache().getTargetCount(e).next(function(i){return r.next(function(s){return i+s})})},t.prototype.de=function(e){var r=0;return this.le(e,function(i){r++}).next(function(){return r})},t.prototype.forEachTarget=function(e,r){return this.db.getTargetCache().forEachTarget(e,r)},t.prototype.le=function(e,r){return this.we(e,function(i,s){return r(s)})},t.prototype.addReference=function(e,r,i){return Nu(e,i)},t.prototype.removeReference=function(e,r,i){return Nu(e,i)},t.prototype.removeTargets=function(e,r,i){return this.db.getTargetCache().removeTargets(e,r,i)},t.prototype.markPotentiallyOrphaned=function(e,r){return Nu(e,r)},t.prototype._e=function(e,r){return function(i,s){var u=!1;return L0(i).Ot(function(c){return P0(i,c,s).next(function(l){return l&&(u=!0),O.resolve(!l)})}).next(function(){return u})}(e,r)},t.prototype.removeOrphanedDocuments=function(e,r){var i=this,s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],c=0;return this.we(e,function(l,f){if(f<=r){var v=i._e(e,l).next(function(m){if(!m)return c++,s.getEntry(e,l).next(function(){return s.removeEntry(l),Rn(e).delete([0,qe(l.path)])})});u.push(v)}}).next(function(){return O.waitFor(u)}).next(function(){return s.apply(e)}).next(function(){return c})},t.prototype.removeTarget=function(e,r){var i=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)},t.prototype.updateLimboDocument=function(e,r){return Nu(e,r)},t.prototype.we=function(e,r){var i,s=Rn(e),u=Te.o;return s.$t({index:Bt.documentTargetsIndex},function(c,l){var f=c[0];c[1];var v=l.path,m=l.sequenceNumber;f===0?(u!==Te.o&&r(new K(ln(i)),u),u=m,i=v):u=Te.o}).next(function(){u!==Te.o&&r(new K(ln(i)),u)})},t.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},t}();function Nu(t,e){return Rn(t).put(function(r,i){return new Bt(0,qe(r.path),i)}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Li=function(){function t(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={}}return t.prototype.get=function(e){var r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0)for(var s=0,u=i;s<u.length;s++){var c=u[s],l=c[0],f=c[1];if(this.equalsFn(l,e))return f}},t.prototype.has=function(e){return this.get(e)!==void 0},t.prototype.set=function(e,r){var i=this.mapKeyFn(e),s=this.inner[i];if(s!==void 0){for(var u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,r]);s.push([e,r])}else this.inner[i]=[[e,r]]},t.prototype.delete=function(e){var r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(var s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),!0;return!1},t.prototype.forEach=function(e){kr(this.inner,function(r,i){for(var s=0,u=i;s<u.length;s++){var c=u[s],l=c[0],f=c[1];e(l,f)}})},t.prototype.isEmpty=function(){return Qw(this.inner)},t}(),M0=function(){function t(){this.changes=new Li(function(e){return e.toString()},function(e,r){return e.isEqual(r)}),this.changesApplied=!1}return t.prototype.getReadTime=function(e){var r=this.changes.get(e);return r?r.readTime:Z.min()},t.prototype.addEntry=function(e,r){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:r})},t.prototype.removeEntry=function(e,r){r===void 0&&(r=null),this.assertNotApplied(),this.changes.set(e,{document:Yt.newInvalidDocument(e),readTime:r})},t.prototype.getEntry=function(e,r){this.assertNotApplied();var i=this.changes.get(r);return i!==void 0?O.resolve(i.document):this.getFromCache(e,r)},t.prototype.getEntries=function(e,r){return this.getAllFromCache(e,r)},t.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},t.prototype.assertNotApplied=function(){},t}(),HA=function(){function t(e,r){this.R=e,this.Ut=r}return t.prototype.addEntry=function(e,r,i){return Dn(e).put(ku(r),i)},t.prototype.removeEntry=function(e,r){var i=Dn(e),s=ku(r);return i.delete(s)},t.prototype.updateMetadata=function(e,r){var i=this;return this.getMetadata(e).next(function(s){return s.byteSize+=r,i.me(e,s)})},t.prototype.getEntry=function(e,r){var i=this;return Dn(e).get(ku(r)).next(function(s){return i.ye(r,s)})},t.prototype.ge=function(e,r){var i=this;return Dn(e).get(ku(r)).next(function(s){return{document:i.ye(r,s),size:ta(s)}})},t.prototype.getEntries=function(e,r){var i=this,s=je();return this.pe(e,r,function(u,c){var l=i.ye(u,c);s=s.insert(u,l)}).next(function(){return s})},t.prototype.Ee=function(e,r){var i=this,s=je(),u=new Jt(K.comparator);return this.pe(e,r,function(c,l){var f=i.ye(c,l);s=s.insert(c,f),u=u.insert(c,ta(l))}).next(function(){return{documents:s,Te:u}})},t.prototype.pe=function(e,r,i){if(r.isEmpty())return O.resolve();var s=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),u=r.getIterator(),c=u.getNext();return Dn(e).$t({range:s},function(l,f,v){for(var m=K.fromSegments(l);c&&K.comparator(c,m)<0;)i(c,null),c=u.getNext();c&&c.isEqual(m)&&(i(c,f),c=u.hasNext()?u.getNext():null),c?v.Ct(c.path.toArray()):v.done()}).next(function(){for(;c;)i(c,null),c=u.hasNext()?u.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(e,r,i){var s=this,u=je(),c=r.path.length+1,l={};if(i.isEqual(Z.min())){var f=r.path.toArray();l.range=IDBKeyRange.lowerBound(f)}else{var v=r.path.toArray(),m=Yf(i);l.range=IDBKeyRange.lowerBound([v,m],!0),l.index=Et.collectionReadTimeIndex}return Dn(e).$t(l,function(y,w,I){if(y.length===c){var E=nf(s.R,w);r.path.isPrefixOf(E.key.path)?ls(r,E)&&(u=u.insert(E.key,E)):I.done()}}).next(function(){return u})},t.prototype.newChangeBuffer=function(e){return new zA(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(e){return this.getMetadata(e).next(function(r){return r.byteSize})},t.prototype.getMetadata=function(e){return cy(e).get(Je.key).next(function(r){return z(!!r),r})},t.prototype.me=function(e,r){return cy(e).put(Je.key,r)},t.prototype.ye=function(e,r){if(r){var i=nf(this.R,r);if(!i.isNoDocument()||!i.version.isEqual(Z.min()))return i}return Yt.newInvalidDocument(e)},t}(),zA=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).Ie=r,s.trackRemovals=i,s.Ae=new Li(function(u){return u.toString()},function(u,c){return u.isEqual(c)}),s}return H(e,t),e.prototype.applyChanges=function(r){var i=this,s=[],u=0,c=new Mt(function(l,f){return rt(l.canonicalString(),f.canonicalString())});return this.changes.forEach(function(l,f){var v=i.Ae.get(l);if(f.document.isValidDocument()){var m=ny(i.Ie.R,f.document,i.getReadTime(l));c=c.add(l.path.popLast());var y=ta(m);u+=y-v,s.push(i.Ie.addEntry(r,l,m))}else if(u-=v,i.trackRemovals){var w=ny(i.Ie.R,Yt.newNoDocument(l,Z.min()),i.getReadTime(l));s.push(i.Ie.addEntry(r,l,w))}else s.push(i.Ie.removeEntry(r,l))}),c.forEach(function(l){s.push(i.Ie.Ut.addToCollectionParentIndex(r,l))}),s.push(this.Ie.updateMetadata(r,u)),O.waitFor(s)},e.prototype.getFromCache=function(r,i){var s=this;return this.Ie.ge(r,i).next(function(u){return s.Ae.set(i,u.size),u.document})},e.prototype.getAllFromCache=function(r,i){var s=this;return this.Ie.Ee(r,i).next(function(u){var c=u.documents;return u.Te.forEach(function(l,f){s.Ae.set(l,f)}),c})},e}(M0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){return ve(t,Je.store)}function Dn(t){return ve(t,Et.store)}function ku(t){return t.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WA=function(){function t(e){this.R=e}return t.prototype.Rt=function(e,r,i,s){var u=this;z(i<s&&i>=0&&s<=11);var c=new k0("createOrUpgrade",r);i<1&&s>=1&&(function(f){f.createObjectStore(be.store)}(e),function(f){f.createObjectStore(Pn.store,{keyPath:Pn.keyPath}),f.createObjectStore(pt.store,{keyPath:pt.keyPath,autoIncrement:!0}).createIndex(pt.userMutationsIndex,pt.userMutationsKeyPath,{unique:!0}),f.createObjectStore(Wt.store)}(e),hy(e),function(f){f.createObjectStore(Et.store)}(e));var l=O.resolve();return i<3&&s>=3&&(i!==0&&(function(f){f.deleteObjectStore(Bt.store),f.deleteObjectStore(le.store),f.deleteObjectStore(Ie.store)}(e),hy(e)),l=l.next(function(){return function(f){var v=f.store(Ie.store),m=new Ie(0,0,Z.min().toTimestamp(),0);return v.put(Ie.key,m)}(c)})),i<4&&s>=4&&(i!==0&&(l=l.next(function(){return function(f,v){return v.store(pt.store).Nt().next(function(m){f.deleteObjectStore(pt.store),f.createObjectStore(pt.store,{keyPath:pt.keyPath,autoIncrement:!0}).createIndex(pt.userMutationsIndex,pt.userMutationsKeyPath,{unique:!0});var y=v.store(pt.store),w=m.map(function(I){return y.put(I)});return O.waitFor(w)})}(e,c)})),l=l.next(function(){(function(f){f.createObjectStore(pn.store,{keyPath:pn.keyPath})})(e)})),i<5&&s>=5&&(l=l.next(function(){return u.Re(c)})),i<6&&s>=6&&(l=l.next(function(){return function(f){f.createObjectStore(Je.store)}(e),u.be(c)})),i<7&&s>=7&&(l=l.next(function(){return u.ve(c)})),i<8&&s>=8&&(l=l.next(function(){return u.Pe(e,c)})),i<9&&s>=9&&(l=l.next(function(){(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e),function(f){var v=f.objectStore(Et.store);v.createIndex(Et.readTimeIndex,Et.readTimeIndexPath,{unique:!1}),v.createIndex(Et.collectionReadTimeIndex,Et.collectionReadTimeIndexPath,{unique:!1})}(r)})),i<10&&s>=10&&(l=l.next(function(){return u.Ve(c)})),i<11&&s>=11&&(l=l.next(function(){(function(f){f.createObjectStore(Ti.store,{keyPath:Ti.keyPath})})(e),function(f){f.createObjectStore(Si.store,{keyPath:Si.keyPath})}(e)})),l},t.prototype.be=function(e){var r=0;return e.store(Et.store).$t(function(i,s){r+=ta(s)}).next(function(){var i=new Je(r);return e.store(Je.store).put(Je.key,i)})},t.prototype.Re=function(e){var r=this,i=e.store(Pn.store),s=e.store(pt.store);return i.Nt().next(function(u){return O.forEach(u,function(c){var l=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return s.Nt(pt.userMutationsIndex,l).next(function(f){return O.forEach(f,function(v){z(v.userId===c.userId);var m=ci(r.R,v);return x0(e,c.userId,m).next(function(){})})})})})},t.prototype.ve=function(e){var r=e.store(Bt.store),i=e.store(Et.store);return e.store(Ie.store).get(Ie.key).next(function(s){var u=[];return i.$t(function(c,l){var f=new ut(c),v=function(m){return[0,qe(m)]}(f);u.push(r.get(v).next(function(m){return m?O.resolve():function(y){return r.put(new Bt(0,qe(y),s.highestListenSequenceNumber))}(f)}))}).next(function(){return O.waitFor(u)})})},t.prototype.Pe=function(e,r){e.createObjectStore(mr.store,{keyPath:mr.keyPath});var i=r.store(mr.store),s=new Jf,u=function(c){if(s.add(c)){var l=c.lastSegment(),f=c.popLast();return i.put({collectionId:l,parent:qe(f)})}};return r.store(Et.store).$t({Ft:!0},function(c,l){var f=new ut(c);return u(f.popLast())}).next(function(){return r.store(Wt.store).$t({Ft:!0},function(c,l){c[0];var f=c[1];c[2];var v=ln(f);return u(v.popLast())})})},t.prototype.Ve=function(e){var r=this,i=e.store(le.store);return i.$t(function(s,u){var c=Co(u),l=R0(r.R,c);return i.put(l)})},t}();function hy(t){t.createObjectStore(Bt.store,{keyPath:Bt.keyPath}).createIndex(Bt.documentTargetsIndex,Bt.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(le.store,{keyPath:le.keyPath}).createIndex(le.queryTargetsIndexName,le.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ie.store)}var Rl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$A=function(){function t(e,r,i,s,u,c,l,f,v,m){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=i,this.Se=u,this.window=c,this.document=l,this.De=v,this.Ce=m,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(y){return Promise.resolve()},!t.yt())throw new R(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GA(this,s),this.Le=r+"main",this.R=new D0(f),this.Be=new _i(this.Le,11,new WA(this.R)),this.qe=new jA(this.referenceDelegate,this.R),this.Ut=new VA,this.Ue=function(y,w){return new HA(y,w)}(this.R,this.Ut),this.Ke=new MA,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,m===!1&&Ct("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new R(_.FAILED_PRECONDITION,Rl);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return e.qe.getHighestSequenceNumber(r)})}).then(function(r){e.Ne=new Te(r,e.De)}).then(function(){e.xe=!0}).catch(function(r){return e.Be&&e.Be.close(),Promise.reject(r)})},t.prototype.He=function(e){var r=this;return this.Me=function(i){return C(r,void 0,void 0,function(){return k(this,function(s){return this.started?[2,e(i)]:[2]})})},e(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(e){var r=this;this.Be.vt(function(i){return C(r,void 0,void 0,function(){return k(this,function(s){switch(s.label){case 0:return i.newVersion===null?[4,e()]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget(function(){return C(r,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return Du(r).put(new pn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.Je(r).next(function(i){i||(e.isPrimary=!1,e.Se.enqueueRetryable(function(){return e.Me(!1)}))})}).next(function(){return e.Ye(r)}).next(function(i){return e.isPrimary&&!i?e.Xe(r).next(function(){return!1}):!!i&&e.Ze(r).next(function(){return!0})})}).catch(function(r){if(Cr(r))return P("IndexedDbPersistence","Failed to extend owner lease: ",r),e.isPrimary;if(!e.allowTabSynchronization)throw r;return P("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){e.isPrimary!==r&&e.Se.enqueueRetryable(function(){return e.Me(r)}),e.isPrimary=r})},t.prototype.Je=function(e){var r=this;return ko(e).get(be.key).next(function(i){return O.resolve(r.tn(i))})},t.prototype.en=function(e){return Du(e).delete(this.clientId)},t.prototype.nn=function(){return C(this,void 0,void 0,function(){var e,r,i,s,u=this;return k(this,function(c){switch(c.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(l){var f=ve(l,pn.store);return f.Nt().next(function(v){var m=u.rn(v,18e5),y=v.filter(function(w){return m.indexOf(w)===-1});return O.forEach(y,function(w){return f.delete(w.clientId)}).next(function(){return y})})}).catch(function(){return[]})]);case 1:if(e=c.sent(),this.Qe)for(r=0,i=e;r<i.length;r++)s=i[r],this.Qe.removeItem(this.on(s.clientId));c.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.je().then(function(){return e.nn()}).then(function(){return e.ze()})})},t.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},t.prototype.Ye=function(e){var r=this;return this.Ce?O.resolve(!0):ko(e).get(be.key).next(function(i){if(i!==null&&r.sn(i.leaseTimestampMs,5e3)&&!r.cn(i.ownerId)){if(r.tn(i)&&r.networkEnabled)return!0;if(!r.tn(i)){if(!i.allowTabSynchronization)throw new R(_.FAILED_PRECONDITION,Rl);return!1}}return!(!r.networkEnabled||!r.inForeground)||Du(e).Nt().next(function(s){return r.rn(s,5e3).find(function(u){if(r.clientId!==u.clientId){var c=!r.networkEnabled&&u.networkEnabled,l=!r.inForeground&&u.inForeground,f=r.networkEnabled===u.networkEnabled;if(c||l&&f)return!0}return!1})===void 0})}).next(function(i){return r.isPrimary!==i&&P("IndexedDbPersistence","Client "+(i?"is":"is not")+" eligible for a primary lease."),i})},t.prototype.shutdown=function(){return C(this,void 0,void 0,function(){var e=this;return k(this,function(r){switch(r.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[be.store,pn.store],function(i){var s=new ey(i,Te.o);return e.Xe(s).next(function(){return e.en(s)})})];case 1:return r.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(e,r){var i=this;return e.filter(function(s){return i.sn(s.updateTimeMs,r)&&!i.cn(s.clientId)})},t.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(r){return Du(r).Nt().next(function(i){return e.rn(i,18e5).map(function(s){return s.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(e){return UA.Qt(e,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,r,i){var s=this;P("IndexedDbPersistence","Starting transaction:",e);var u,c=r==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(e,c,OA,function(l){return u=new ey(l,s.Ne?s.Ne.next():Te.o),r==="readwrite-primary"?s.Je(u).next(function(f){return!!f||s.Ye(u)}).next(function(f){if(!f)throw Ct("Failed to obtain primary lease for action '"+e+"'."),s.isPrimary=!1,s.Se.enqueueRetryable(function(){return s.Me(!1)}),new R(_.FAILED_PRECONDITION,A0);return i(u)}).next(function(f){return s.Ze(u).next(function(){return f})}):s.dn(u).next(function(){return i(u)})}).then(function(l){return u.raiseOnCommittedEvent(),l})},t.prototype.dn=function(e){var r=this;return ko(e).get(be.key).next(function(i){if(i!==null&&r.sn(i.leaseTimestampMs,5e3)&&!r.cn(i.ownerId)&&!r.tn(i)&&!(r.Ce||r.allowTabSynchronization&&i.allowTabSynchronization))throw new R(_.FAILED_PRECONDITION,Rl)})},t.prototype.Ze=function(e){var r=new be(this.clientId,this.allowTabSynchronization,Date.now());return ko(e).put(be.key,r)},t.yt=function(){return _i.yt()},t.prototype.Xe=function(e){var r=this,i=ko(e);return i.get(be.key).next(function(s){return r.tn(s)?(P("IndexedDbPersistence","Releasing primary lease."),i.delete(be.key)):O.resolve()})},t.prototype.sn=function(e,r){var i=Date.now();return!(e<i-r||e>i&&(Ct("Detected an update time that is in the future: "+e+" > "+i),1))},t.prototype.We=function(){var e=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){e.Se.enqueueAndForget(function(){return e.inForeground=e.document.visibilityState==="visible",e.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var e,r=this;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ke=function(){r.un(),e1()&&navigator.appVersion.match("Version/14")&&r.Se.enterRestrictedMode(!0),r.Se.enqueueAndForget(function(){return r.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(e){var r;try{var i=((r=this.Qe)===null||r===void 0?void 0:r.getItem(this.on(e)))!==null;return P("IndexedDbPersistence","Client '"+e+"' "+(i?"is":"is not")+" zombied in LocalStorage"),i}catch(s){return Ct("IndexedDbPersistence","Failed to get zombied client id.",s),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){Ct("Failed to set zombie client id.",e)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},t.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},t}();function ko(t){return ve(t,be.store)}function Du(t){return ve(t,pn.store)}function Zf(t,e){var r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}var F0=function(){function t(e,r,i){this.Ue=e,this._n=r,this.Ut=i}return t.prototype.mn=function(e,r){var i=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,r).next(function(s){return i.yn(e,r,s)})},t.prototype.yn=function(e,r,i){return this.Ue.getEntry(e,r).next(function(s){for(var u=0,c=i;u<c.length;u++)c[u].applyToLocalView(s);return s})},t.prototype.gn=function(e,r){e.forEach(function(i,s){for(var u=0,c=r;u<c.length;u++)c[u].applyToLocalView(s)})},t.prototype.pn=function(e,r){var i=this;return this.Ue.getEntries(e,r).next(function(s){return i.En(e,s).next(function(){return s})})},t.prototype.En=function(e,r){var i=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,r).next(function(s){return i.gn(r,s)})},t.prototype.getDocumentsMatchingQuery=function(e,r,i){return function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.Tn(e,r.path):Gf(r)?this.In(e,r,i):this.An(e,r,i)},t.prototype.Tn=function(e,r){return this.mn(e,new K(r)).next(function(i){var s=tf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})},t.prototype.In=function(e,r,i){var s=this,u=r.collectionGroup,c=tf();return this.Ut.getCollectionParents(e,u).next(function(l){return O.forEach(l,function(f){var v=function(m,y){return new gn(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,f.child(u));return s.An(e,v,i).next(function(m){m.forEach(function(y,w){c=c.insert(y,w)})})}).next(function(){return c})})},t.prototype.An=function(e,r,i){var s,u,c=this;return this.Ue.getDocumentsMatchingQuery(e,r,i).next(function(l){return s=l,c._n.getAllMutationBatchesAffectingQuery(e,r)}).next(function(l){return u=l,c.Rn(e,u,s).next(function(f){s=f;for(var v=0,m=u;v<m.length;v++)for(var y=m[v],w=0,I=y.mutations;w<I.length;w++){var E=I[w],S=E.key,N=s.get(S);N==null&&(N=Yt.newInvalidDocument(S),s=s.insert(S,N)),Zl(E,N,y.localWriteTime),N.isFoundDocument()||(s=s.remove(S))}})}).next(function(){return s.forEach(function(l,f){ls(r,f)||(s=s.remove(l))}),s})},t.prototype.Rn=function(e,r,i){for(var s=ft(),u=0,c=r;u<c.length;u++)for(var l=0,f=c[u].mutations;l<f.length;l++){var v=f[l];v instanceof jn&&i.get(v.key)===null&&(s=s.add(v.key))}var m=i;return this.Ue.getEntries(e,s).next(function(y){return y.forEach(function(w,I){I.isFoundDocument()&&(m=m.insert(w,I))}),m})},t}(),QA=function(){function t(e,r,i,s){this.targetId=e,this.fromCache=r,this.bn=i,this.vn=s}return t.Pn=function(e,r){for(var i=ft(),s=ft(),u=0,c=r.docChanges;u<c.length;u++){var l=c[u];switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}}return new t(e,r.fromCache,i,s)},t}(),V0=function(){function t(){}return t.prototype.Vn=function(e){this.Sn=e},t.prototype.getDocumentsMatchingQuery=function(e,r,i,s){var u=this;return function(c){return c.filters.length===0&&c.limit===null&&c.startAt==null&&c.endAt==null&&(c.explicitOrderBy.length===0||c.explicitOrderBy.length===1&&c.explicitOrderBy[0].field.isKeyField())}(r)||i.isEqual(Z.min())?this.Dn(e,r):this.Sn.pn(e,s).next(function(c){var l=u.Cn(r,c);return(Ou(r)||Ju(r))&&u.Nn(r.limitType,l,s,i)?u.Dn(e,r):(Ql()<=st.DEBUG&&P("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jl(r)),u.Sn.getDocumentsMatchingQuery(e,r,i).next(function(f){return l.forEach(function(v){f=f.insert(v.key,v)}),f}))})},t.prototype.Cn=function(e,r){var i=new Mt(i0(e));return r.forEach(function(s,u){ls(e,u)&&(i=i.add(u))}),i},t.prototype.Nn=function(e,r,i,s){if(i.size!==r.size)return!0;var u=e==="F"?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)},t.prototype.Dn=function(e,r){return Ql()<=st.DEBUG&&P("QueryEngine","Using full collection scan to execute query:",Jl(r)),this.Sn.getDocumentsMatchingQuery(e,r,Z.min())},t}(),XA=function(){function t(e,r,i,s){this.persistence=e,this.xn=r,this.R=s,this.kn=new Jt(rt),this.Fn=new Li(function(u){return as(u)},Sa),this.$n=Z.min(),this._n=e.getMutationQueue(i),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new F0(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(e){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(i){return e.collect(i,r.kn)})},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t,e,r,i){return new XA(t,e,r,i)}function j0(t,e){return C(this,void 0,void 0,function(){var r,i,s,u;return k(this,function(c){switch(c.label){case 0:return r=M(t),i=r._n,s=r.Mn,[4,r.persistence.runTransaction("Handle user change","readonly",function(l){var f;return r._n.getAllMutationBatches(l).next(function(v){return f=v,i=r.persistence.getMutationQueue(e),s=new F0(r.On,i,r.persistence.getIndexManager()),i.getAllMutationBatches(l)}).next(function(v){for(var m=[],y=[],w=ft(),I=0,E=f;I<E.length;I++){var S=E[I];m.push(S.batchId);for(var N=0,x=S.mutations;N<x.length;N++){var F=x[N];w=w.add(F.key)}}for(var U=0,X=v;U<X.length;U++){var et=X[U];y.push(et.batchId);for(var L=0,dt=et.mutations;L<dt.length;L++){var $=dt[L];w=w.add($.key)}}return s.pn(l,w).next(function(nn){return{Ln:nn,removedBatchIds:m,addedBatchIds:y}})})})];case 1:return u=c.sent(),[2,(r._n=i,r.Mn=s,r.xn.Vn(r.Mn),u)]}})})}function YA(t,e){var r=M(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(i){var s=e.batch.keys(),u=r.On.newChangeBuffer({trackRemovals:!0});return function(c,l,f,v){var m=f.batch,y=m.keys(),w=O.resolve();return y.forEach(function(I){w=w.next(function(){return v.getEntry(l,I)}).next(function(E){var S=f.docVersions.get(I);z(S!==null),E.version.compareTo(S)<0&&(m.applyToRemoteDocument(E,f),E.isValidDocument()&&v.addEntry(E,f.commitVersion))})}),w.next(function(){return c._n.removeMutationBatch(l,m)})}(r,i,e,u).next(function(){return u.apply(i)}).next(function(){return r._n.performConsistencyCheck(i)}).next(function(){return r.Mn.pn(i,s)})})}function q0(t){var e=M(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(r){return e.qe.getLastRemoteSnapshotVersion(r)})}function JA(t,e){var r=M(t),i=e.snapshotVersion,s=r.kn;return r.persistence.runTransaction("Apply remote event","readwrite-primary",function(u){var c=r.On.newChangeBuffer({trackRemovals:!0});s=r.kn;var l=[];e.targetChanges.forEach(function(m,y){var w=s.get(y);if(w){l.push(r.qe.removeMatchingKeys(u,m.removedDocuments,y).next(function(){return r.qe.addMatchingKeys(u,m.addedDocuments,y)}));var I=m.resumeToken;if(I.approximateByteSize()>0){var E=w.withResumeToken(I,i).withSequenceNumber(u.currentSequenceNumber);s=s.insert(y,E),function(S,N,x){return z(N.resumeToken.approximateByteSize()>0),S.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(w,E,m)&&l.push(r.qe.updateTargetData(u,E))}}});var f=je();if(e.documentUpdates.forEach(function(m,y){e.resolvedLimboDocuments.has(m)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(u,m))}),l.push(ZA(u,c,e.documentUpdates,i,void 0).next(function(m){f=m})),!i.isEqual(Z.min())){var v=r.qe.getLastRemoteSnapshotVersion(u).next(function(m){return r.qe.setTargetsMetadata(u,u.currentSequenceNumber,i)});l.push(v)}return O.waitFor(l).next(function(){return c.apply(u)}).next(function(){return r.Mn.En(u,f)}).next(function(){return f})}).then(function(u){return r.kn=s,u})}function ZA(t,e,r,i,s){var u=ft();return r.forEach(function(c){return u=u.add(c)}),e.getEntries(t,u).next(function(c){var l=je();return r.forEach(function(f,v){var m=c.get(f),y=(s==null?void 0:s.get(f))||i;v.isNoDocument()&&v.version.isEqual(Z.min())?(e.removeEntry(f,y),l=l.insert(f,v)):!m.isValidDocument()||v.version.compareTo(m.version)>0||v.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(v,y),l=l.insert(f,v)):P("LocalStore","Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",v.version)}),l})}function tN(t,e){var r=M(t);return r.persistence.runTransaction("Get next mutation batch","readonly",function(i){return e===void 0&&(e=-1),r._n.getNextMutationBatchAfterBatchId(i,e)})}function na(t,e){var r=M(t);return r.persistence.runTransaction("Allocate target","readwrite",function(i){var s;return r.qe.getTargetData(i,e).next(function(u){return u?(s=u,O.resolve(s)):r.qe.allocateTargetId(i).next(function(c){return s=new ka(e,c,0,i.currentSequenceNumber),r.qe.addTargetData(i,s).next(function(){return s})})})}).then(function(i){var s=r.kn.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.kn=r.kn.insert(i.targetId,i),r.Fn.set(e,i.targetId)),i})}function ki(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c;return k(this,function(l){switch(l.label){case 0:i=M(t),s=i.kn.get(e),u=r?"readwrite":"readwrite-primary",l.label=1;case 1:return l.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",u,function(f){return i.persistence.referenceDelegate.removeTarget(f,s)})];case 2:l.sent(),l.label=3;case 3:return[3,5];case 4:if(!Cr(c=l.sent()))throw c;return P("LocalStore","Failed to update sequence numbers for target "+e+": "+c),[3,5];case 5:return i.kn=i.kn.remove(e),i.Fn.delete(s.target),[2]}})})}function ra(t,e,r){var i=M(t),s=Z.min(),u=ft();return i.persistence.runTransaction("Execute query","readonly",function(c){return function(l,f,v){var m=M(l),y=m.Fn.get(v);return y!==void 0?O.resolve(m.kn.get(y)):m.qe.getTargetData(f,v)}(i,c,en(e)).next(function(l){if(l)return s=l.lastLimboFreeSnapshotVersion,i.qe.getMatchingKeysForTargetId(c,l.targetId).next(function(f){u=f})}).next(function(){return i.xn.getDocumentsMatchingQuery(c,e,r?s:Z.min(),r?u:ft())}).next(function(l){return{documents:l,Bn:u}})})}function B0(t,e){var r=M(t),i=M(r.qe),s=r.kn.get(e);return s?Promise.resolve(s.target):r.persistence.runTransaction("Get target data","readonly",function(u){return i.lt(u,e).next(function(c){return c?c.target:null})})}function K0(t){var e=M(t);return e.persistence.runTransaction("Get new document changes","readonly",function(r){return function(i,s,u){var c=M(i),l=je(),f=Yf(u),v=Dn(s),m=IDBKeyRange.lowerBound(f,!0);return v.$t({index:Et.readTimeIndex,range:m},function(y,w){var I=nf(c.R,w);l=l.insert(I.key,I),f=w.readTime}).next(function(){return{wn:l,readTime:C0(f)}})}(e.On,r,e.$n)}).then(function(r){var i=r.wn,s=r.readTime;return e.$n=s,i})}function eN(t){return C(this,void 0,void 0,function(){var e;return k(this,function(r){return[2,(e=M(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(i){return function(s){var u=Dn(s),c=Z.min();return u.$t({index:Et.readTimeIndex,reverse:!0},function(l,f,v){f.readTime&&(c=C0(f.readTime)),v.done()}).next(function(){return c})}(i)}).then(function(i){e.$n=i})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nN=function(){function t(e){this.R=e,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(e,r){return O.resolve(this.Qn.get(r))},t.prototype.saveBundleMetadata=function(e,r){var i;return this.Qn.set(r.id,{id:(i=r).id,version:i.version,createTime:oe(i.createTime)}),O.resolve()},t.prototype.getNamedQuery=function(e,r){return O.resolve(this.jn.get(r))},t.prototype.saveNamedQuery=function(e,r){return this.jn.set(r.name,function(i){return{name:i.name,query:O0(i.bundledQuery),readTime:oe(i.readTime)}}(r)),O.resolve()},t}(),tp=function(){function t(){this.Wn=new Mt(Vt.Gn),this.zn=new Mt(Vt.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(e,r){var i=new Vt(e,r);this.Wn=this.Wn.add(i),this.zn=this.zn.add(i)},t.prototype.Jn=function(e,r){var i=this;e.forEach(function(s){return i.addReference(s,r)})},t.prototype.removeReference=function(e,r){this.Yn(new Vt(e,r))},t.prototype.Xn=function(e,r){var i=this;e.forEach(function(s){return i.removeReference(s,r)})},t.prototype.Zn=function(e){var r=this,i=new K(new ut([])),s=new Vt(i,e),u=new Vt(i,e+1),c=[];return this.zn.forEachInRange([s,u],function(l){r.Yn(l),c.push(l.key)}),c},t.prototype.ts=function(){var e=this;this.Wn.forEach(function(r){return e.Yn(r)})},t.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},t.prototype.es=function(e){var r=new K(new ut([])),i=new Vt(r,e),s=new Vt(r,e+1),u=ft();return this.zn.forEachInRange([i,s],function(c){u=u.add(c.key)}),u},t.prototype.containsKey=function(e){var r=new Vt(e,0),i=this.Wn.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)},t}(),Vt=function(){function t(e,r){this.key=e,this.ns=r}return t.Gn=function(e,r){return K.comparator(e.key,r.key)||rt(e.ns,r.ns)},t.Hn=function(e,r){return rt(e.ns,r.ns)||K.comparator(e.key,r.key)},t}(),rN=function(){function t(e,r){this.Ut=e,this.referenceDelegate=r,this._n=[],this.ss=1,this.rs=new Mt(Vt.Gn)}return t.prototype.checkEmpty=function(e){return O.resolve(this._n.length===0)},t.prototype.addMutationBatch=function(e,r,i,s){var u=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var c=new Xf(u,r,i,s);this._n.push(c);for(var l=0,f=s;l<f.length;l++){var v=f[l];this.rs=this.rs.add(new Vt(v.key,u)),this.Ut.addToCollectionParentIndex(e,v.key.path.popLast())}return O.resolve(c)},t.prototype.lookupMutationBatch=function(e,r){return O.resolve(this.os(r))},t.prototype.getNextMutationBatchAfterBatchId=function(e,r){var i=r+1,s=this.cs(i),u=s<0?0:s;return O.resolve(this._n.length>u?this._n[u]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return O.resolve(this._n.length===0?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(e){return O.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,r){var i=this,s=new Vt(r,0),u=new Vt(r,Number.POSITIVE_INFINITY),c=[];return this.rs.forEachInRange([s,u],function(l){var f=i.os(l.ns);c.push(f)}),O.resolve(c)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,r){var i=this,s=new Mt(rt);return r.forEach(function(u){var c=new Vt(u,0),l=new Vt(u,Number.POSITIVE_INFINITY);i.rs.forEachInRange([c,l],function(f){s=s.add(f.ns)})}),O.resolve(this.us(s))},t.prototype.getAllMutationBatchesAffectingQuery=function(e,r){var i=r.path,s=i.length+1,u=i;K.isDocumentKey(u)||(u=u.child(""));var c=new Vt(new K(u),0),l=new Mt(rt);return this.rs.forEachWhile(function(f){var v=f.key.path;return!!i.isPrefixOf(v)&&(v.length===s&&(l=l.add(f.ns)),!0)},c),O.resolve(this.us(l))},t.prototype.us=function(e){var r=this,i=[];return e.forEach(function(s){var u=r.os(s);u!==null&&i.push(u)}),i},t.prototype.removeMutationBatch=function(e,r){var i=this;z(this.hs(r.batchId,"removed")===0),this._n.shift();var s=this.rs;return O.forEach(r.mutations,function(u){var c=new Vt(u.key,r.batchId);return s=s.delete(c),i.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(function(){i.rs=s})},t.prototype.Gt=function(e){},t.prototype.containsKey=function(e,r){var i=new Vt(r,0),s=this.rs.firstAfterOrEqual(i);return O.resolve(r.isEqual(s&&s.key))},t.prototype.performConsistencyCheck=function(e){return this._n.length,O.resolve()},t.prototype.hs=function(e,r){return this.cs(e)},t.prototype.cs=function(e){return this._n.length===0?0:e-this._n[0].batchId},t.prototype.os=function(e){var r=this.cs(e);return r<0||r>=this._n.length?null:this._n[r]},t}(),iN=function(){function t(e,r){this.Ut=e,this.ls=r,this.docs=new Jt(K.comparator),this.size=0}return t.prototype.addEntry=function(e,r,i){var s=r.key,u=this.docs.get(s),c=u?u.size:0,l=this.ls(r);return this.docs=this.docs.insert(s,{document:r.clone(),size:l,readTime:i}),this.size+=l-c,this.Ut.addToCollectionParentIndex(e,s.path.popLast())},t.prototype.removeEntry=function(e){var r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)},t.prototype.getEntry=function(e,r){var i=this.docs.get(r);return O.resolve(i?i.document.clone():Yt.newInvalidDocument(r))},t.prototype.getEntries=function(e,r){var i=this,s=je();return r.forEach(function(u){var c=i.docs.get(u);s=s.insert(u,c?c.document.clone():Yt.newInvalidDocument(u))}),O.resolve(s)},t.prototype.getDocumentsMatchingQuery=function(e,r,i){for(var s=je(),u=new K(r.path.child("")),c=this.docs.getIteratorFrom(u);c.hasNext();){var l=c.getNext(),f=l.key,v=l.value,m=v.document,y=v.readTime;if(!r.path.isPrefixOf(f.path))break;y.compareTo(i)<=0||ls(r,m)&&(s=s.insert(m.key,m.clone()))}return O.resolve(s)},t.prototype.fs=function(e,r){return O.forEach(this.docs,function(i){return r(i)})},t.prototype.newChangeBuffer=function(e){return new oN(this)},t.prototype.getSize=function(e){return O.resolve(this.size)},t}(),oN=function(t){function e(r){var i=this;return(i=t.call(this)||this).Ie=r,i}return H(e,t),e.prototype.applyChanges=function(r){var i=this,s=[];return this.changes.forEach(function(u,c){c.document.isValidDocument()?s.push(i.Ie.addEntry(r,c.document,i.getReadTime(u))):i.Ie.removeEntry(u)}),O.waitFor(s)},e.prototype.getFromCache=function(r,i){return this.Ie.getEntry(r,i)},e.prototype.getAllFromCache=function(r,i){return this.Ie.getEntries(r,i)},e}(M0),sN=function(){function t(e){this.persistence=e,this.ds=new Li(function(r){return as(r)},Sa),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.ws=0,this._s=new tp,this.targetCount=0,this.ys=ea.Jt()}return t.prototype.forEachTarget=function(e,r){return this.ds.forEach(function(i,s){return r(s)}),O.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(e){return O.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(e){return O.resolve(this.ws)},t.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),O.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.ws&&(this.ws=r),O.resolve()},t.prototype.te=function(e){this.ds.set(e.target,e);var r=e.targetId;r>this.highestTargetId&&(this.ys=new ea(r),this.highestTargetId=r),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},t.prototype.addTargetData=function(e,r){return this.te(r),this.targetCount+=1,O.resolve()},t.prototype.updateTargetData=function(e,r){return this.te(r),O.resolve()},t.prototype.removeTargetData=function(e,r){return this.ds.delete(r.target),this._s.Zn(r.targetId),this.targetCount-=1,O.resolve()},t.prototype.removeTargets=function(e,r,i){var s=this,u=0,c=[];return this.ds.forEach(function(l,f){f.sequenceNumber<=r&&i.get(f.targetId)===null&&(s.ds.delete(l),c.push(s.removeMatchingKeysForTargetId(e,f.targetId)),u++)}),O.waitFor(c).next(function(){return u})},t.prototype.getTargetCount=function(e){return O.resolve(this.targetCount)},t.prototype.getTargetData=function(e,r){var i=this.ds.get(r)||null;return O.resolve(i)},t.prototype.addMatchingKeys=function(e,r,i){return this._s.Jn(r,i),O.resolve()},t.prototype.removeMatchingKeys=function(e,r,i){this._s.Xn(r,i);var s=this.persistence.referenceDelegate,u=[];return s&&r.forEach(function(c){u.push(s.markPotentiallyOrphaned(e,c))}),O.waitFor(u)},t.prototype.removeMatchingKeysForTargetId=function(e,r){return this._s.Zn(r),O.resolve()},t.prototype.getMatchingKeysForTargetId=function(e,r){var i=this._s.es(r);return O.resolve(i)},t.prototype.containsKey=function(e,r){return O.resolve(this._s.containsKey(r))},t}(),uN=function(){function t(e,r){var i=this;this.gs={},this.Ne=new Te(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new sN(this),this.Ut=new FA,this.Ue=function(s,u){return new iN(s,function(c){return i.referenceDelegate.ps(c)})}(this.Ut),this.R=new D0(r),this.Ke=new nN(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(e){var r=this.gs[e.toKey()];return r||(r=new rN(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=r),r},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(e,r,i){var s=this;P("MemoryPersistence","Starting transaction:",e);var u=new aN(this.Ne.next());return this.referenceDelegate.Es(),i(u).next(function(c){return s.referenceDelegate.Ts(u).next(function(){return c})}).toPromise().then(function(c){return u.raiseOnCommittedEvent(),c})},t.prototype.Is=function(e,r){return O.or(Object.values(this.gs).map(function(i){return function(){return i.containsKey(e,r)}}))},t}(),aN=function(t){function e(r){var i=this;return(i=t.call(this)||this).currentSequenceNumber=r,i}return H(e,t),e}(N0),cN=function(){function t(e){this.persistence=e,this.As=new tp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw B()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(e,r,i){return this.As.addReference(i,r),this.vs.delete(i.toString()),O.resolve()},t.prototype.removeReference=function(e,r,i){return this.As.removeReference(i,r),this.vs.add(i.toString()),O.resolve()},t.prototype.markPotentiallyOrphaned=function(e,r){return this.vs.add(r.toString()),O.resolve()},t.prototype.removeTarget=function(e,r){var i=this;this.As.Zn(r.targetId).forEach(function(u){return i.vs.add(u.toString())});var s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(function(u){u.forEach(function(c){return i.vs.add(c.toString())})}).next(function(){return s.removeTargetData(e,r)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(e){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.vs,function(s){var u=K.fromPath(s);return r.Ps(e,u).next(function(c){c||i.removeEntry(u)})}).next(function(){return r.Rs=null,i.apply(e)})},t.prototype.updateLimboDocument=function(e,r){var i=this;return this.Ps(e,r).next(function(s){s?i.vs.delete(r.toString()):i.vs.add(r.toString())})},t.prototype.ps=function(e){return 0},t.prototype.Ps=function(e,r){var i=this;return O.or([function(){return O.resolve(i.As.containsKey(r))},function(){return i.persistence.getTargetCache().containsKey(e,r)},function(){return i.persistence.Is(e,r)}])},t}(),qt=function(){function t(e){this.uid=e}return t.prototype.isAuthenticated=function(){return this.uid!=null},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(e){return e.uid===this.uid},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(t,e){return"firestore_clients_"+t+"_"+e}function fy(t,e,r){var i="firestore_mutations_"+t+"_"+r;return e.isAuthenticated()&&(i+="_"+e.uid),i}function Ol(t,e){return"firestore_targets_"+t+"_"+e}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");var py=function(){function t(e,r,i,s){this.user=e,this.batchId=r,this.state=i,this.error=s}return t.Vs=function(e,r,i){var s,u=JSON.parse(i),c=typeof u=="object"&&["pending","acknowledged","rejected"].indexOf(u.state)!==-1&&(u.error===void 0||typeof u.error=="object");return c&&u.error&&(c=typeof u.error.message=="string"&&typeof u.error.code=="string")&&(s=new R(u.error.code,u.error.message)),c?new t(e,r,u.state,s):(Ct("SharedClientState","Failed to parse mutation state for ID '"+r+"': "+i),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),xl=function(){function t(e,r,i){this.targetId=e,this.state=r,this.error=i}return t.Vs=function(e,r){var i,s=JSON.parse(r),u=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return u&&s.error&&(u=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new R(s.error.code,s.error.message)),u?new t(e,s.state,i):(Ct("SharedClientState","Failed to parse target state for ID '"+e+"': "+r),null)},t.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},t}(),dy=function(){function t(e,r){this.clientId=e,this.activeTargetIds=r}return t.Vs=function(e,r){for(var i=JSON.parse(r),s=typeof i=="object"&&i.activeTargetIds instanceof Array,u=Na(),c=0;s&&c<i.activeTargetIds.length;++c)s=Jw(i.activeTargetIds[c]),u=u.add(i.activeTargetIds[c]);return s?new t(e,u):(Ct("SharedClientState","Failed to parse client data for instance '"+e+"': "+r),null)},t}(),hN=function(){function t(e,r){this.clientId=e,this.onlineState=r}return t.Vs=function(e){var r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new t(r.clientId,r.onlineState):(Ct("SharedClientState","Failed to parse online state: "+e),null)},t}(),rf=function(){function t(){this.activeTargetIds=Na()}return t.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},t.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},t.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},t}(),Pl=function(){function t(e,r,i,s,u){this.window=e,this.Se=r,this.persistenceKey=i,this.Ns=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Jt(rt),this.started=!1,this.$s=[];var c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Os=ly(this.persistenceKey,this.Ns),this.Ms=function(l){return"firestore_sequence_number_"+l}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new rf),this.Ls=new RegExp("^firestore_clients_"+c+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+c+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+c+"_(\\d+)$"),this.Us=function(l){return"firestore_online_state_"+l}(this.persistenceKey),this.Ks=function(l){return"firestore_bundle_loaded_"+l}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(e){return!(!e||!e.localStorage)},t.prototype.start=function(){return C(this,void 0,void 0,function(){var e,r,i,s,u,c,l,f,v,m,y,w=this;return k(this,function(I){switch(I.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=I.sent(),r=0,i=e;r<i.length;r++)(s=i[r])!==this.Ns&&(u=this.getItem(ly(this.persistenceKey,s)))&&(c=dy.Vs(s,u))&&(this.Fs=this.Fs.insert(c.clientId,c));for(this.Qs(),(l=this.storage.getItem(this.Us))&&(f=this.js(l))&&this.Ws(f),v=0,m=this.$s;v<m.length;v++)y=m[v],this.ks(y);return this.$s=[],this.window.addEventListener("pagehide",function(){return w.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(e){var r=!1;return this.Fs.forEach(function(i,s){s.activeTargetIds.has(e)&&(r=!0)}),r},t.prototype.addPendingMutation=function(e){this.zs(e,"pending")},t.prototype.updateMutationState=function(e,r,i){this.zs(e,r,i),this.Hs(e)},t.prototype.addLocalQueryTarget=function(e){var r="not-current";if(this.isActiveQueryTarget(e)){var i=this.storage.getItem(Ol(this.persistenceKey,e));if(i){var s=xl.Vs(e,i);s&&(r=s.state)}}return this.Js.Ds(e),this.Qs(),r},t.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},t.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){this.removeItem(Ol(this.persistenceKey,e))},t.prototype.updateQueryState=function(e,r,i){this.Ys(e,r,i)},t.prototype.handleUserChange=function(e,r,i){var s=this;r.forEach(function(u){s.Hs(u)}),this.currentUser=e,i.forEach(function(u){s.addPendingMutation(u)})},t.prototype.setOnlineState=function(e){this.Xs(e)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(e){var r=this.storage.getItem(e);return P("SharedClientState","READ",e,r),r},t.prototype.setItem=function(e,r){P("SharedClientState","SET",e,r),this.storage.setItem(e,r)},t.prototype.removeItem=function(e){P("SharedClientState","REMOVE",e),this.storage.removeItem(e)},t.prototype.ks=function(e){var r=this,i=e;if(i.storageArea===this.storage){if(P("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Os)return void Ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return C(r,void 0,void 0,function(){var s,u,c,l,f,v;return k(this,function(m){if(this.started){if(i.key!==null){if(this.Ls.test(i.key)){if(i.newValue==null)return s=this.ti(i.key),[2,this.ei(s,null)];if(u=this.ni(i.key,i.newValue))return[2,this.ei(u.clientId,u)]}else if(this.Bs.test(i.key)){if(i.newValue!==null&&(c=this.si(i.key,i.newValue)))return[2,this.ii(c)]}else if(this.qs.test(i.key)){if(i.newValue!==null&&(l=this.ri(i.key,i.newValue)))return[2,this.oi(l)]}else if(i.key===this.Us){if(i.newValue!==null&&(f=this.js(i.newValue)))return[2,this.Ws(f)]}else if(i.key===this.Ms)(v=function(y){var w=Te.o;if(y!=null)try{var I=JSON.parse(y);z(typeof I=="number"),w=I}catch(E){Ct("SharedClientState","Failed to read sequence number from WebStorage",E)}return w}(i.newValue))!==Te.o&&this.sequenceNumberHandler(v);else if(i.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(i);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(e,r,i){var s=new py(this.currentUser,e,r,i),u=fy(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Ss())},t.prototype.Hs=function(e){var r=fy(this.persistenceKey,this.currentUser,e);this.removeItem(r)},t.prototype.Xs=function(e){var r={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(r))},t.prototype.Ys=function(e,r,i){var s=Ol(this.persistenceKey,e),u=new xl(e,r,i);this.setItem(s,u.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(e){var r=this.Ls.exec(e);return r?r[1]:null},t.prototype.ni=function(e,r){var i=this.ti(e);return dy.Vs(i,r)},t.prototype.si=function(e,r){var i=this.Bs.exec(e),s=Number(i[1]),u=i[2]!==void 0?i[2]:null;return py.Vs(new qt(u),s,r)},t.prototype.ri=function(e,r){var i=this.qs.exec(e),s=Number(i[1]);return xl.Vs(s,r)},t.prototype.js=function(e){return hN.Vs(e)},t.prototype.ii=function(e){return C(this,void 0,void 0,function(){return k(this,function(r){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(P("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},t.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},t.prototype.ei=function(e,r){var i=this,s=r?this.Fs.insert(e,r):this.Fs.remove(e),u=this.Gs(this.Fs),c=this.Gs(s),l=[],f=[];return c.forEach(function(v){u.has(v)||l.push(v)}),u.forEach(function(v){c.has(v)||f.push(v)}),this.syncEngine.hi(l,f).then(function(){i.Fs=s})},t.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},t.prototype.Gs=function(e){var r=Na();return e.forEach(function(i,s){r=r.unionWith(s.activeTargetIds)}),r},t}(),G0=function(){function t(){this.li=new rf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(e){},t.prototype.updateMutationState=function(e,r,i){},t.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},t.prototype.updateQueryState=function(e,r,i){this.fi[e]=r},t.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},t.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.clearQueryState=function(e){delete this.fi[e]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},t.prototype.start=function(){return this.li=new rf,Promise.resolve()},t.prototype.handleUserChange=function(e,r,i){},t.prototype.setOnlineState=function(e){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(e){},t.prototype.notifyBundleLoaded=function(){},t}(),lN=function(){function t(){}return t.prototype.di=function(e){},t.prototype.shutdown=function(){},t}(),vy=function(){function t(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return t.prototype.di=function(e){this.gi.push(e)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){P("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,r=this.gi;e<r.length;e++)(0,r[e])(0)},t.prototype.yi=function(){P("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,r=this.gi;e<r.length;e++)(0,r[e])(1)},t.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},t}(),fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pN=function(){function t(e){this.Ei=e.Ei,this.Ti=e.Ti}return t.prototype.Ii=function(e){this.Ai=e},t.prototype.Ri=function(e){this.bi=e},t.prototype.onMessage=function(e){this.vi=e},t.prototype.close=function(){this.Ti()},t.prototype.send=function(e){this.Ei(e)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(e){this.bi(e)},t.prototype.Si=function(e){this.vi(e)},t}(),dN=function(t){function e(r){var i=this;return(i=t.call(this,r)||this).forceLongPolling=r.forceLongPolling,i.autoDetectLongPolling=r.autoDetectLongPolling,i.useFetchStreams=r.useFetchStreams,i}return H(e,t),e.prototype.Fi=function(r,i,s,u){return new Promise(function(c,l){var f=new H_;f.listenOnce(B_.COMPLETE,function(){try{switch(f.getLastErrorCode()){case Cl.NO_ERROR:var m=f.getResponseJson();P("Connection","XHR received:",JSON.stringify(m)),c(m);break;case Cl.TIMEOUT:P("Connection",'RPC "'+r+'" timed out'),l(new R(_.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:var y=f.getStatus();if(P("Connection",'RPC "'+r+'" failed with status:',y,"response text:",f.getResponseText()),y>0){var w=f.getResponseJson().error;if(w&&w.status&&w.message){var I=function(E){var S=E.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(S)>=0?S:_.UNKNOWN}(w.status);l(new R(I,w.message))}else l(new R(_.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new R(_.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{P("Connection",'RPC "'+r+'" completed.')}});var v=JSON.stringify(u);f.send(i,"POST",v,s,15)})},e.prototype.Oi=function(r,i){var s=[this.Di,"/","google.firestore.v1.Firestore","/",r,"/channel"],u=j_(),c=q_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new G_({})),this.ki(l.initMessageHeaders,i),$S()||YS()||JS()||ZS()||t1()||XS()||(l.httpHeadersOverwriteParam="$httpHeaders");var f=s.join("");P("Connection","Creating WebChannel: "+f,l);var v=u.createWebChannel(f,l),m=!1,y=!1,w=new pN({Ei:function(E){y?P("Connection","Not sending because WebChannel is closed:",E):(m||(P("Connection","Opening WebChannel transport."),v.open(),m=!0),P("Connection","WebChannel sending:",E),v.send(E))},Ti:function(){return v.close()}}),I=function(E,S,N){E.listen(S,function(x){try{N(x)}catch(F){setTimeout(function(){throw F},0)}})};return I(v,_u.EventType.OPEN,function(){y||P("Connection","WebChannel transport opened.")}),I(v,_u.EventType.CLOSE,function(){y||(y=!0,P("Connection","WebChannel transport closed"),w.Vi())}),I(v,_u.EventType.ERROR,function(E){y||(y=!0,Wu("Connection","WebChannel transport errored:",E),w.Vi(new R(_.UNAVAILABLE,"The operation could not be completed")))}),I(v,_u.EventType.MESSAGE,function(E){var S;if(!y){var N=E.data[0];z(!!N);var x=N,F=x.error||((S=x[0])===null||S===void 0?void 0:S.error);if(F){P("Connection","WebChannel received error:",F);var U=F.status,X=function(L){var dt=kt[L];if(dt!==void 0)return d0(dt)}(U),et=F.message;X===void 0&&(X=_.INTERNAL,et="Unknown error status: "+U+" with message "+F.message),y=!0,w.Vi(new R(X,et)),v.close()}else P("Connection","WebChannel received:",N),w.Si(N)}}),I(c,K_.STAT_EVENT,function(E){E.stat===Om.PROXY?P("Connection","Detected buffering proxy"):E.stat===Om.NOPROXY&&P("Connection","Detected no buffering proxy")}),setTimeout(function(){w.Pi()},0),w},e}(function(){function t(e){this.databaseInfo=e,this.databaseId=e.databaseId;var r=e.ssl?"https":"http";this.Di=r+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(e,r,i,s){var u=this.xi(e,r);P("RestConnection","Sending: ",u,i);var c={};return this.ki(c,s),this.Fi(e,u,c,i).then(function(l){return P("RestConnection","Received: ",l),l},function(l){throw Wu("RestConnection",e+" failed with error: ",l,"url: ",u,"request:",i),l})},t.prototype.$i=function(e,r,i,s){return this.Ni(e,r,i,s)},t.prototype.ki=function(e,r){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(var i in r.authHeaders)r.authHeaders.hasOwnProperty(i)&&(e[i]=r.authHeaders[i])},t.prototype.xi=function(e,r){var i=fN[e];return this.Di+"/v1/"+r+":"+i},t}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(){return typeof window<"u"?window:null}function Lu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){return new bA(t,!0)}var ep=function(){function t(e,r,i,s,u){i===void 0&&(i=1e3),s===void 0&&(s=1.5),u===void 0&&(u=6e4),this.Se=e,this.timerId=r,this.Mi=i,this.Li=s,this.Bi=u,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(e){var r=this;this.cancel();var i=Math.floor(this.qi+this.Wi()),s=Math.max(0,Date.now()-this.Ki),u=Math.max(0,i-s);u>0&&P("ExponentialBackoff","Backing off for "+u+" ms (base delay: "+this.qi+" ms, delay with jitter: "+i+" ms, last attempt: "+s+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,u,function(){return r.Ki=Date.now(),e()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),z0=function(){function t(e,r,i,s,u,c){this.Se=e,this.zi=i,this.Hi=s,this.Ji=u,this.listener=c,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ep(e,r)}return t.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},t.prototype.er=function(){return this.state===2},t.prototype.start=function(){this.state!==3?this.auth():this.nr()},t.prototype.stop=function(){return C(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var e=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return e.rr()}))},t.prototype.cr=function(e){this.ur(),this.stream.send(e)},t.prototype.rr=function(){return C(this,void 0,void 0,function(){return k(this,function(e){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(e,r){return C(this,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,e!==3?this.Zi.reset():r&&r.code===_.RESOURCE_EXHAUSTED?(Ct(r.toString()),Ct("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):r&&r.code===_.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(r)];case 1:return i.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var e=this;this.state=1;var r=this.hr(this.Yi),i=this.Yi;this.Ji.getToken().then(function(s){e.Yi===i&&e.lr(s)},function(s){r(function(){var u=new R(_.UNKNOWN,"Fetching auth token failed: "+s.message);return e.dr(u)})})},t.prototype.lr=function(e){var r=this,i=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii(function(){i(function(){return r.state=2,r.listener.Ii()})}),this.stream.Ri(function(s){i(function(){return r.dr(s)})}),this.stream.onMessage(function(s){i(function(){return r.onMessage(s)})})},t.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji(function(){return C(e,void 0,void 0,function(){return k(this,function(r){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(e){return P("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},t.prototype.hr=function(e){var r=this;return function(i){r.Se.enqueueAndForget(function(){return r.Yi===e?i():(P("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),vN=function(t){function e(r,i,s,u,c){var l=this;return(l=t.call(this,r,"listen_stream_connection_backoff","listen_stream_idle",i,s,c)||this).R=u,l}return H(e,t),e.prototype.wr=function(r){return this.Hi.Oi("Listen",r)},e.prototype.onMessage=function(r){this.Zi.reset();var i=function(u,c){var l;if("targetChange"in c){c.targetChange;var f=function(N){return N==="NO_CHANGE"?0:N==="ADD"?1:N==="REMOVE"?2:N==="CURRENT"?3:N==="RESET"?4:B()}(c.targetChange.targetChangeType||"NO_CHANGE"),v=c.targetChange.targetIds||[],m=function(N,x){return N.I?(z(x===void 0||typeof x=="string"),pe.fromBase64String(x||"")):(z(x===void 0||x instanceof Uint8Array),pe.fromUint8Array(x||new Uint8Array))}(u,c.targetChange.resumeToken),y=(w=c.targetChange.cause)&&function(N){var x=N.code===void 0?_.UNKNOWN:d0(N.code);return new R(x,N.message||"")}(w);l=new g0(f,v,m,y||null)}else if("documentChange"in c){c.documentChange,(f=c.documentChange).document,f.document.name,f.document.updateTime,v=fn(u,f.document.name),m=oe(f.document.updateTime);var w=new Ee({mapValue:{fields:f.document.fields}}),I=(y=Yt.newFoundDocument(v,m,w),f.targetIds||[]),E=f.removedTargetIds||[];l=new Pu(I,E,y.key,y)}else if("documentDelete"in c)c.documentDelete,(f=c.documentDelete).document,v=fn(u,f.document),m=f.readTime?oe(f.readTime):Z.min(),w=Yt.newNoDocument(v,m),y=f.removedTargetIds||[],l=new Pu([],y,w.key,w);else if("documentRemove"in c)c.documentRemove,(f=c.documentRemove).document,v=fn(u,f.document),m=f.removedTargetIds||[],l=new Pu([],m,v,null);else{if(!("filter"in c))return B();c.filter;var S=c.filter;S.targetId,f=S.count||0,v=new hA(f),m=S.targetId,l=new v0(m,v)}return l}(this.R,r),s=function(u){if(!("targetChange"in u))return Z.min();var c=u.targetChange;return c.targetIds&&c.targetIds.length?Z.min():c.readTime?oe(c.readTime):Z.min()}(r);return this.listener._r(i,s)},e.prototype.mr=function(r){var i={};i.database=Wo(this.R),i.addTarget=function(u,c){var l,f=c.target;return(l=Xu(f)?{documents:I0(u,f)}:{query:E0(u,f)}).targetId=c.targetId,c.resumeToken.approximateByteSize()>0?l.resumeToken=m0(u,c.resumeToken):c.snapshotVersion.compareTo(Z.min())>0&&(l.readTime=Ho(u,c.snapshotVersion.toTimestamp())),l}(this.R,r);var s=function(u,c){var l=function(f,v){switch(v){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return B()}}(0,c.purpose);return l==null?null:{"goog-listen-tags":l}}(this.R,r);s&&(i.labels=s),this.cr(i)},e.prototype.yr=function(r){var i={};i.database=Wo(this.R),i.removeTarget=r,this.cr(i)},e}(z0),gN=function(t){function e(r,i,s,u,c){var l=this;return(l=t.call(this,r,"write_stream_connection_backoff","write_stream_idle",i,s,c)||this).R=u,l.gr=!1,l}return H(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(r){return this.Hi.Oi("Write",r)},e.prototype.onMessage=function(r){if(z(!!r.streamToken),this.lastStreamToken=r.streamToken,this.gr){this.Zi.reset();var i=function(u,c){return u&&u.length>0?(z(c!==void 0),u.map(function(l){return function(f,v){var m=f.updateTime?oe(f.updateTime):oe(v);return m.isEqual(Z.min())&&(m=oe(v)),new uA(m,f.transformResults||[])}(l,c)})):[]}(r.writeResults,r.commitTime),s=oe(r.commitTime);return this.listener.Tr(s,i)}return z(!r.writeResults||r.writeResults.length===0),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var r={};r.database=Wo(this.R),this.cr(r)},e.prototype.Er=function(r){var i=this,s={streamToken:this.lastStreamToken,writes:r.map(function(u){return Zu(i.R,u)})};this.cr(s)},e}(z0),mN=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).credentials=r,u.Hi=i,u.R=s,u.Rr=!1,u}return H(e,t),e.prototype.br=function(){if(this.Rr)throw new R(_.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(r,i,s){var u=this;return this.br(),this.credentials.getToken().then(function(c){return u.Hi.Ni(r,i,s,c)}).catch(function(c){throw c.name==="FirebaseError"?(c.code===_.UNAUTHENTICATED&&u.credentials.invalidateToken(),c):new R(_.UNKNOWN,c.toString())})},e.prototype.$i=function(r,i,s){var u=this;return this.br(),this.credentials.getToken().then(function(c){return u.Hi.$i(r,i,s,c)}).catch(function(c){throw c.name==="FirebaseError"?(c.code===_.UNAUTHENTICATED&&u.credentials.invalidateToken(),c):new R(_.UNKNOWN,c.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),yN=function(){function t(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var e=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(e){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},t.prototype.set=function(e){this.kr(),this.vr=0,e==="Online"&&(this.Vr=!1),this.Dr(e)},t.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},t.prototype.Cr=function(e){var r="Could not reach Cloud Firestore backend. "+e+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Ct(r),this.Vr=!1):P("OnlineStateTracker",r)},t.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},t}(),wN=function(t,e,r,i,s){var u=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=s,this.Lr.di(function(c){r.enqueueAndForget(function(){return C(u,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return qn(this)?(P("RemoteStore","Restarting streams for network reachability change."),[4,function(f){return C(this,void 0,void 0,function(){var v;return k(this,function(m){switch(m.label){case 0:return(v=M(f)).Or.add(4),[4,Mi(v)];case 1:return m.sent(),v.Br.set("Unknown"),v.Or.delete(4),[4,vs(v)];case 2:return m.sent(),[2]}})})}(this)]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})})}),this.Br=new yN(r,i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){return C(this,void 0,void 0,function(){var e,r;return k(this,function(i){switch(i.label){case 0:if(!qn(t))return[3,4];e=0,r=t.Mr,i.label=1;case 1:return e<r.length?[4,(0,r[e])(!0)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Mi(t){return C(this,void 0,void 0,function(){var e,r;return k(this,function(i){switch(i.label){case 0:e=0,r=t.Mr,i.label=1;case 1:return e<r.length?[4,(0,r[e])(!1)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Ca(t,e){var r=M(t);r.$r.has(e.targetId)||(r.$r.set(e.targetId,e),ip(r)?rp(r):Vi(r).er()&&np(r,e))}function $o(t,e){var r=M(t),i=Vi(r);r.$r.delete(e),i.er()&&W0(r,e),r.$r.size===0&&(i.er()?i.ir():qn(r)&&r.Br.set("Unknown"))}function np(t,e){t.qr.U(e.targetId),Vi(t).mr(e)}function W0(t,e){t.qr.U(e),Vi(t).yr(e)}function rp(t){t.qr=new mA({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Vi(t).start(),t.Br.Sr()}function ip(t){return qn(t)&&!Vi(t).tr()&&t.$r.size>0}function qn(t){return M(t).Or.size===0}function $0(t){t.qr=void 0}function bN(t){return C(this,void 0,void 0,function(){return k(this,function(e){return t.$r.forEach(function(r,i){np(t,r)}),[2]})})}function IN(t,e){return C(this,void 0,void 0,function(){return k(this,function(r){return $0(t),ip(t)?(t.Br.Nr(e),rp(t)):t.Br.set("Unknown"),[2]})})}function EN(t,e,r){return C(this,void 0,void 0,function(){var i,s,u;return k(this,function(c){switch(c.label){case 0:if(t.Br.set("Online"),!(e instanceof g0&&e.state===2&&e.cause))return[3,6];c.label=1;case 1:return c.trys.push([1,3,,5]),[4,function(l,f){return C(this,void 0,void 0,function(){var v,m,y,w;return k(this,function(I){switch(I.label){case 0:v=f.cause,m=0,y=f.targetIds,I.label=1;case 1:return m<y.length?(w=y[m],l.$r.has(w)?[4,l.remoteSyncer.rejectListen(w,v)]:[3,3]):[3,5];case 2:I.sent(),l.$r.delete(w),l.qr.removeTarget(w),I.label=3;case 3:I.label=4;case 4:return m++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return c.sent(),[3,5];case 3:return i=c.sent(),P("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,ia(t,i)];case 4:return c.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Pu?t.qr.X(e):e instanceof v0?t.qr.rt(e):t.qr.et(e),r.isEqual(Z.min()))return[3,13];c.label=7;case 7:return c.trys.push([7,11,,13]),[4,q0(t.localStore)];case 8:return s=c.sent(),r.compareTo(s)>=0?[4,function(l,f){var v=l.qr.ut(f);return v.targetChanges.forEach(function(m,y){if(m.resumeToken.approximateByteSize()>0){var w=l.$r.get(y);w&&l.$r.set(y,w.withResumeToken(m.resumeToken,f))}}),v.targetMismatches.forEach(function(m){var y=l.$r.get(m);if(y){l.$r.set(m,y.withResumeToken(pe.EMPTY_BYTE_STRING,y.snapshotVersion)),W0(l,m);var w=new ka(y.target,m,1,y.sequenceNumber);np(l,w)}}),l.remoteSyncer.applyRemoteEvent(v)}(t,r)]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,13];case 11:return P("RemoteStore","Failed to raise snapshot:",u=c.sent()),[4,ia(t,u)];case 12:return c.sent(),[3,13];case 13:return[2]}})})}function ia(t,e,r){return C(this,void 0,void 0,function(){var i=this;return k(this,function(s){switch(s.label){case 0:if(!Cr(e))throw e;return t.Or.add(1),[4,Mi(t)];case 1:return s.sent(),t.Br.set("Offline"),r||(r=function(){return q0(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return C(i,void 0,void 0,function(){return k(this,function(u){switch(u.label){case 0:return P("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return u.sent(),t.Or.delete(1),[4,vs(t)];case 2:return u.sent(),[2]}})})}),[2]}})})}function Q0(t,e){return e().catch(function(r){return ia(t,r,e)})}function Fi(t){return C(this,void 0,void 0,function(){var e,r,i,s,u;return k(this,function(c){switch(c.label){case 0:e=M(t),r=Fn(e),i=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,c.label=1;case 1:if(!function(l){return qn(l)&&l.Fr.length<10}(e))return[3,7];c.label=2;case 2:return c.trys.push([2,4,,6]),[4,tN(e.localStore,i)];case 3:return(s=c.sent())===null?(e.Fr.length===0&&r.ir(),[3,7]):(i=s.batchId,function(l,f){l.Fr.push(f);var v=Fn(l);v.er()&&v.pr&&v.Er(f.mutations)}(e,s),[3,6]);case 4:return u=c.sent(),[4,ia(e,u)];case 5:return c.sent(),[3,6];case 6:return[3,1];case 7:return X0(e)&&Y0(e),[2]}})})}function X0(t){return qn(t)&&!Fn(t).tr()&&t.Fr.length>0}function Y0(t){Fn(t).start()}function TN(t){return C(this,void 0,void 0,function(){return k(this,function(e){return Fn(t).Ar(),[2]})})}function SN(t){return C(this,void 0,void 0,function(){var e,r,i,s;return k(this,function(u){for(e=Fn(t),r=0,i=t.Fr;r<i.length;r++)s=i[r],e.Er(s.mutations);return[2]})})}function _N(t,e,r){return C(this,void 0,void 0,function(){var i,s;return k(this,function(u){switch(u.label){case 0:return i=t.Fr.shift(),s=LA.from(i,e,r),[4,Q0(t,function(){return t.remoteSyncer.applySuccessfulWrite(s)})];case 1:return u.sent(),[4,Fi(t)];case 2:return u.sent(),[2]}})})}function AN(t,e){return C(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return e&&Fn(t).pr?[4,function(i,s){return C(this,void 0,void 0,function(){var u,c;return k(this,function(l){switch(l.label){case 0:return p0(c=s.code)&&c!==_.ABORTED?(u=i.Fr.shift(),Fn(i).sr(),[4,Q0(i,function(){return i.remoteSyncer.rejectFailedWrite(u.batchId,s)})]):[3,3];case 1:return l.sent(),[4,Fi(i)];case 2:l.sent(),l.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return X0(t)&&Y0(t),[2]}})})}function of(t,e){return C(this,void 0,void 0,function(){var r;return k(this,function(i){switch(i.label){case 0:return r=M(t),e?(r.Or.delete(2),[4,vs(r)]):[3,2];case 1:return i.sent(),[3,5];case 2:return e?[3,4]:(r.Or.add(2),[4,Mi(r)]);case 3:i.sent(),r.Br.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}})})}function Vi(t){var e=this;return t.Ur||(t.Ur=function(r,i,s){var u=M(r);return u.br(),new vN(i,u.Hi,u.credentials,u.R,s)}(t.datastore,t.asyncQueue,{Ii:bN.bind(null,t),Ri:IN.bind(null,t),_r:EN.bind(null,t)}),t.Mr.push(function(r){return C(e,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return r?(t.Ur.sr(),ip(t)?rp(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:i.sent(),$0(t),i.label=3;case 3:return[2]}})})})),t.Ur}function Fn(t){var e=this;return t.Kr||(t.Kr=function(r,i,s){var u=M(r);return u.br(),new gN(i,u.Hi,u.credentials,u.R,s)}(t.datastore,t.asyncQueue,{Ii:TN.bind(null,t),Ri:AN.bind(null,t),Ir:SN.bind(null,t),Tr:_N.bind(null,t)}),t.Mr.push(function(r){return C(e,void 0,void 0,function(){return k(this,function(i){switch(i.label){case 0:return r?(t.Kr.sr(),[4,Fi(t)]):[3,2];case 1:return i.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:i.sent(),t.Fr.length>0&&(P("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),i.label=4;case 4:return[2]}})})})),t.Kr}var NN=function(){function t(e,r,i,s,u){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=u,this.deferred=new de,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(c){})}return t.createAndSchedule=function(e,r,i,s,u){var c=new t(e,r,Date.now()+i,s,u);return c.start(i),c},t.prototype.start=function(e){var r=this;this.timerHandle=setTimeout(function(){return r.handleDelayElapsed()},e)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},t.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.timerHandle!==null?(e.clearTimeout(),e.op().then(function(r){return e.deferred.resolve(r)})):Promise.resolve()})},t.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ui(t,e){if(Ct("AsyncQueue",e+": "+t),Cr(t))return new R(_.UNAVAILABLE,e+": "+t);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J0=function(){function t(e){this.comparator=e?function(r,i){return e(r,i)||K.comparator(r.key,i.key)}:function(r,i){return K.comparator(r.key,i.key)},this.keyedMap=tf(),this.sortedSet=new Jt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(e){return this.keyedMap.get(e)!=null},t.prototype.get=function(e){return this.keyedMap.get(e)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(e){var r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(r,i){return e(r),!1})},t.prototype.add=function(e){var r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))},t.prototype.delete=function(e){var r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this},t.prototype.isEqual=function(e){if(!(e instanceof t)||this.size!==e.size)return!1;for(var r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();r.hasNext();){var s=r.getNext().key,u=i.getNext().key;if(!s.isEqual(u))return!1}return!0},t.prototype.toString=function(){var e=[];return this.forEach(function(r){e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`},t.prototype.copy=function(e,r){var i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i},t}(),gy=function(){function t(){this.Qr=new Jt(K.comparator)}return t.prototype.track=function(e){var r=e.doc.key,i=this.Qr.get(r);i?e.type!==0&&i.type===3?this.Qr=this.Qr.insert(r,e):e.type===3&&i.type!==1?this.Qr=this.Qr.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Qr=this.Qr.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Qr=this.Qr.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Qr=this.Qr.remove(r):e.type===1&&i.type===2?this.Qr=this.Qr.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Qr=this.Qr.insert(r,{type:2,doc:e.doc}):B():this.Qr=this.Qr.insert(r,e)},t.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal(function(r,i){e.push(i)}),e},t}(),oa=function(){function t(e,r,i,s,u,c,l,f){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=f}return t.fromInitialDocuments=function(e,r,i,s){var u=[];return r.forEach(function(c){u.push({type:0,doc:c})}),new t(e,r,J0.emptySet(r),u,i,s,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0},t}(),kN=function(){this.Wr=void 0,this.listeners=[]},DN=function(){this.queries=new Li(function(t){return r0(t)},hs),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e){return C(this,void 0,void 0,function(){var r,i,s,u,c,l,f;return k(this,function(v){switch(v.label){case 0:if(r=M(t),i=e.query,s=!1,(u=r.queries.get(i))||(s=!0,u=new kN),!s)return[3,4];v.label=1;case 1:return v.trys.push([1,3,,4]),c=u,[4,r.onListen(i)];case 2:return c.Wr=v.sent(),[3,4];case 3:return l=v.sent(),f=Ui(l,"Initialization of query '"+Jl(e.query)+"' failed"),[2,void e.onError(f)];case 4:return r.queries.set(i,u),u.listeners.push(e),e.zr(r.onlineState),u.Wr&&e.Hr(u.Wr)&&up(r),[2]}})})}function sp(t,e){return C(this,void 0,void 0,function(){var r,i,s,u,c;return k(this,function(l){return r=M(t),i=e.query,s=!1,(u=r.queries.get(i))&&(c=u.listeners.indexOf(e))>=0&&(u.listeners.splice(c,1),s=u.listeners.length===0),s?[2,(r.queries.delete(i),r.onUnlisten(i))]:[2]})})}function CN(t,e){for(var r=M(t),i=!1,s=0,u=e;s<u.length;s++){var c=u[s],l=c.query,f=r.queries.get(l);if(f){for(var v=0,m=f.listeners;v<m.length;v++)m[v].Hr(c)&&(i=!0);f.Wr=c}}i&&up(r)}function RN(t,e,r){var i=M(t),s=i.queries.get(e);if(s)for(var u=0,c=s.listeners;u<c.length;u++)c[u].onError(r);i.queries.delete(e)}function up(t){t.Gr.forEach(function(e){e.next()})}var ap=function(){function t(e,r,i){this.query=e,this.Jr=r,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=i||{}}return t.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var r=[],i=0,s=e.docChanges;i<s.length;i++){var u=s[i];u.type!==3&&r.push(u)}e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var c=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),c=!0):this.eo(e,this.onlineState)&&(this.no(e),c=!0),this.Xr=e,c},t.prototype.onError=function(e){this.Jr.error(e)},t.prototype.zr=function(e){this.onlineState=e;var r=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),r=!0),r},t.prototype.eo=function(e,r){if(!e.fromCache)return!0;var i=r!=="Offline";return!(this.options.so&&i||e.docs.isEmpty()&&r!=="Offline")},t.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var r=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0},t.prototype.no=function(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z0=function(t){this.key=t},tb=function(t){this.key=t},eb=function(){function t(e,r){this.query=e,this.uo=r,this.ao=null,this.current=!1,this.ho=ft(),this.mutatedKeys=ft(),this.lo=i0(e),this.fo=new J0(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(e,r){var i=this,s=r?r.mo:new gy,u=r?r.fo:this.fo,c=r?r.mutatedKeys:this.mutatedKeys,l=u,f=!1,v=Ou(this.query)&&u.size===this.query.limit?u.last():null,m=Ju(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(function(w,I){var E=u.get(w),S=ls(i.query,I)?I:null,N=!!E&&i.mutatedKeys.has(E.key),x=!!S&&(S.hasLocalMutations||i.mutatedKeys.has(S.key)&&S.hasCommittedMutations),F=!1;E&&S?E.data.isEqual(S.data)?N!==x&&(s.track({type:3,doc:S}),F=!0):i.yo(E,S)||(s.track({type:2,doc:S}),F=!0,(v&&i.lo(S,v)>0||m&&i.lo(S,m)<0)&&(f=!0)):!E&&S?(s.track({type:0,doc:S}),F=!0):E&&!S&&(s.track({type:1,doc:E}),F=!0,(v||m)&&(f=!0)),F&&(S?(l=l.add(S),c=x?c.add(w):c.delete(w)):(l=l.delete(w),c=c.delete(w)))}),Ou(this.query)||Ju(this.query))for(;l.size>this.query.limit;){var y=Ou(this.query)?l.last():l.first();l=l.delete(y.key),c=c.delete(y.key),s.track({type:1,doc:y})}return{fo:l,mo:s,Nn:f,mutatedKeys:c}},t.prototype.yo=function(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations},t.prototype.applyChanges=function(e,r,i){var s=this,u=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var c=e.mo.jr();c.sort(function(m,y){return function(w,I){var E=function(S){switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return E(w)-E(I)}(m.type,y.type)||s.lo(m.doc,y.doc)}),this.po(i);var l=r?this.Eo():[],f=this.ho.size===0&&this.current?1:0,v=f!==this.ao;return this.ao=f,c.length!==0||v?{snapshot:new oa(this.query,e.fo,u,c,e.mutatedKeys,f===0,v,!1),To:l}:{To:l}},t.prototype.zr=function(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new gy,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},t.prototype.po=function(e){var r=this;e&&(e.addedDocuments.forEach(function(i){return r.uo=r.uo.add(i)}),e.modifiedDocuments.forEach(function(i){}),e.removedDocuments.forEach(function(i){return r.uo=r.uo.delete(i)}),this.current=e.current)},t.prototype.Eo=function(){var e=this;if(!this.current)return[];var r=this.ho;this.ho=ft(),this.fo.forEach(function(s){e.Io(s.key)&&(e.ho=e.ho.add(s.key))});var i=[];return r.forEach(function(s){e.ho.has(s)||i.push(new tb(s))}),this.ho.forEach(function(s){r.has(s)||i.push(new Z0(s))}),i},t.prototype.Ao=function(e){this.uo=e.Bn,this.ho=ft();var r=this._o(e.documents);return this.applyChanges(r,!0)},t.prototype.Ro=function(){return oa.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},t}(),ON=function(t,e,r){this.query=t,this.targetId=e,this.view=r},xN=function(t){this.key=t,this.bo=!1},PN=function(){function t(e,r,i,s,u,c){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.vo={},this.Po=new Li(function(l){return r0(l)},hs),this.Vo=new Map,this.So=new Set,this.Do=new Jt(K.comparator),this.Co=new Map,this.No=new tp,this.xo={},this.ko=new Map,this.Fo=ea.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),t}();function LN(t,e){return C(this,void 0,void 0,function(){var r,i,s,u,c,l;return k(this,function(f){switch(f.label){case 0:return r=pp(t),(u=r.Po.get(e))?(i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),s=u.view.Ro(),[3,4]):[3,1];case 1:return[4,na(r.localStore,en(e))];case 2:return c=f.sent(),l=r.sharedClientState.addLocalQueryTarget(c.targetId),i=c.targetId,[4,cp(r,e,i,l==="current")];case 3:s=f.sent(),r.isPrimaryClient&&Ca(r.remoteStore,c),f.label=4;case 4:return[2,s]}})})}function cp(t,e,r,i){return C(this,void 0,void 0,function(){var s,u,c,l,f,v;return k(this,function(m){switch(m.label){case 0:return t.Oo=function(y,w,I){return function(E,S,N,x){return C(this,void 0,void 0,function(){var F,U,X;return k(this,function(et){switch(et.label){case 0:return F=S.view._o(N),F.Nn?[4,ra(E.localStore,S.query,!1).then(function(L){var dt=L.documents;return S.view._o(dt,F)})]:[3,2];case 1:F=et.sent(),et.label=2;case 2:return U=x&&x.targetChanges.get(S.targetId),X=S.view.applyChanges(F,E.isPrimaryClient,U),[2,(sf(E,S.targetId,X.To),X.snapshot)]}})})}(t,y,w,I)},[4,ra(t.localStore,e,!0)];case 1:return s=m.sent(),u=new eb(e,s.Bn),c=u._o(s.documents),l=Wf.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline"),f=u.applyChanges(c,t.isPrimaryClient,l),sf(t,r,f.To),v=new ON(e,r,u),[2,(t.Po.set(e,v),t.Vo.has(r)?t.Vo.get(r).push(e):t.Vo.set(r,[e]),f.snapshot)]}})})}function MN(t,e){return C(this,void 0,void 0,function(){var r,i,s;return k(this,function(u){switch(u.label){case 0:return r=M(t),i=r.Po.get(e),(s=r.Vo.get(i.targetId)).length>1?[2,(r.Vo.set(i.targetId,s.filter(function(c){return!hs(c,e)})),void r.Po.delete(e))]:r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,ki(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),$o(r.remoteStore,i.targetId),Di(r,i.targetId)}).catch(Rr)]):[3,3];case 1:u.sent(),u.label=2;case 2:return[3,5];case 3:return Di(r,i.targetId),[4,ki(r.localStore,i.targetId,!0)];case 4:u.sent(),u.label=5;case 5:return[2]}})})}function FN(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c;return k(this,function(l){switch(l.label){case 0:i=dp(t),l.label=1;case 1:return l.trys.push([1,5,,6]),[4,function(f,v){var m,y=M(f),w=fe.now(),I=v.reduce(function(E,S){return E.add(S.key)},ft());return y.persistence.runTransaction("Locally write mutations","readwrite",function(E){return y.Mn.pn(E,I).next(function(S){m=S;for(var N=[],x=0,F=v;x<F.length;x++){var U=F[x],X=cA(U,m.get(U.key));X!=null&&N.push(new jn(U.key,X,Zw(X.value.mapValue),Qt.exists(!0)))}return y._n.addMutationBatch(E,w,N,v)})}).then(function(E){return E.applyToLocalDocumentSet(m),{batchId:E.batchId,changes:m}})}(i.localStore,e)];case 2:return s=l.sent(),i.sharedClientState.addPendingMutation(s.batchId),function(f,v,m){var y=f.xo[f.currentUser.toKey()];y||(y=new Jt(rt)),y=y.insert(v,m),f.xo[f.currentUser.toKey()]=y}(i,s.batchId,r),[4,Bn(i,s.changes)];case 3:return l.sent(),[4,Fi(i.remoteStore)];case 4:return l.sent(),[3,6];case 5:return u=l.sent(),c=Ui(u,"Failed to persist write"),r.reject(c),[3,6];case 6:return[2]}})})}function nb(t,e){return C(this,void 0,void 0,function(){var r,i;return k(this,function(s){switch(s.label){case 0:r=M(t),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,JA(r.localStore,e)];case 2:return i=s.sent(),e.targetChanges.forEach(function(u,c){var l=r.Co.get(c);l&&(z(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?l.bo=!0:u.modifiedDocuments.size>0?z(l.bo):u.removedDocuments.size>0&&(z(l.bo),l.bo=!1))}),[4,Bn(r,i,e)];case 3:return s.sent(),[3,6];case 4:return[4,Rr(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function my(t,e,r){var i=M(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){var s=[];i.Po.forEach(function(u,c){var l=c.view.zr(e);l.snapshot&&s.push(l.snapshot)}),function(u,c){var l=M(u);l.onlineState=c;var f=!1;l.queries.forEach(function(v,m){for(var y=0,w=m.listeners;y<w.length;y++)w[y].zr(c)&&(f=!0)}),f&&up(l)}(i.eventManager,e),s.length&&i.vo._r(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function VN(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,f;return k(this,function(v){switch(v.label){case 0:return(i=M(t)).sharedClientState.updateQueryState(e,"rejected",r),s=i.Co.get(e),(u=s&&s.key)?(c=(c=new Jt(K.comparator)).insert(u,Yt.newNoDocument(u,Z.min())),l=ft().add(u),f=new zf(Z.min(),new Map,new Mt(rt),c,l),[4,nb(i,f)]):[3,2];case 1:return v.sent(),i.Do=i.Do.remove(u),i.Co.delete(e),fp(i),[3,4];case 2:return[4,ki(i.localStore,e,!1).then(function(){return Di(i,e,r)}).catch(Rr)];case 3:v.sent(),v.label=4;case 4:return[2]}})})}function UN(t,e){return C(this,void 0,void 0,function(){var r,i,s;return k(this,function(u){switch(u.label){case 0:r=M(t),i=e.batch.batchId,u.label=1;case 1:return u.trys.push([1,4,,6]),[4,YA(r.localStore,e)];case 2:return s=u.sent(),lp(r,i,null),hp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),[4,Bn(r,s)];case 3:return u.sent(),[3,6];case 4:return[4,Rr(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function jN(t,e,r){return C(this,void 0,void 0,function(){var i,s;return k(this,function(u){switch(u.label){case 0:i=M(t),u.label=1;case 1:return u.trys.push([1,4,,6]),[4,function(c,l){var f=M(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",function(v){var m;return f._n.lookupMutationBatch(v,l).next(function(y){return z(y!==null),m=y.keys(),f._n.removeMutationBatch(v,y)}).next(function(){return f._n.performConsistencyCheck(v)}).next(function(){return f.Mn.pn(v,m)})})}(i.localStore,e)];case 2:return s=u.sent(),lp(i,e,r),hp(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),[4,Bn(i,s)];case 3:return u.sent(),[3,6];case 4:return[4,Rr(u.sent())];case 5:return u.sent(),[3,6];case 6:return[2]}})})}function qN(t,e){return C(this,void 0,void 0,function(){var r,i,s,u,c;return k(this,function(l){switch(l.label){case 0:qn((r=M(t)).remoteStore)||P("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(f){var v=M(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(m){return v._n.getHighestUnacknowledgedBatchId(m)})}(r.localStore)];case 2:return(i=l.sent())===-1?[2,void e.resolve()]:((s=r.ko.get(i)||[]).push(e),r.ko.set(i,s),[3,4]);case 3:return u=l.sent(),c=Ui(u,"Initialization of waitForPendingWrites() operation failed"),e.reject(c),[3,4];case 4:return[2]}})})}function hp(t,e){(t.ko.get(e)||[]).forEach(function(r){r.resolve()}),t.ko.delete(e)}function lp(t,e,r){var i=M(t),s=i.xo[i.currentUser.toKey()];if(s){var u=s.get(e);u&&(r?u.reject(r):u.resolve(),s=s.remove(e)),i.xo[i.currentUser.toKey()]=s}}function Di(t,e,r){r===void 0&&(r=null),t.sharedClientState.removeLocalQueryTarget(e);for(var i=0,s=t.Vo.get(e);i<s.length;i++){var u=s[i];t.Po.delete(u),r&&t.vo.Mo(u,r)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(c){t.No.containsKey(c)||rb(t,c)})}function rb(t,e){t.So.delete(e.path.canonicalString());var r=t.Do.get(e);r!==null&&($o(t.remoteStore,r),t.Do=t.Do.remove(e),t.Co.delete(r),fp(t))}function sf(t,e,r){for(var i=0,s=r;i<s.length;i++){var u=s[i];u instanceof Z0?(t.No.addReference(u.key,e),BN(t,u)):u instanceof tb?(P("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||rb(t,u.key)):B()}}function BN(t,e){var r=e.key,i=r.path.canonicalString();t.Do.get(r)||t.So.has(i)||(P("SyncEngine","New document in limbo: "+r),t.So.add(i),fp(t))}function fp(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var r=new K(ut.fromString(e)),i=t.Fo.next();t.Co.set(i,new xN(r)),t.Do=t.Do.insert(r,i),Ca(t.remoteStore,new ka(en(cs(r.path)),i,2,Te.o))}}function Bn(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c;return k(this,function(l){switch(l.label){case 0:return i=M(t),s=[],u=[],c=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach(function(f,v){c.push(i.Oo(v,e,r).then(function(m){if(m){i.isPrimaryClient&&i.sharedClientState.updateQueryState(v.targetId,m.fromCache?"not-current":"current"),s.push(m);var y=QA.Pn(v.targetId,m);u.push(y)}}))}),[4,Promise.all(c)]);case 1:return l.sent(),i.vo._r(s),[4,function(f,v){return C(this,void 0,void 0,function(){var m,y,w,I,E,S,N,x,F;return k(this,function(U){switch(U.label){case 0:m=M(f),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,m.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(X){return O.forEach(v,function(et){return O.forEach(et.bn,function(L){return m.persistence.referenceDelegate.addReference(X,et.targetId,L)}).next(function(){return O.forEach(et.vn,function(L){return m.persistence.referenceDelegate.removeReference(X,et.targetId,L)})})})})];case 2:return U.sent(),[3,4];case 3:if(!Cr(y=U.sent()))throw y;return P("LocalStore","Failed to update sequence numbers: "+y),[3,4];case 4:for(w=0,I=v;w<I.length;w++)E=I[w],S=E.targetId,E.fromCache||(N=m.kn.get(S),x=N.snapshotVersion,F=N.withLastLimboFreeSnapshotVersion(x),m.kn=m.kn.insert(S,F));return[2]}})})}(i.localStore,u)];case 2:l.sent(),l.label=3;case 3:return[2]}})})}function KN(t,e){return C(this,void 0,void 0,function(){var r,i;return k(this,function(s){switch(s.label){case 0:return(r=M(t)).currentUser.isEqual(e)?[3,3]:(P("SyncEngine","User change. New user:",e.toKey()),[4,j0(r.localStore,e)]);case 1:return i=s.sent(),r.currentUser=e,function(u,c){u.ko.forEach(function(l){l.forEach(function(f){f.reject(new R(_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ko.clear()}(r),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,Bn(r,i.Ln)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function GN(t,e){var r=M(t),i=r.Co.get(e);if(i&&i.bo)return ft().add(i.key);var s=ft(),u=r.Vo.get(e);if(!u)return s;for(var c=0,l=u;c<l.length;c++){var f=l[c],v=r.Po.get(f);s=s.unionWith(v.view.wo)}return s}function HN(t,e){return C(this,void 0,void 0,function(){var r,i,s;return k(this,function(u){switch(u.label){case 0:return[4,ra((r=M(t)).localStore,e.query,!0)];case 1:return i=u.sent(),s=e.view.Ao(i),[2,(r.isPrimaryClient&&sf(r,e.targetId,s.To),s)]}})})}function zN(t){return C(this,void 0,void 0,function(){var e;return k(this,function(r){return[2,K0((e=M(t)).localStore).then(function(i){return Bn(e,i)})]})})}function WN(t,e,r,i){return C(this,void 0,void 0,function(){var s,u;return k(this,function(c){switch(c.label){case 0:return[4,function(l,f){var v=M(l),m=M(v._n);return v.persistence.runTransaction("Lookup mutation documents","readonly",function(y){return m.jt(y,f).next(function(w){return w?v.Mn.pn(y,w):O.resolve(null)})})}((s=M(t)).localStore,e)];case 1:return(u=c.sent())===null?[3,6]:r!=="pending"?[3,3]:[4,Fi(s.remoteStore)];case 2:return c.sent(),[3,4];case 3:r==="acknowledged"||r==="rejected"?(lp(s,e,i||null),hp(s,e),function(l,f){M(M(l)._n).Gt(f)}(s.localStore,e)):B(),c.label=4;case 4:return[4,Bn(s,u)];case 5:return c.sent(),[3,7];case 6:P("SyncEngine","Cannot apply mutation batch with id: "+e),c.label=7;case 7:return[2]}})})}function $N(t,e){return C(this,void 0,void 0,function(){var r,i,s,u,c,l,f,v;return k(this,function(m){switch(m.label){case 0:return pp(r=M(t)),dp(r),e!==!0||r.$o===!0?[3,3]:(i=r.sharedClientState.getAllActiveQueryTargets(),[4,yy(r,i.toArray())]);case 1:return s=m.sent(),r.$o=!0,[4,of(r.remoteStore,!0)];case 2:for(m.sent(),u=0,c=s;u<c.length;u++)l=c[u],Ca(r.remoteStore,l);return[3,7];case 3:return e!==!1||r.$o===!1?[3,7]:(f=[],v=Promise.resolve(),r.Vo.forEach(function(y,w){r.sharedClientState.isLocalQueryTarget(w)?f.push(w):v=v.then(function(){return Di(r,w),ki(r.localStore,w,!0)}),$o(r.remoteStore,w)}),[4,v]);case 4:return m.sent(),[4,yy(r,f)];case 5:return m.sent(),function(y){var w=M(y);w.Co.forEach(function(I,E){$o(w.remoteStore,E)}),w.No.ts(),w.Co=new Map,w.Do=new Jt(K.comparator)}(r),r.$o=!1,[4,of(r.remoteStore,!1)];case 6:m.sent(),m.label=7;case 7:return[2]}})})}function yy(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,f,v,m,y,w,I,E,S,N;return k(this,function(x){switch(x.label){case 0:i=M(t),s=[],u=[],c=0,l=e,x.label=1;case 1:return c<l.length?(f=l[c],v=void 0,(m=i.Vo.get(f))&&m.length!==0?[4,na(i.localStore,en(m[0]))]:[3,7]):[3,13];case 2:v=x.sent(),y=0,w=m,x.label=3;case 3:return y<w.length?(I=w[y],E=i.Po.get(I),[4,HN(i,E)]):[3,6];case 4:(S=x.sent()).snapshot&&u.push(S.snapshot),x.label=5;case 5:return y++,[3,3];case 6:return[3,11];case 7:return[4,B0(i.localStore,f)];case 8:return N=x.sent(),[4,na(i.localStore,N)];case 9:return v=x.sent(),[4,cp(i,ib(N),f,!1)];case 10:x.sent(),x.label=11;case 11:s.push(v),x.label=12;case 12:return c++,[3,1];case 13:return[2,(i.vo._r(u),s)]}})})}function ib(t){return e0(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function QN(t){var e=M(t);return M(M(e.localStore).persistence).fn()}function XN(t,e,r,i){return C(this,void 0,void 0,function(){var s,u,c;return k(this,function(l){switch(l.label){case 0:return(s=M(t)).$o?(P("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!s.Vo.has(e))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,K0(s.localStore)];case 3:return u=l.sent(),c=zf.createSynthesizedRemoteEventForCurrentChange(e,r==="current"),[4,Bn(s,u,c)];case 4:return l.sent(),[3,8];case 5:return[4,ki(s.localStore,e,!0)];case 6:return l.sent(),Di(s,e,i),[3,8];case 7:B(),l.label=8;case 8:return[2]}})})}function YN(t,e,r){return C(this,void 0,void 0,function(){var i,s,u,c,l,f,v,m,y,w;return k(this,function(I){switch(I.label){case 0:if(!(i=pp(t)).$o)return[3,10];s=0,u=e,I.label=1;case 1:return s<u.length?(c=u[s],i.Vo.has(c)?(P("SyncEngine","Adding an already active target "+c),[3,5]):[4,B0(i.localStore,c)]):[3,6];case 2:return l=I.sent(),[4,na(i.localStore,l)];case 3:return f=I.sent(),[4,cp(i,ib(l),f.targetId,!1)];case 4:I.sent(),Ca(i.remoteStore,f),I.label=5;case 5:return s++,[3,1];case 6:v=function(E){return k(this,function(S){switch(S.label){case 0:return i.Vo.has(E)?[4,ki(i.localStore,E,!1).then(function(){$o(i.remoteStore,E),Di(i,E)}).catch(Rr)]:[3,2];case 1:S.sent(),S.label=2;case 2:return[2]}})},m=0,y=r,I.label=7;case 7:return m<y.length?(w=y[m],[5,v(w)]):[3,10];case 8:I.sent(),I.label=9;case 9:return m++,[3,7];case 10:return[2]}})})}function pp(t){var e=M(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VN.bind(null,e),e.vo._r=CN.bind(null,e.eventManager),e.vo.Mo=RN.bind(null,e.eventManager),e}function dp(t){var e=M(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jN.bind(null,e),e}var ob=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(e){return C(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return this.R=Da(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return r.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},t.prototype.Uo=function(e){return null},t.prototype.Ko=function(e){return U0(this.persistence,new V0,e.initialUser,this.R)},t.prototype.qo=function(e){return new uN(cN.bs,this.R)},t.prototype.Bo=function(e){return new G0},t.prototype.terminate=function(){return C(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}})})},t}(),sb=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).Qo=r,u.cacheSizeBytes=i,u.forceOwnership=s,u.synchronizeTabs=!1,u}return H(e,t),e.prototype.initialize=function(r){return C(this,void 0,void 0,function(){var i=this;return k(this,function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,r)];case 1:return s.sent(),[4,eN(this.localStore)];case 2:return s.sent(),[4,this.Qo.initialize(this,r)];case 3:return s.sent(),[4,dp(this.Qo.syncEngine)];case 4:return s.sent(),[4,Fi(this.Qo.remoteStore)];case 5:return s.sent(),[4,this.persistence.He(function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()})];case 6:return s.sent(),[2]}})})},e.prototype.Ko=function(r){return U0(this.persistence,new V0,r.initialUser,this.R)},e.prototype.Uo=function(r){var i=this.persistence.referenceDelegate.garbageCollector;return new BA(i,r.asyncQueue)},e.prototype.qo=function(r){var i=Zf(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Ye.withCacheSize(this.cacheSizeBytes):Ye.DEFAULT;return new $A(this.synchronizeTabs,i,r.clientId,s,r.asyncQueue,H0(),Lu(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(r){return new G0},e}(ob),JN=function(t){function e(r,i){var s=this;return(s=t.call(this,r,i,!1)||this).Qo=r,s.cacheSizeBytes=i,s.synchronizeTabs=!0,s}return H(e,t),e.prototype.initialize=function(r){return C(this,void 0,void 0,function(){var i,s=this;return k(this,function(u){switch(u.label){case 0:return[4,t.prototype.initialize.call(this,r)];case 1:return u.sent(),i=this.Qo.syncEngine,this.sharedClientState instanceof Pl?(this.sharedClientState.syncEngine={ui:WN.bind(null,i),ai:XN.bind(null,i),hi:YN.bind(null,i),fn:QN.bind(null,i),ci:zN.bind(null,i)},[4,this.sharedClientState.start()]):[3,3];case 2:u.sent(),u.label=3;case 3:return[4,this.persistence.He(function(c){return C(s,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return[4,$N(this.Qo.syncEngine,c)];case 1:return l.sent(),this.gcScheduler&&(c&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):c||this.gcScheduler.stop()),[2]}})})})];case 4:return u.sent(),[2]}})})},e.prototype.Bo=function(r){var i=H0();if(!Pl.yt(i))throw new R(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var s=Zf(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey);return new Pl(i,r.asyncQueue,s,r.clientId,r.initialUser)},e}(sb),uf=function(){function t(){}return t.prototype.initialize=function(e,r){return C(this,void 0,void 0,function(){var i=this;return k(this,function(s){switch(s.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(u){return my(i.syncEngine,u,1)},this.remoteStore.remoteSyncer.handleCredentialChange=KN.bind(null,this.syncEngine),[4,of(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:s.sent(),s.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(e){return new DN},t.prototype.createDatastore=function(e){var r,i=Da(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new dN(r));return function(u,c,l){return new mN(u,c,l)}(e.credentials,s,i)},t.prototype.createRemoteStore=function(e){var r,i,s,u,c,l=this;return r=this.localStore,i=this.datastore,s=e.asyncQueue,u=function(f){return my(l.syncEngine,f,0)},c=vy.yt()?new vy:new lN,new wN(r,i,s,u,c)},t.prototype.createSyncEngine=function(e,r){return function(i,s,u,c,l,f,v){var m=new PN(i,s,u,c,l,f);return v&&(m.$o=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)},t.prototype.terminate=function(){return function(e){return C(this,void 0,void 0,function(){var r;return k(this,function(i){switch(i.label){case 0:return r=M(e),P("RemoteStore","RemoteStore shutting down."),r.Or.add(5),[4,Mi(r)];case 1:return i.sent(),r.Lr.shutdown(),r.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ra=function(){function t(e){this.observer=e,this.muted=!1}return t.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},t.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(e,r){var i=this;this.muted||setTimeout(function(){i.muted||e(r)},0)},t}(),ZN=function(){function t(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(e){return C(this,void 0,void 0,function(){var r,i=this;return k(this,function(s){switch(s.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new R(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(u,c){return C(this,void 0,void 0,function(){var l,f,v,m,y,w;return k(this,function(I){switch(I.label){case 0:return l=M(u),f=Wo(l.R)+"/documents",v={documents:c.map(function(E){return zo(l.R,E)})},[4,l.$i("BatchGetDocuments",f,v)];case 1:return m=I.sent(),y=new Map,m.forEach(function(E){var S=function(N,x){return"found"in x?function(F,U){z(!!U.found),U.found.name,U.found.updateTime;var X=fn(F,U.found.name),et=oe(U.found.updateTime),L=new Ee({mapValue:{fields:U.found.fields}});return Yt.newFoundDocument(X,et,L)}(N,x):"missing"in x?function(F,U){z(!!U.missing),z(!!U.readTime);var X=fn(F,U.missing),et=oe(U.readTime);return Yt.newNoDocument(X,et)}(N,x):B()}(l.R,E);y.set(S.key.toString(),S)}),w=[],[2,(c.forEach(function(E){var S=y.get(E.toString());z(!!S),w.push(S)}),w)]}})})}(this.datastore,e)];case 1:return[2,((r=s.sent()).forEach(function(u){return i.recordVersion(u)}),r)]}})})},t.prototype.set=function(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.update=function(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())},t.prototype.delete=function(e){this.write(new ds(e,this.precondition(e))),this.writtenDocs.add(e.toString())},t.prototype.commit=function(){return C(this,void 0,void 0,function(){var e,r=this;return k(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(s){e.delete(s.key.toString())}),e.forEach(function(s,u){var c=K.fromPath(u);r.mutations.push(new Hf(c,r.precondition(c)))}),[4,function(s,u){return C(this,void 0,void 0,function(){var c,l,f;return k(this,function(v){switch(v.label){case 0:return c=M(s),l=Wo(c.R)+"/documents",f={writes:u.map(function(m){return Zu(c.R,m)})},[4,c.Ni("Commit",l,f)];case 1:return v.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return i.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(e){var r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw B();r=Z.min()}var i=this.readVersions.get(e.key.toString());if(i){if(!r.isEqual(i))throw new R(_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)},t.prototype.precondition=function(e){var r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?Qt.updateTime(r):Qt.none()},t.prototype.preconditionForUpdate=function(e){var r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Z.min()))throw new R(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qt.updateTime(r)}return Qt.exists(!0)},t.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},t.prototype.ensureCommitNotCalled=function(){},t}(),tk=function(){function t(e,r,i,s){this.asyncQueue=e,this.datastore=r,this.updateFunction=i,this.deferred=s,this.ec=5,this.Zi=new ep(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var e=this;this.Zi.ji(function(){return C(e,void 0,void 0,function(){var r,i,s=this;return k(this,function(u){return r=new ZN(this.datastore),(i=this.sc(r))&&i.then(function(c){s.asyncQueue.enqueueAndForget(function(){return r.commit().then(function(){s.deferred.resolve(c)}).catch(function(l){s.ic(l)})})}).catch(function(c){s.ic(c)}),[2]})})})},t.prototype.sc=function(e){try{var r=this.updateFunction(e);return!Dr(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}},t.prototype.ic=function(e){var r=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return r.nc(),Promise.resolve()})):this.deferred.reject(e)},t.prototype.rc=function(e){if(e.name==="FirebaseError"){var r=e.code;return r==="aborted"||r==="failed-precondition"||!p0(r)}return!1},t}(),ek=function(){function t(e,r,i){var s=this;this.credentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=Ww.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(r,function(u){return C(s,void 0,void 0,function(){return k(this,function(c){switch(c.label){case 0:return P("FirestoreClient","Received user=",u.uid),[4,this.credentialListener(u)];case 1:return c.sent(),this.user=u,[2]}})})})}return t.prototype.getConfiguration=function(){return C(this,void 0,void 0,function(){return k(this,function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new R(_.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var r=new de;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return C(e,void 0,void 0,function(){var i,s;return k(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:u.sent(),u.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:u.sent(),u.label=4;case 4:return this.credentials.removeChangeListener(),r.resolve(),[3,6];case 5:return i=u.sent(),s=Ui(i,"Failed to shutdown persistence"),r.reject(s),[3,6];case 6:return[2]}})})}),r.promise},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e){return C(this,void 0,void 0,function(){var r,i,s=this;return k(this,function(u){switch(u.label){case 0:return t.asyncQueue.verifyOperationInProgress(),P("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return r=u.sent(),[4,e.initialize(r)];case 2:return u.sent(),i=r.initialUser,t.setCredentialChangeListener(function(c){return C(s,void 0,void 0,function(){return k(this,function(l){switch(l.label){case 0:return i.isEqual(c)?[3,2]:[4,j0(e.localStore,c)];case 1:l.sent(),i=c,l.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function ab(t,e){return C(this,void 0,void 0,function(){var r,i;return k(this,function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,vp(t)];case 1:return r=s.sent(),P("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=s.sent(),[4,e.initialize(r,i)];case 3:return s.sent(),t.setCredentialChangeListener(function(u){return function(c,l){return C(this,void 0,void 0,function(){var f,v;return k(this,function(m){switch(m.label){case 0:return(f=M(c)).asyncQueue.verifyOperationInProgress(),P("RemoteStore","RemoteStore received new credentials"),v=qn(f),f.Or.add(3),[4,Mi(f)];case 1:return m.sent(),v&&f.Br.set("Unknown"),[4,f.remoteSyncer.handleCredentialChange(l)];case 2:return m.sent(),f.Or.delete(3),[4,vs(f)];case 3:return m.sent(),[2]}})})}(e.remoteStore,u)}),t.onlineComponents=e,[2]}})})}function vp(t){return C(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(P("FirestoreClient","Using default OfflineComponentProvider"),[4,ub(t,new ob)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Oa(t){return C(this,void 0,void 0,function(){return k(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(P("FirestoreClient","Using default OnlineComponentProvider"),[4,ab(t,new uf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function wy(t){return vp(t).then(function(e){return e.persistence})}function cb(t){return vp(t).then(function(e){return e.localStore})}function by(t){return Oa(t).then(function(e){return e.remoteStore})}function hb(t){return Oa(t).then(function(e){return e.syncEngine})}function Ci(t){return C(this,void 0,void 0,function(){var e,r;return k(this,function(i){switch(i.label){case 0:return[4,Oa(t)];case 1:return e=i.sent(),[2,((r=e.eventManager).onListen=LN.bind(null,e.syncEngine),r.onUnlisten=MN.bind(null,e.syncEngine),r)]}})})}function Iy(t,e,r){var i=this;r===void 0&&(r={});var s=new de;return t.asyncQueue.enqueueAndForget(function(){return C(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return u=function(l,f,v,m,y){var w=new Ra({next:function(E){f.enqueueAndForget(function(){return sp(l,I)});var S=E.docs.has(v);!S&&E.fromCache?y.reject(new R(_.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&m&&m.source==="server"?y.reject(new R(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:function(E){return y.reject(E)}}),I=new ap(cs(v.path),w,{includeMetadataChanges:!0,so:!0});return op(l,I)},[4,Ci(t)];case 1:return[2,u.apply(void 0,[c.sent(),t.asyncQueue,e,r,s])]}})})}),s.promise}function Ey(t,e,r){var i=this;r===void 0&&(r={});var s=new de;return t.asyncQueue.enqueueAndForget(function(){return C(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return u=function(l,f,v,m,y){var w=new Ra({next:function(E){f.enqueueAndForget(function(){return sp(l,I)}),E.fromCache&&m.source==="server"?y.reject(new R(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:function(E){return y.reject(E)}}),I=new ap(v,w,{includeMetadataChanges:!0,so:!0});return op(l,I)},[4,Ci(t)];case 1:return[2,u.apply(void 0,[c.sent(),t.asyncQueue,e,r,s])]}})})}),s.promise}var nk=function(t,e,r,i,s,u,c,l){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.useFetchStreams=l},sa=function(){function t(e,r){this.projectId=e,this.database=r||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ty=new Map,lb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Sy=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,r){this.changeListener=r,e.enqueueRetryable(function(){return r(qt.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),rk=function(){function t(e){this.token=e,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(e,r){var i=this;this.changeListener=r,e.enqueueRetryable(function(){return r(i.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ik=function(){function t(e){var r=this;this.currentUser=qt.UNAUTHENTICATED,this.oc=new de,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){r.cc++,r.currentUser=r.ac(),r.oc.resolve(),r.changeListener&&r.asyncQueue.enqueueRetryable(function(){return r.changeListener(r.currentUser)})};var i=function(s){P("FirebaseCredentialsProvider","Auth detected"),r.auth=s,r.auth.addAuthTokenListener(r.uc)};e.onInit(function(s){return i(s)}),setTimeout(function(){if(!r.auth){var s=e.getImmediate({optional:!0});s?i(s):(P("FirebaseCredentialsProvider","Auth not yet detected"),r.oc.resolve())}},0)}return t.prototype.getToken=function(){var e=this,r=this.cc,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(function(s){return e.cc!==r?(P("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):s?(z(typeof s.accessToken=="string"),new lb(s.accessToken,e.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(e,r){var i=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable(function(){return C(i,void 0,void 0,function(){return k(this,function(s){switch(s.label){case 0:return[4,this.oc.promise];case 1:return s.sent(),[4,r(this.currentUser)];case 2:return s.sent(),this.changeListener=r,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new qt(e)},t}(),ok=function(){function t(e,r,i){this.hc=e,this.lc=r,this.fc=i,this.type="FirstParty",this.user=qt.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},r=this.hc.auth.getAuthHeaderValueForFirstParty([]);return r&&(e.Authorization=r),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),t}(),sk=function(){function t(e,r,i){this.hc=e,this.lc=r,this.fc=i}return t.prototype.getToken=function(){return Promise.resolve(new ok(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(e,r){e.enqueueRetryable(function(){return r(qt.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e,r){if(!r)throw new R(_.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function mp(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new R(_.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fb(t,e,r,i){if(e===!0&&i===!0)throw new R(_.INVALID_ARGUMENT,t+" and "+r+" cannot be used together.")}function _y(t){if(!K.isDocumentKey(t))throw new R(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ay(t){if(K.isDocumentKey(t))throw new R(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";var e=function(r){if(r.constructor){var i=/function\s+([^\s(]+)\s*\(/.exec(r.constructor.toString());if(i&&i.length>1)return i[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return typeof t=="function"?"a function":B()}function at(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var r=xa(t);throw new R(_.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+r)}return t}function Ny(t,e){if(e<=0)throw new R(_.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ky=function(){function t(e){var r;if(e.host===void 0){if(e.ssl!==void 0)throw new R(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},t}(),Qo=function(){function t(e,r){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ky({}),this._settingsFrozen=!1,e instanceof sa?(this._databaseId=e,this._credentials=new Sy):(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new R(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(i.options.projectId)}(e),this._credentials=new ik(r))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new R(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(e){if(this._settingsFrozen)throw new R(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ky(e),e.credentials!==void 0&&(this._credentials=function(r){if(!r)return new Sy;switch(r.type){case"gapi":var i=r.client;return z(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new sk(i,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new R(_.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return e=this,(r=Ty.get(e))&&(P("ComponentProvider","Removing Datastore"),Ty.delete(e),r.terminate()),Promise.resolve();var e,r},t}(),bt=function(){function t(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ln(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),_e=function(){function t(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ln=function(t){function e(r,i,s){var u=this;return(u=t.call(this,r,i,cs(s))||this)._path=s,u.type="collection",u}return H(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var r=this._path.popLast();return r.isEmpty()?null:new bt(this.firestore,null,new K(r))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(r){return new e(this.firestore,r,this._path)},e}(_e);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){for(var r,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(t=Rt(t),gp("collection","path",e),t instanceof Qo)return Ay(r=ut.fromString.apply(ut,Tt([e],i))),new Ln(t,null,r);if(!(t instanceof bt||t instanceof Ln))throw new R(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ay(r=ut.fromString.apply(ut,Tt([t.path],i)).child(ut.fromString(e))),new Ln(t.firestore,null,r)}function Mu(t,e){for(var r,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(t=Rt(t),arguments.length===1&&(e=Ww.u()),gp("doc","path",e),t instanceof Qo)return _y(r=ut.fromString.apply(ut,Tt([e],i))),new bt(t,null,new K(r));if(!(t instanceof bt||t instanceof Ln))throw new R(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _y(r=t._path.child(ut.fromString.apply(ut,Tt([e],i)))),new bt(t.firestore,t instanceof Ln?t.converter:null,new K(r))}function db(t,e){return t=Rt(t),e=Rt(e),(t instanceof bt||t instanceof Ln)&&(e instanceof bt||e instanceof Ln)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function vb(t,e){return t=Rt(t),e=Rt(e),t instanceof _e&&e instanceof _e&&t.firestore===e.firestore&&hs(t._query,e._query)&&t.converter===e.converter}var uk=function(){function t(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new ep(this,"async_queue_retry"),this.Ic=function(){var i=Lu();i&&P("AsyncQueue","Visibility state changed to "+i.visibilityState),e.Zi.Gi()};var r=Lu();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(e){this.enqueue(e)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},t.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var r=Lu();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(e){var r=this;if(this.Ac(),this._c)return new Promise(function(){});var i=new de;return this.Rc(function(){return r._c&&r.Ec?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)}).then(function(){return i.promise})},t.prototype.enqueueRetryable=function(e){var r=this;this.enqueueAndForget(function(){return r.wc.push(e),r.bc()})},t.prototype.bc=function(){return C(this,void 0,void 0,function(){var e,r=this;return k(this,function(i){switch(i.label){case 0:if(this.wc.length===0)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return i.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Cr(e=i.sent()))throw e;return P("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return r.bc()}),i.label=5;case 5:return[2]}})})},t.prototype.Rc=function(e){var r=this,i=this.dc.then(function(){return r.gc=!0,e().catch(function(s){throw r.yc=s,r.gc=!1,Ct("INTERNAL UNHANDLED ERROR: ",function(u){var c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),c}(s)),s}).then(function(s){return r.gc=!1,s})});return this.dc=i,i},t.prototype.enqueueAfterDelay=function(e,r,i){var s=this;this.Ac(),this.Tc.indexOf(e)>-1&&(r=0);var u=NN.createAndSchedule(this,e,r,i,function(c){return s.vc(c)});return this.mc.push(u),u},t.prototype.Ac=function(){this.yc&&B()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return C(this,void 0,void 0,function(){var e;return k(this,function(r){switch(r.label){case 0:return[4,e=this.dc];case 1:r.sent(),r.label=2;case 2:if(e!==this.dc)return[3,0];r.label=3;case 3:return[2]}})})},t.prototype.Vc=function(e){for(var r=0,i=this.mc;r<i.length;r++)if(i[r].timerId===e)return!0;return!1},t.prototype.Sc=function(e){var r=this;return this.Pc().then(function(){r.mc.sort(function(c,l){return c.targetTimeMs-l.targetTimeMs});for(var i=0,s=r.mc;i<s.length;i++){var u=s[i];if(u.skipDelay(),e!=="all"&&u.timerId===e)break}return r.Pc()})},t.prototype.Dc=function(e){this.Tc.push(e)},t.prototype.vc=function(e){var r=this.mc.indexOf(e);this.mc.splice(r,1)},t}();function Ri(t){return function(e,r){if(typeof e!="object"||e===null)return!1;for(var i=e,s=0,u=["next","error","complete"];s<u.length;s++){var c=u[s];if(c in i&&typeof i[c]=="function")return!0}return!1}(t)}var ak=-1,Lt=function(t){function e(r,i){var s=this;return(s=t.call(this,r,i)||this).type="firestore",s._queue=new uk,s._persistenceKey="name"in r?r.name:"[DEFAULT]",s}return H(e,t),e.prototype._terminate=function(){return this._firestoreClient||gb(this),this._firestoreClient.terminate()},e}(Qo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t._firestoreClient||gb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gb(t){var e,r=t._freezeSettings(),i=function(s,u,c,l){return new nk(s,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new ek(t._credentials,t._queue,i)}function Dy(t,e,r){var i=this,s=new de;return t.asyncQueue.enqueue(function(){return C(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,ub(t,r)];case 1:return c.sent(),[4,ab(t,e)];case 2:return c.sent(),s.resolve(),[3,4];case 3:if(!function(l){return l.name==="FirebaseError"?l.code===_.FAILED_PRECONDITION||l.code===_.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(u=c.sent()))throw u;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),s.reject(u),[3,4];case 4:return[2]}})})}).then(function(){return s.promise})}function Cy(t){if(t._initialized||t._terminated)throw new R(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0;i<e.length;++i)if(e[i].length===0)throw new R(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}return t.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},t}(),Ar=function(){function t(e){this._byteString=e}return t.fromBase64String=function(e){try{return new t(pe.fromBase64String(e))}catch(r){throw new R(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}},t.fromUint8Array=function(e){return new t(pe.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},t}(),Or=function(t){this._methodName=t},Pa=function(){function t(e,r){if(!isFinite(e)||e<-90||e>90)throw new R(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new R(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(e){return rt(this._lat,e._lat)||rt(this._long,e._long)},t}(),ck=/^__.*__$/,hk=function(){function t(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}return t.prototype.toMutation=function(e,r){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,r,this.fieldTransforms):new ps(e,this.data,r,this.fieldTransforms)},t}(),mb=function(){function t(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}return t.prototype.toMutation=function(e,r){return new jn(e,this.data,this.fieldMask,r,this.fieldTransforms)},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var wb=function(){function t(e,r,i,s,u,c){this.settings=e,this.databaseId=r,this.R=i,this.ignoreUndefinedProperties=s,u===void 0&&this.Cc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(e){var r,i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.xc({path:i,Fc:!1});return s.$c(e),s},t.prototype.Oc=function(e){var r,i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.xc({path:i,Fc:!1});return s.Cc(),s},t.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(e){return ua(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(e){return this.fieldMask.find(function(r){return e.isPrefixOf(r)})!==void 0||this.fieldTransforms.find(function(r){return e.isPrefixOf(r.field)})!==void 0},t.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},t.prototype.$c=function(e){if(e.length===0)throw this.Lc("Document fields must not be empty");if(yb(this.Nc)&&ck.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),lk=function(){function t(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.R=i||Da(e)}return t.prototype.Uc=function(e,r,i,s){return s===void 0&&(s=!1),new wb({Nc:e,methodName:r,qc:i,path:Be.emptyPath(),Fc:!1,Bc:s},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function xr(t){var e=t._freezeSettings(),r=Da(t._databaseId);return new lk(t._databaseId,!!e.ignoreUndefinedProperties,r)}function La(t,e,r,i,s,u){u===void 0&&(u={});var c=t.Uc(u.merge||u.mergeFields?2:0,e,r,s);Ip("Data must be an object, but it was:",c,i);var l,f,v=Eb(i,c);if(u.merge)l=new mi(c.fieldMask),f=c.fieldTransforms;else if(u.mergeFields){for(var m=[],y=0,w=u.mergeFields;y<w.length;y++){var I=af(e,w[y],r);if(!c.contains(I))throw new R(_.INVALID_ARGUMENT,"Field '"+I+"' is specified in your field mask but missing from your input data.");Sb(m,I)||m.push(I)}l=new mi(m),f=c.fieldTransforms.filter(function(E){return l.covers(E.field)})}else l=null,f=c.fieldTransforms;return new hk(new Ee(v),l,f)}var yp=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype._toFieldTransform=function(r){if(r.Nc!==2)throw r.Nc===1?r.Lc(this._methodName+"() can only appear at the top level of your update data"):r.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return r.fieldMask.push(r.path),null},e.prototype.isEqual=function(r){return r instanceof e},e}(Or);function bb(t,e,r){return new wb({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:r},e.databaseId,e.R,e.ignoreUndefinedProperties)}var fk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype._toFieldTransform=function(r){return new fs(r.path,new Ii)},e.prototype.isEqual=function(r){return r instanceof e},e}(Or),pk=function(t){function e(r,i){var s=this;return(s=t.call(this,r)||this).Kc=i,s}return H(e,t),e.prototype._toFieldTransform=function(r){var i=bb(this,r,!0),s=this.Kc.map(function(c){return Pr(c,i)}),u=new Sr(s);return new fs(r.path,u)},e.prototype.isEqual=function(r){return this===r},e}(Or),dk=function(t){function e(r,i){var s=this;return(s=t.call(this,r)||this).Kc=i,s}return H(e,t),e.prototype._toFieldTransform=function(r){var i=bb(this,r,!0),s=this.Kc.map(function(c){return Pr(c,i)}),u=new _r(s);return new fs(r.path,u)},e.prototype.isEqual=function(r){return this===r},e}(Or),vk=function(t){function e(r,i){var s=this;return(s=t.call(this,r)||this).Qc=i,s}return H(e,t),e.prototype._toFieldTransform=function(r){var i=new Ei(r.R,u0(r.R,this.Qc));return new fs(r.path,i)},e.prototype.isEqual=function(r){return this===r},e}(Or);function wp(t,e,r,i){var s=t.Uc(1,e,r);Ip("Data must be an object, but it was:",s,i);var u=[],c=Ee.empty();kr(i,function(f,v){var m=Ep(e,f,r);v=Rt(v);var y=s.Oc(m);if(v instanceof yp)u.push(m);else{var w=Pr(v,y);w!=null&&(u.push(m),c.set(m,w))}});var l=new mi(u);return new mb(c,l,s.fieldTransforms)}function bp(t,e,r,i,s,u){var c=t.Uc(1,e,r),l=[af(e,i,r)],f=[s];if(u.length%2!=0)throw new R(_.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var v=0;v<u.length;v+=2)l.push(af(e,u[v])),f.push(u[v+1]);for(var m=[],y=Ee.empty(),w=l.length-1;w>=0;--w)if(!Sb(m,l[w])){var I=l[w],E=f[w];E=Rt(E);var S=c.Oc(I);if(E instanceof yp)m.push(I);else{var N=Pr(E,S);N!=null&&(m.push(I),y.set(I,N))}}var x=new mi(m);return new mb(y,x,c.fieldTransforms)}function Ib(t,e,r,i){return i===void 0&&(i=!1),Pr(r,t.Uc(i?4:3,e))}function Pr(t,e){if(Tb(t=Rt(t)))return Ip("Unsupported field value:",e,t),Eb(t,e);if(t instanceof Or)return function(r,i){if(!yb(i.Nc))throw i.Lc(r._methodName+"() can only be used with update() and set()");if(!i.path)throw i.Lc(r._methodName+"() is not currently supported inside arrays");var s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&e.Nc!==4)throw e.Lc("Nested arrays are not supported");return function(r,i){for(var s=[],u=0,c=0,l=r;c<l.length;c++){var f=Pr(l[c],i.Mc(u));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),u++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u0(i.R,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){var s=fe.fromDate(r);return{timestampValue:Ho(i.R,s)}}if(r instanceof fe)return s=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3)),{timestampValue:Ho(i.R,s)};if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ar)return{bytesValue:m0(i.R,r._byteString)};if(r instanceof bt){s=i.databaseId;var u=r.firestore._databaseId;if(!u.isEqual(s))throw i.Lc("Document reference is for database "+u.projectId+"/"+u.database+" but should be for database "+s.projectId+"/"+s.database);return{referenceValue:$f(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Lc("Unsupported field value: "+xa(r))}(t,e)}function Eb(t,e){var r={};return Qw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kr(t,function(i,s){var u=Pr(s,e.kc(i));u!=null&&(r[i]=u)}),{mapValue:{fields:r}}}function Tb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof Pa||t instanceof Ar||t instanceof bt||t instanceof Or)}function Ip(t,e,r){if(!Tb(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){var i=xa(r);throw i==="an object"?e.Lc(t+" a custom object"):e.Lc(t+" "+i)}}function af(t,e,r){if((e=Rt(e))instanceof Ze)return e._internalPath;if(typeof e=="string")return Ep(t,e);throw ua("Field path arguments must be of type string or FieldPath.",t,!1,void 0,r)}var gk=new RegExp("[~\\*/\\[\\]]");function Ep(t,e,r){if(e.search(gk)>=0)throw ua("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return new(Ze.bind.apply(Ze,Tt([void 0],e.split("."))))()._internalPath}catch{throw ua("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function ua(t,e,r,i,s){var u=i&&!i.isEmpty(),c=s!==void 0,l="Function "+e+"() called with invalid data";r&&(l+=" (via `toFirestore()`)");var f="";return(u||c)&&(f+=" (found",u&&(f+=" in field "+i),c&&(f+=" in document "+s),f+=")"),new R(_.INVALID_ARGUMENT,(l+=". ")+t+f)}function Sb(t,e){return t.some(function(r){return r.isEqual(e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xo=function(){function t(e,r,i,s,u){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=u}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new bt(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return this._document!==null},t.prototype.data=function(){if(this._document){if(this._converter){var e=new mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(e){if(this._document){var r=this._document.data.field(aa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}},t}(),mk=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Xo);function aa(t,e){return typeof e=="string"?Ep(t,e):e instanceof Ze?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vr=function(){function t(e,r){this.hasPendingWrites=e,this.fromCache=r}return t.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},t}(),dn=function(t){function e(r,i,s,u,c,l){var f=this;return(f=t.call(this,r,i,s,u,l)||this)._firestore=r,f._firestoreImpl=r,f.metadata=c,f}return H(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(r){if(r===void 0&&(r={}),this._document){if(this._converter){var i=new Lo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}},e.prototype.get=function(r,i){if(i===void 0&&(i={}),this._document){var s=this._document.data.field(aa("DocumentSnapshot.get",r));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}},e}(Xo),Lo=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(r){return r===void 0&&(r={}),t.prototype.data.call(this,r)},e}(dn),On=function(){function t(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new vr(s.hasPendingWrites,s.fromCache),this.query=i}return Object.defineProperty(t.prototype,"docs",{get:function(){var e=[];return this.forEach(function(r){return e.push(r)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),t.prototype.forEach=function(e,r){var i=this;this._snapshot.docs.forEach(function(s){e.call(r,new Lo(i._firestore,i._userDataWriter,s.key,s,new vr(i._snapshot.mutatedKeys.has(s.key),i._snapshot.fromCache),i.query.converter))})},t.prototype.docChanges=function(e){e===void 0&&(e={});var r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new R(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){var u=0;return i._snapshot.docChanges.map(function(l){return{type:"added",doc:new Lo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new vr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:u++}})}var c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(l){return s||l.type!==3}).map(function(l){var f=new Lo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new vr(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),v=-1,m=-1;return l.type!==0&&(v=c.indexOf(l.doc.key),c=c.delete(l.doc.key)),l.type!==1&&(m=(c=c.add(l.doc)).indexOf(l.doc.key)),{type:yk(l.type),doc:f,oldIndex:v,newIndex:m}})}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges},t}();function yk(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}function _b(t,e){return t instanceof dn&&e instanceof dn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof On&&e instanceof On&&t._firestore===e._firestore&&vb(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){if(Ju(t)&&t.explicitOrderBy.length===0)throw new R(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gs=function(){};function kn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var i=0,s=e;i<s.length;i++){var u=s[i];t=u._apply(t)}return t}var wk=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).jc=r,u.Wc=i,u.Gc=s,u.type="where",u}return H(e,t),e.prototype._apply=function(r){var i=xr(r.firestore),s=function(u,c,l,f,v,m,y){var w;if(v.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new R(_.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+m+"' queries on FieldPath.documentId().");if(m==="in"||m==="not-in"){Ly(y,m);for(var I=[],E=0,S=y;E<S.length;E++){var N=S[E];I.push(Py(f,u,N))}w={arrayValue:{values:I}}}else w=Py(f,u,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Ly(y,m),w=Ib(l,"where",y,m==="in"||m==="not-in");var x=Se.create(v,m,w);return function(F,U){if(U.g()){var X=Kf(F);if(X!==null&&!X.isEqual(U.field))throw new R(_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+X.toString()+"' and '"+U.field.toString()+"'");var et=Bf(F);et!==null&&kb(F,U.field,et)}var L=function(dt,$){for(var nn=0,T=dt.filters;nn<T.length;nn++){var ji=T[nn];if($.indexOf(ji.op)>=0)return ji.op}return null}(F,function(dt){switch(dt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(L!==null)throw L===U.op?new R(_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+U.op.toString()+"' filter."):new R(_.INVALID_ARGUMENT,"Invalid query. You cannot use '"+U.op.toString()+"' filters with '"+L.toString()+"' filters.")}(u,x),x}(r._query,0,i,r.firestore._databaseId,this.jc,this.Wc,this.Gc);return new _e(r.firestore,r.converter,function(u,c){var l=u.filters.concat([c]);return new gn(u.path,u.collectionGroup,u.explicitOrderBy.slice(),l,u.limit,u.limitType,u.startAt,u.endAt)}(r._query,s))},e}(gs),bk=function(t){function e(r,i){var s=this;return(s=t.call(this)||this).jc=r,s.zc=i,s.type="orderBy",s}return H(e,t),e.prototype._apply=function(r){var i=function(s,u,c){if(s.startAt!==null)throw new R(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new R(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var l=new pi(u,c);return function(f,v){if(Bf(f)===null){var m=Kf(f);m!==null&&kb(f,m,v.field)}}(s,l),l}(r._query,this.jc,this.zc);return new _e(r.firestore,r.converter,function(s,u){var c=s.explicitOrderBy.concat([u]);return new gn(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(r._query,i))},e}(gs),Ry=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).type=r,u.Hc=i,u.Jc=s,u}return H(e,t),e.prototype._apply=function(r){return new _e(r.firestore,r.converter,n0(r._query,this.Hc,this.Jc))},e}(gs),Oy=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).type=r,u.Yc=i,u.Xc=s,u}return H(e,t),e.prototype._apply=function(r){var i=Nb(r,this.type,this.Yc,this.Xc);return new _e(r.firestore,r.converter,function(s,u){return new gn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)}(r._query,i))},e}(gs),xy=function(t){function e(r,i,s){var u=this;return(u=t.call(this)||this).type=r,u.Yc=i,u.Xc=s,u}return H(e,t),e.prototype._apply=function(r){var i=Nb(r,this.type,this.Yc,this.Xc);return new _e(r.firestore,r.converter,function(s,u){return new gn(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)}(r._query,i))},e}(gs);function Nb(t,e,r,i){if(r[0]=Rt(r[0]),r[0]instanceof Xo)return function(u,c,l,f,v){if(!f)throw new R(_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+l+"().");for(var m=[],y=0,w=bi(u);y<w.length;y++){var I=w[y];if(I.field.isKeyField())m.push(Qu(c,f.key));else{var E=f.data.field(I.field);if(Uf(E))throw new R(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){var S=I.field.canonicalString();throw new R(_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+S+"' (used as the orderBy) does not exist.")}m.push(E)}}return new Go(m,v)}(t._query,t.firestore._databaseId,e,r[0]._document,i);var s=xr(t.firestore);return function(u,c,l,f,v,m){var y=u.explicitOrderBy;if(v.length>y.length)throw new R(_.INVALID_ARGUMENT,"Too many arguments provided to "+f+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var w=[],I=0;I<v.length;I++){var E=v[I];if(y[I].field.isKeyField()){if(typeof E!="string")throw new R(_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+f+"(), but got a "+typeof E);if(!Gf(u)&&E.indexOf("/")!==-1)throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+f+"() must be a plain document ID, but '"+E+"' contains a slash.");var S=u.path.child(ut.fromString(E));if(!K.isDocumentKey(S))throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+f+"() must result in a valid document path, but '"+S+"' is not because it contains an odd number of segments.");var N=new K(S);w.push(Qu(c,N))}else{var x=Ib(l,f,E);w.push(x)}}return new Go(w,m)}(t._query,t.firestore._databaseId,s,e,r,i)}function Py(t,e,r){if(typeof(r=Rt(r))=="string"){if(r==="")throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gf(e)&&r.indexOf("/")!==-1)throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+r+"' contains a '/' character.");var i=e.path.child(ut.fromString(r));if(!K.isDocumentKey(i))throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return Qu(t,new K(i))}if(r instanceof bt)return Qu(t,r._key);throw new R(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xa(r)+".")}function Ly(t,e){if(!Array.isArray(t)||t.length===0)throw new R(_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new R(_.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function kb(t,e,r){if(!r.isEqual(e))throw new R(_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+r.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tp=function(){function t(){}return t.prototype.convertValue=function(e,r){switch(r===void 0&&(r="none"),Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw B()}},t.prototype.convertObject=function(e,r){var i=this,s={};return kr(e.fields,function(u,c){s[u]=i.convertValue(c,r)}),s},t.prototype.convertGeoPoint=function(e){return new Pa(Dt(e.latitude),Dt(e.longitude))},t.prototype.convertArray=function(e,r){var i=this;return(e.values||[]).map(function(s){return i.convertValue(s,r)})},t.prototype.convertServerTimestamp=function(e,r){switch(r){case"previous":var i=Yw(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Bo(e));default:return null}},t.prototype.convertTimestamp=function(e){var r=Mn(e);return new fe(r.seconds,r.nanos)},t.prototype.convertDocumentKey=function(e,r){var i=ut.fromString(e);z(_0(i));var s=new sa(i.get(1),i.get(3)),u=new K(i.popFirst(5));return s.isEqual(r)||Ct("Document "+u+" contains a document reference within a different database ("+s.projectId+"/"+s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),u},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t,e,r){return t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e}var Ik=function(t){function e(r){var i=this;return(i=t.call(this)||this).firestore=r,i}return H(e,t),e.prototype.convertBytes=function(r){return new Ar(r)},e.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return new bt(this.firestore,null,i)},e}(Tp),Ek=function(){function t(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=xr(e)}return t.prototype.set=function(e,r,i){this._verifyNotCommitted();var s=xn(e,this._firestore),u=Ma(s.converter,r,i),c=La(this._dataReader,"WriteBatch.set",s._key,u,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Qt.none())),this},t.prototype.update=function(e,r,i){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];this._verifyNotCommitted();var c,l=xn(e,this._firestore);return c=typeof(r=Rt(r))=="string"||r instanceof Ze?bp(this._dataReader,"WriteBatch.update",l._key,r,i,s):wp(this._dataReader,"WriteBatch.update",l._key,r),this._mutations.push(c.toMutation(l._key,Qt.exists(!0))),this},t.prototype.delete=function(e){this._verifyNotCommitted();var r=xn(e,this._firestore);return this._mutations=this._mutations.concat(new ds(r._key,Qt.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new R(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){if((t=Rt(t)).firestore!==e)throw new R(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=function(t){function e(r){var i=this;return(i=t.call(this)||this).firestore=r,i}return H(e,t),e.prototype.convertBytes=function(r){return new Ar(r)},e.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return new bt(this.firestore,null,i)},e}(Tp);function My(t,e,r){t=at(t,bt);var i=at(t.firestore,Lt),s=Ma(t.converter,e,r);return ms(i,[La(xr(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Qt.none())])}function Fy(t,e,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];t=at(t,bt);var u=at(t.firestore,Lt),c=xr(u);return ms(u,[(typeof(e=Rt(e))=="string"||e instanceof Ze?bp(c,"updateDoc",t._key,e,r,i):wp(c,"updateDoc",t._key,e)).toMutation(t._key,Qt.exists(!0))])}function Db(t){for(var e,r,i,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];t=Rt(t);var c={includeMetadataChanges:!1},l=0;typeof s[l]!="object"||Ri(s[l])||(c=s[l],l++);var f,v,m,y={includeMetadataChanges:c.includeMetadataChanges};if(Ri(s[l])){var w=s[l];s[l]=(e=w.next)===null||e===void 0?void 0:e.bind(w),s[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),s[l+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}if(t instanceof bt)v=at(t.firestore,Lt),m=cs(t._key.path),f={next:function(S){s[l]&&s[l](cf(v,t,S))},error:s[l+1],complete:s[l+2]};else{var I=at(t,_e);v=at(I.firestore,Lt),m=I._query;var E=new yr(v);f={next:function(S){s[l]&&s[l](new On(v,E,I,S))},error:s[l+1],complete:s[l+2]},Ab(t._query)}return function(S,N,x,F){var U=this,X=new Ra(F),et=new ap(N,X,x);return S.asyncQueue.enqueueAndForget(function(){return C(U,void 0,void 0,function(){var L;return k(this,function(dt){switch(dt.label){case 0:return L=op,[4,Ci(S)];case 1:return[2,L.apply(void 0,[dt.sent(),et])]}})})}),function(){X.Wo(),S.asyncQueue.enqueueAndForget(function(){return C(U,void 0,void 0,function(){var L;return k(this,function(dt){switch(dt.label){case 0:return L=sp,[4,Ci(S)];case 1:return[2,L.apply(void 0,[dt.sent(),et])]}})})})}}($t(v),m,y,f)}function ms(t,e){return function(r,i){var s=this,u=new de;return r.asyncQueue.enqueueAndForget(function(){return C(s,void 0,void 0,function(){var c;return k(this,function(l){switch(l.label){case 0:return c=FN,[4,hb(r)];case 1:return[2,c.apply(void 0,[l.sent(),i,u])]}})})}),u.promise}($t(t),e)}function cf(t,e,r){var i=r.docs.get(e._key),s=new yr(t);return new dn(t,s,e._key,i,new vr(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tk=function(t){function e(r,i){var s=this;return(s=t.call(this,r,i)||this)._firestore=r,s}return H(e,t),e.prototype.get=function(r){var i=this,s=xn(r,this._firestore),u=new yr(this._firestore);return t.prototype.get.call(this,r).then(function(c){return new dn(i._firestore,u,s._key,c._document,new vr(!1,!1),s.converter)})},e}(function(){function t(e,r){this._firestore=e,this._transaction=r,this._dataReader=xr(e)}return t.prototype.get=function(e){var r=this,i=xn(e,this._firestore),s=new Ik(this._firestore);return this._transaction.lookup([i._key]).then(function(u){if(!u||u.length!==1)return B();var c=u[0];if(c.isFoundDocument())return new Xo(r._firestore,s,c.key,c,i.converter);if(c.isNoDocument())return new Xo(r._firestore,s,i._key,null,i.converter);throw B()})},t.prototype.set=function(e,r,i){var s=xn(e,this._firestore),u=Ma(s.converter,r,i),c=La(this._dataReader,"Transaction.set",s._key,u,s.converter!==null,i);return this._transaction.set(s._key,c),this},t.prototype.update=function(e,r,i){for(var s=[],u=3;u<arguments.length;u++)s[u-3]=arguments[u];var c,l=xn(e,this._firestore);return c=typeof(r=Rt(r))=="string"||r instanceof Ze?bp(this._dataReader,"Transaction.update",l._key,r,i,s):wp(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,c),this},t.prototype.delete=function(e){var r=xn(e,this._firestore);return this._transaction.delete(r._key),this},t}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){if(typeof Uint8Array>"u")throw new R(_.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Uy(){if(typeof atob>"u")throw new R(_.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Cb=function(){function t(e){this._delegate=e}return t.fromBase64String=function(e){return Uy(),new t(Ar.fromBase64String(e))},t.fromUint8Array=function(e){return Vy(),new t(Ar.fromUint8Array(e))},t.prototype.toBase64=function(){return Uy(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Vy(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Sk=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(e,r){return function(i,s){Cy(i=at(i,Lt));var u=$t(i),c=i._freezeSettings(),l=new uf;return Dy(u,l,new sb(l,c.cacheSizeBytes,s==null?void 0:s.forceOwnership))}(e._delegate,{forceOwnership:r})},t.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(r){Cy(r=at(r,Lt));var i=$t(r),s=r._freezeSettings(),u=new uf;return Dy(i,u,new JN(u,s.cacheSizeBytes))}(e._delegate)},t.prototype.clearIndexedDbPersistence=function(e){return function(r){var i=this;if(r._initialized&&!r._terminated)throw new R(_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var s=new de;return r._queue.enqueueAndForgetEvenWhileRestricted(function(){return C(i,void 0,void 0,function(){var u;return k(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,function(l){return C(this,void 0,void 0,function(){var f;return k(this,function(v){switch(v.label){case 0:return _i.yt()?(f=l+"main",[4,_i.delete(f)]):[2,Promise.resolve()];case 1:return v.sent(),[2]}})})}(Zf(r._databaseId,r._persistenceKey))];case 1:return c.sent(),s.resolve(),[3,3];case 2:return u=c.sent(),s.reject(u),[3,3];case 3:return[2]}})})}),s.promise}(e._delegate)},t}(),Rb=function(){function t(e,r,i){var s=this;this._delegate=r,this.Zc=i,this.INTERNAL={delete:function(){return s.terminate()}},e instanceof sa||(this.tu=e)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){var r=this._delegate._getSettings();e.merge||r.host===e.host||Wu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,r,i){i===void 0&&(i={}),function(s,u,c,l){var f;l===void 0&&(l={});var v=(s=at(s,Qo))._getSettings();if(v.host!=="firestore.googleapis.com"&&v.host!==u&&Wu("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},v),{host:u+":"+c,ssl:!1})),l.mockUserToken){var m,y;if(typeof l.mockUserToken=="string")m=l.mockUserToken,y=qt.MOCK_USER;else{m=WS(l.mockUserToken,(f=s._app)===null||f===void 0?void 0:f.options.projectId);var w=l.mockUserToken.sub||l.mockUserToken.user_id;if(!w)throw new R(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new qt(w)}s._credentials=new rk(new lb(m,y))}}(this._delegate,e,r,i)},t.prototype.enableNetwork=function(){return function(e){var r=this;return e.asyncQueue.enqueue(function(){return C(r,void 0,void 0,function(){var i,s;return k(this,function(u){switch(u.label){case 0:return[4,wy(e)];case 1:return i=u.sent(),[4,by(e)];case 2:return s=u.sent(),[2,(i.setNetworkEnabled(!0),function(c){var l=M(c);return l.Or.delete(0),vs(l)}(s))]}})})})}($t(at(this._delegate,Lt)))},t.prototype.disableNetwork=function(){return function(e){var r=this;return e.asyncQueue.enqueue(function(){return C(r,void 0,void 0,function(){var i,s;return k(this,function(u){switch(u.label){case 0:return[4,wy(e)];case 1:return i=u.sent(),[4,by(e)];case 2:return s=u.sent(),[2,(i.setNetworkEnabled(!1),function(c){return C(this,void 0,void 0,function(){var l;return k(this,function(f){switch(f.label){case 0:return(l=M(c)).Or.add(0),[4,Mi(l)];case 1:return f.sent(),l.Br.set("Offline"),[2]}})})}(s))]}})})})}($t(at(this._delegate,Lt)))},t.prototype.enablePersistence=function(e){var r=!1,i=!1;return e&&fb("synchronizeTabs",r=!!e.synchronizeTabs,"experimentalForceOwningTab",i=!!e.experimentalForceOwningTab),r?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,i)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var r=this,i=new de;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var s;return k(this,function(u){switch(u.label){case 0:return s=qN,[4,hb(e)];case 1:return[2,s.apply(void 0,[u.sent(),i])]}})})}),i.promise}($t(at(this._delegate,Lt)))},t.prototype.onSnapshotsInSync=function(e){return function(r,i){return function(s,u){var c=this,l=new Ra(u);return s.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return k(this,function(v){switch(v.label){case 0:return f=function(m,y){M(m).Gr.add(y),y.next()},[4,Ci(s)];case 1:return[2,f.apply(void 0,[v.sent(),l])]}})})}),function(){l.Wo(),s.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return k(this,function(v){switch(v.label){case 0:return f=function(m,y){M(m).Gr.delete(y)},[4,Ci(s)];case 1:return[2,f.apply(void 0,[v.sent(),l])]}})})})}}($t(r=at(r,Lt)),Ri(i)?i:{next:i})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new R(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new ca(this,pb(this._delegate,e))}catch(r){throw ee(r,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new wr(this,Mu(this._delegate,e))}catch(r){throw ee(r,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new Ua(this,function(r,i){if(r=at(r,Qo),gp("collectionGroup","collection id",i),i.indexOf("/")>=0)throw new R(_.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _e(r,null,function(s){return new gn(ut.emptyPath(),s)}(i))}(this._delegate,e))}catch(r){throw ee(r,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var r=this;return function(i,s){return function(u,c){var l=this,f=new de;return u.asyncQueue.enqueueAndForget(function(){return C(l,void 0,void 0,function(){var v;return k(this,function(m){switch(m.label){case 0:return[4,function(y){return Oa(y).then(function(w){return w.datastore})}(u)];case 1:return v=m.sent(),new tk(u.asyncQueue,v,c,f).run(),[2]}})})}),f.promise}($t(i),function(u){return s(new Tk(i,u))})}(this._delegate,function(i){return e(new Ob(r,i))})},t.prototype.batch=function(){var e=this;return $t(this._delegate),new xb(new Ek(this._delegate,function(r){return ms(e._delegate,r)}))},t.prototype.loadBundle=function(e){throw new R(_.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new R(_.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Fa=function(t){function e(r){var i=this;return(i=t.call(this)||this).firestore=r,i}return H(e,t),e.prototype.convertBytes=function(r){return new Cb(new Ar(r))},e.prototype.convertReference=function(r){var i=this.convertDocumentKey(r,this.firestore._databaseId);return wr.eu(i,this.firestore,null)},e}(Tp);function _k(t){var e;e=t,Ue.setLogLevel(e)}var Ob=function(){function t(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new Fa(e)}return t.prototype.get=function(e){var r=this,i=gr(e);return this._delegate.get(i).then(function(s){return new Yo(r._firestore,new dn(r._firestore._delegate,r._userDataWriter,s._key,s._document,s.metadata,i.converter))})},t.prototype.set=function(e,r,i){var s=gr(e);return i?(mp("Transaction.set",i),this._delegate.set(s,r,i)):this._delegate.set(s,r),this},t.prototype.update=function(e,r,i){for(var s,u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var l=gr(e);return arguments.length===2?this._delegate.update(l,r):(s=this._delegate).update.apply(s,Tt([l,r,i],u)),this},t.prototype.delete=function(e){var r=gr(e);return this._delegate.delete(r),this},t}(),xb=function(){function t(e){this._delegate=e}return t.prototype.set=function(e,r,i){var s=gr(e);return i?(mp("WriteBatch.set",i),this._delegate.set(s,r,i)):this._delegate.set(s,r),this},t.prototype.update=function(e,r,i){for(var s,u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var l=gr(e);return arguments.length===2?this._delegate.update(l,r):(s=this._delegate).update.apply(s,Tt([l,r,i],u)),this},t.prototype.delete=function(e){var r=gr(e);return this._delegate.delete(r),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Va=function(){function t(e,r,i){this._firestore=e,this._userDataWriter=r,this._delegate=i}return t.prototype.fromFirestore=function(e,r){var i=new Lo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jo(this._firestore,i),r??{})},t.prototype.toFirestore=function(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)},t.nu=function(e,r){var i=t.su,s=i.get(e);s||(s=new WeakMap,i.set(e,s));var u=s.get(r);return u||(u=new t(e,new Fa(e),r),s.set(r,u)),u},t}();Va.su=new WeakMap;var wr=function(){function t(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Fa(e)}return t.iu=function(e,r,i){if(e.length%2!=0)throw new R(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(r,new bt(r._delegate,i,new K(e)))},t.eu=function(e,r,i){return new t(r,new bt(r._delegate,i,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ca(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new ca(this.firestore,pb(this._delegate,e))}catch(r){throw ee(r,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return(e=Rt(e))instanceof bt&&db(this._delegate,e)},t.prototype.set=function(e,r){r=mp("DocumentReference.set",r);try{return r?My(this._delegate,e,r):My(this._delegate,e)}catch(i){throw ee(i,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];try{return arguments.length===1?Fy(this._delegate,e):Fy.apply(void 0,Tt([this._delegate,e,r],i))}catch(u){throw ee(u,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ms(at((e=this._delegate).firestore,Lt),[new ds(e._key,Qt.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=Pb(r),u=Lb(r,function(c){return new Yo(e.firestore,new dn(e.firestore._delegate,e._userDataWriter,c._key,c._document,c.metadata,e._delegate.converter))});return Db(this._delegate,s,u)},t.prototype.get=function(e){var r=this;return((e==null?void 0:e.source)==="cache"?function(i){i=at(i,bt);var s=at(i.firestore,Lt),u=$t(s),c=new yr(s);return function(l,f){var v=this,m=new de;return l.asyncQueue.enqueueAndForget(function(){return C(v,void 0,void 0,function(){var y;return k(this,function(w){switch(w.label){case 0:return y=function(I,E,S){return C(this,void 0,void 0,function(){var N,x;return k(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,function(U,X){var et=M(U);return et.persistence.runTransaction("read document","readonly",function(L){return et.Mn.mn(L,X)})}(I,E)];case 1:return(x=F.sent()).isFoundDocument()?S.resolve(x):x.isNoDocument()?S.resolve(null):S.reject(new R(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return N=F.sent(),x=Ui(N,"Failed to get document '"+E+" from cache"),S.reject(x),[3,3];case 3:return[2]}})})},[4,cb(l)];case 1:return[2,y.apply(void 0,[w.sent(),f,m])]}})})}),m.promise}(u,i._key).then(function(l){return new dn(s,c,i._key,l,new vr(l!==null&&l.hasLocalMutations,!0),i.converter)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(i){i=at(i,bt);var s=at(i.firestore,Lt);return Iy($t(s),i._key,{source:"server"}).then(function(u){return cf(s,i,u)})}(this._delegate):function(i){i=at(i,bt);var s=at(i.firestore,Lt);return Iy($t(s),i._key).then(function(u){return cf(s,i,u)})}(this._delegate)).then(function(i){return new Yo(r.firestore,new dn(r.firestore._delegate,r._userDataWriter,i._key,i._document,i.metadata,r._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Va.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function ee(t,e,r){return t.message=t.message.replace(e,r),t}function Pb(t){for(var e=0,r=t;e<r.length;e++){var i=r[e];if(typeof i=="object"&&!Ri(i))return i}return{}}function Lb(t,e){var r,i,s;return{next:function(u){s.next&&s.next(e(u))},error:(r=(s=Ri(t[0])?t[0]:Ri(t[1])?t[1]:typeof t[0]=="function"?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)===null||r===void 0?void 0:r.bind(s),complete:(i=s.complete)===null||i===void 0?void 0:i.bind(s)}}var Yo=function(){function t(e,r){this._firestore=e,this._delegate=r}return Object.defineProperty(t.prototype,"ref",{get:function(){return new wr(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,r){return this._delegate.get(e,r)},t.prototype.isEqual=function(e){return _b(this._delegate,e._delegate)},t}(),Jo=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return H(e,t),e.prototype.data=function(r){return this._delegate.data(r)},e}(Yo),Ua=function(){function t(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new Fa(e)}return t.prototype.where=function(e,r,i){try{return new t(this.firestore,kn(this._delegate,function(s,u,c){var l=u,f=aa("where",s);return new wk(f,l,c)}(e,r,i)))}catch(s){throw ee(s,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,r){try{return new t(this.firestore,kn(this._delegate,function(i,s){s===void 0&&(s="asc");var u=s,c=aa("orderBy",i);return new bk(c,u)}(e,r)))}catch(i){throw ee(i,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,kn(this._delegate,function(r){return Ny("limit",r),new Ry("limit",r,"F")}(e)))}catch(r){throw ee(r,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,kn(this._delegate,function(r){return Ny("limitToLast",r),new Ry("limitToLast",r,"L")}(e)))}catch(r){throw ee(r,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return new t(this.firestore,kn(this._delegate,function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new Oy("startAt",i,!0)}.apply(void 0,e)))}catch(i){throw ee(i,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return new t(this.firestore,kn(this._delegate,function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new Oy("startAfter",i,!1)}.apply(void 0,e)))}catch(i){throw ee(i,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return new t(this.firestore,kn(this._delegate,function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new xy("endBefore",i,!0)}.apply(void 0,e)))}catch(i){throw ee(i,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return new t(this.firestore,kn(this._delegate,function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new xy("endAt",i,!1)}.apply(void 0,e)))}catch(i){throw ee(i,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return vb(this._delegate,e._delegate)},t.prototype.get=function(e){var r=this;return((e==null?void 0:e.source)==="cache"?function(i){i=at(i,_e);var s=at(i.firestore,Lt),u=$t(s),c=new yr(s);return function(l,f){var v=this,m=new de;return l.asyncQueue.enqueueAndForget(function(){return C(v,void 0,void 0,function(){var y;return k(this,function(w){switch(w.label){case 0:return y=function(I,E,S){return C(this,void 0,void 0,function(){var N,x,F,U,X;return k(this,function(et){switch(et.label){case 0:return et.trys.push([0,2,,3]),[4,ra(I,E,!0)];case 1:return X=et.sent(),N=new eb(E,X.Bn),x=N._o(X.documents),F=N.applyChanges(x,!1),S.resolve(F.snapshot),[3,3];case 2:return U=et.sent(),X=Ui(U,"Failed to execute query '"+E+" against cache"),S.reject(X),[3,3];case 3:return[2]}})})},[4,cb(l)];case 1:return[2,y.apply(void 0,[w.sent(),f,m])]}})})}),m.promise}(u,i._query).then(function(l){return new On(s,c,i,l)})}(this._delegate):(e==null?void 0:e.source)==="server"?function(i){i=at(i,_e);var s=at(i.firestore,Lt),u=$t(s),c=new yr(s);return Ey(u,i._query,{source:"server"}).then(function(l){return new On(s,c,i,l)})}(this._delegate):function(i){i=at(i,_e);var s=at(i.firestore,Lt),u=$t(s),c=new yr(s);return Ab(i._query),Ey(u,i._query).then(function(l){return new On(s,c,i,l)})}(this._delegate)).then(function(i){return new hf(r.firestore,new On(r.firestore._delegate,r._userDataWriter,r._delegate,i._snapshot))})},t.prototype.onSnapshot=function(){for(var e=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=Pb(r),u=Lb(r,function(c){return new hf(e.firestore,new On(e.firestore._delegate,e._userDataWriter,e._delegate,c._snapshot))});return Db(this._delegate,s,u)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Va.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ak=function(){function t(e,r){this._firestore=e,this._delegate=r}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Jo(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),hf=function(){function t(e,r){this._firestore=e,this._delegate=r}return Object.defineProperty(t.prototype,"query",{get:function(){return new Ua(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(r){return new Jo(e._firestore,r)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var r=this;return this._delegate.docChanges(e).map(function(i){return new Ak(r._firestore,i)})},t.prototype.forEach=function(e,r){var i=this;this._delegate.forEach(function(s){e.call(r,new Jo(i._firestore,s))})},t.prototype.isEqual=function(e){return _b(this._delegate,e._delegate)},t}(),ca=function(t){function e(r,i){var s=this;return(s=t.call(this,r,i)||this).firestore=r,s._delegate=i,s}return H(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var r=this._delegate.parent;return r?new wr(this.firestore,r):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(r){try{return new wr(this.firestore,r===void 0?Mu(this._delegate):Mu(this._delegate,r))}catch(i){throw ee(i,"doc()","CollectionReference.doc()")}},e.prototype.add=function(r){var i=this;return function(s,u){var c=at(s.firestore,Lt),l=Mu(s),f=Ma(s.converter,u);return ms(c,[La(xr(s.firestore),"addDoc",l._key,f,s.converter!==null,{}).toMutation(l._key,Qt.exists(!1))]).then(function(){return l})}(this._delegate,r).then(function(s){return new wr(i.firestore,s)})},e.prototype.isEqual=function(r){return db(this._delegate,r._delegate)},e.prototype.withConverter=function(r){return new e(this.firestore,r?this._delegate.withConverter(Va.nu(this.firestore,r)):this._delegate.withConverter(null))},e}(Ua);function gr(t){return at(t,bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nk=function(){function t(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._delegate=new(Ze.bind.apply(Ze,Tt([void 0],e)))}return t.documentId=function(){return new t(Be.keyField().canonicalString())},t.prototype.isEqual=function(e){return(e=Rt(e))instanceof Ze&&this._delegate._internalPath.isEqual(e._internalPath)},t}(),kk=function(){function t(e){this._delegate=e}return t.serverTimestamp=function(){var e=new fk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new yp("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return new pk("arrayUnion",s)}.apply(void 0,e);return i._methodName="FieldValue.arrayUnion",new t(i)},t.arrayRemove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return new dk("arrayRemove",s)}.apply(void 0,e);return i._methodName="FieldValue.arrayRemove",new t(i)},t.increment=function(e){var r=function(i){return new vk("increment",i)}(e);return r._methodName="FieldValue.increment",new t(r)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(),Dk={Firestore:Rb,GeoPoint:Pa,Timestamp:fe,Blob:Cb,Transaction:Ob,WriteBatch:xb,DocumentReference:wr,DocumentSnapshot:Yo,Query:Ua,QueryDocumentSnapshot:Jo,QuerySnapshot:hf,CollectionReference:ca,FieldPath:Nk,FieldValue:kk,setLogLevel:_k,CACHE_SIZE_UNLIMITED:ak};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){(function(e,r){e.INTERNAL.registerComponent(new ha("firestore",function(i){var s=i.getProvider("app").getImmediate();return r(s,i.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Dk)))})(t,function(e,r){return new Rb(e,new Lt(e,r),new Sk)}),t.registerVersion("@firebase/firestore","2.4.1")}Ck(Y);export{Y as f};
